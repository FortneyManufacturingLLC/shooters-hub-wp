var RD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var R_={exports:{}},lh={},P_={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ml=Symbol.for("react.element"),dS=Symbol.for("react.portal"),fS=Symbol.for("react.fragment"),pS=Symbol.for("react.strict_mode"),mS=Symbol.for("react.profiler"),gS=Symbol.for("react.provider"),yS=Symbol.for("react.context"),vS=Symbol.for("react.forward_ref"),_S=Symbol.for("react.suspense"),wS=Symbol.for("react.memo"),ES=Symbol.for("react.lazy"),gg=Symbol.iterator;function TS(t){return t===null||typeof t!="object"?null:(t=gg&&t[gg]||t["@@iterator"],typeof t=="function"?t:null)}var D_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M_=Object.assign,O_={};function Xo(t,e,n){this.props=t,this.context=e,this.refs=O_,this.updater=n||D_}Xo.prototype.isReactComponent={};Xo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function L_(){}L_.prototype=Xo.prototype;function Mp(t,e,n){this.props=t,this.context=e,this.refs=O_,this.updater=n||D_}var Op=Mp.prototype=new L_;Op.constructor=Mp;M_(Op,Xo.prototype);Op.isPureReactComponent=!0;var yg=Array.isArray,V_=Object.prototype.hasOwnProperty,Lp={current:null},F_={key:!0,ref:!0,__self:!0,__source:!0};function j_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)V_.call(e,r)&&!F_.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Ml,type:t,key:i,ref:o,props:s,_owner:Lp.current}}function SS(t,e){return{$$typeof:Ml,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ml}function IS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vg=/\/+/g;function Xh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?IS(""+t.key):e.toString(36)}function Qu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ml:case dS:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Xh(o,0):r,yg(s)?(n="",t!=null&&(n=t.replace(vg,"$&/")+"/"),Qu(s,e,n,"",function(d){return d})):s!=null&&(Vp(s)&&(s=SS(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(vg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",yg(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+Xh(i,u);o+=Qu(i,e,n,c,s)}else if(c=TS(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+Xh(i,u++),o+=Qu(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tu(t,e,n){if(t==null)return t;var r=[],s=0;return Qu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function CS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ut={current:null},Yu={transition:null},AS={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:Yu,ReactCurrentOwner:Lp};function $_(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Tu,forEach:function(t,e,n){Tu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tu(t,function(){e++}),e},toArray:function(t){return Tu(t,function(e){return e})||[]},only:function(t){if(!Vp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=Xo;ce.Fragment=fS;ce.Profiler=mS;ce.PureComponent=Mp;ce.StrictMode=pS;ce.Suspense=_S;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AS;ce.act=$_;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=M_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Lp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)V_.call(e,c)&&!F_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:Ml,type:t.type,key:s,ref:i,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:yS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gS,_context:t},t.Consumer=t};ce.createElement=j_;ce.createFactory=function(t){var e=j_.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:vS,render:t}};ce.isValidElement=Vp;ce.lazy=function(t){return{$$typeof:ES,_payload:{_status:-1,_result:t},_init:CS}};ce.memo=function(t,e){return{$$typeof:wS,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Yu.transition;Yu.transition={};try{t()}finally{Yu.transition=e}};ce.unstable_act=$_;ce.useCallback=function(t,e){return Ut.current.useCallback(t,e)};ce.useContext=function(t){return Ut.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return Ut.current.useDeferredValue(t)};ce.useEffect=function(t,e){return Ut.current.useEffect(t,e)};ce.useId=function(){return Ut.current.useId()};ce.useImperativeHandle=function(t,e,n){return Ut.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Ut.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Ut.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Ut.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return Ut.current.useReducer(t,e,n)};ce.useRef=function(t){return Ut.current.useRef(t)};ce.useState=function(t){return Ut.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Ut.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Ut.current.useTransition()};ce.version="18.3.1";P_.exports=ce;var M=P_.exports;const rf=hS(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bS=M,kS=Symbol.for("react.element"),xS=Symbol.for("react.fragment"),NS=Object.prototype.hasOwnProperty,RS=bS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PS={key:!0,ref:!0,__self:!0,__source:!0};function U_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)NS.call(e,r)&&!PS.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:kS,type:t,key:i,ref:o,props:s,_owner:RS.current}}lh.Fragment=xS;lh.jsx=U_;lh.jsxs=U_;R_.exports=lh;var v=R_.exports,sf={},B_={exports:{}},gn={},z_={exports:{}},H_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,Z){var se=H.length;H.push(Z);e:for(;0<se;){var Re=se-1>>>1,le=H[Re];if(0<s(le,Z))H[Re]=Z,H[se]=le,se=Re;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Z=H[0],se=H.pop();if(se!==Z){H[0]=se;e:for(var Re=0,le=H.length,xe=le>>>1;Re<xe;){var Dn=2*(Re+1)-1,vn=H[Dn],Ot=Dn+1,nn=H[Ot];if(0>s(vn,se))Ot<le&&0>s(nn,vn)?(H[Re]=nn,H[Ot]=se,Re=Ot):(H[Re]=vn,H[Dn]=se,Re=Dn);else if(Ot<le&&0>s(nn,se))H[Re]=nn,H[Ot]=se,Re=Ot;else break e}}return Z}function s(H,Z){var se=H.sortIndex-Z.sortIndex;return se!==0?se:H.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],d=[],p=1,m=null,g=3,S=!1,I=!1,P=!1,L=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(H){for(var Z=n(d);Z!==null;){if(Z.callback===null)r(d);else if(Z.startTime<=H)r(d),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=n(d)}}function D(H){if(P=!1,C(H),!I)if(n(c)!==null)I=!0,ke(F);else{var Z=n(d);Z!==null&&qe(D,Z.startTime-H)}}function F(H,Z){I=!1,P&&(P=!1,E(w),w=-1),S=!0;var se=g;try{for(C(Z),m=n(c);m!==null&&(!(m.expirationTime>Z)||H&&!x());){var Re=m.callback;if(typeof Re=="function"){m.callback=null,g=m.priorityLevel;var le=Re(m.expirationTime<=Z);Z=t.unstable_now(),typeof le=="function"?m.callback=le:m===n(c)&&r(c),C(Z)}else r(c);m=n(c)}if(m!==null)var xe=!0;else{var Dn=n(d);Dn!==null&&qe(D,Dn.startTime-Z),xe=!1}return xe}finally{m=null,g=se,S=!1}}var j=!1,k=null,w=-1,A=5,T=-1;function x(){return!(t.unstable_now()-T<A)}function R(){if(k!==null){var H=t.unstable_now();T=H;var Z=!0;try{Z=k(!0,H)}finally{Z?b():(j=!1,k=null)}}else j=!1}var b;if(typeof _=="function")b=function(){_(R)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,me=Se.port2;Se.port1.onmessage=R,b=function(){me.postMessage(null)}}else b=function(){L(R,0)};function ke(H){k=H,j||(j=!0,b())}function qe(H,Z){w=L(function(){H(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){I||S||(I=!0,ke(F))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(H){switch(g){case 1:case 2:case 3:var Z=3;break;default:Z=g}var se=g;g=Z;try{return H()}finally{g=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var se=g;g=H;try{return Z()}finally{g=se}},t.unstable_scheduleCallback=function(H,Z,se){var Re=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Re+se:Re):se=Re,H){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=se+le,H={id:p++,callback:Z,priorityLevel:H,startTime:se,expirationTime:le,sortIndex:-1},se>Re?(H.sortIndex=se,e(d,H),n(c)===null&&H===n(d)&&(P?(E(w),w=-1):P=!0,qe(D,se-Re))):(H.sortIndex=le,e(c,H),I||S||(I=!0,ke(F))),H},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(H){var Z=g;return function(){var se=g;g=Z;try{return H.apply(this,arguments)}finally{g=se}}}})(H_);z_.exports=H_;var DS=z_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS=M,mn=DS;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var W_=new Set,al={};function Wi(t,e){Lo(t,e),Lo(t+"Capture",e)}function Lo(t,e){for(al[t]=e,t=0;t<e.length;t++)W_.add(e[t])}var Kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),of=Object.prototype.hasOwnProperty,OS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_g={},wg={};function LS(t){return of.call(wg,t)?!0:of.call(_g,t)?!1:OS.test(t)?wg[t]=!0:(_g[t]=!0,!1)}function VS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FS(t,e,n,r){if(e===null||typeof e>"u"||VS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wt[t]=new Bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wt[e]=new Bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wt[t]=new Bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wt[t]=new Bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wt[t]=new Bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wt[t]=new Bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wt[t]=new Bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wt[t]=new Bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wt[t]=new Bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fp=/[\-:]([a-z])/g;function jp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fp,jp);wt[e]=new Bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fp,jp);wt[e]=new Bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fp,jp);wt[e]=new Bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wt[t]=new Bt(t,1,!1,t.toLowerCase(),null,!1,!1)});wt.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wt[t]=new Bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function $p(t,e,n,r){var s=wt.hasOwnProperty(e)?wt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FS(e,n,s,r)&&(n=null),r||s===null?LS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jr=MS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Su=Symbol.for("react.element"),ho=Symbol.for("react.portal"),fo=Symbol.for("react.fragment"),Up=Symbol.for("react.strict_mode"),af=Symbol.for("react.profiler"),K_=Symbol.for("react.provider"),q_=Symbol.for("react.context"),Bp=Symbol.for("react.forward_ref"),lf=Symbol.for("react.suspense"),uf=Symbol.for("react.suspense_list"),zp=Symbol.for("react.memo"),ys=Symbol.for("react.lazy"),G_=Symbol.for("react.offscreen"),Eg=Symbol.iterator;function ya(t){return t===null||typeof t!="object"?null:(t=Eg&&t[Eg]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,Jh;function Na(t){if(Jh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jh=e&&e[1]||""}return`
`+Jh+t}var Zh=!1;function ed(t,e){if(!t||Zh)return"";Zh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{Zh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Na(t):""}function jS(t){switch(t.tag){case 5:return Na(t.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 2:case 15:return t=ed(t.type,!1),t;case 11:return t=ed(t.type.render,!1),t;case 1:return t=ed(t.type,!0),t;default:return""}}function cf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fo:return"Fragment";case ho:return"Portal";case af:return"Profiler";case Up:return"StrictMode";case lf:return"Suspense";case uf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case q_:return(t.displayName||"Context")+".Consumer";case K_:return(t._context.displayName||"Context")+".Provider";case Bp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zp:return e=t.displayName||null,e!==null?e:cf(t.type)||"Memo";case ys:e=t._payload,t=t._init;try{return cf(t(e))}catch{}}return null}function $S(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cf(e);case 8:return e===Up?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function js(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Q_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function US(t){var e=Q_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Iu(t){t._valueTracker||(t._valueTracker=US(t))}function Y_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Q_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _c(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hf(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Tg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=js(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function X_(t,e){e=e.checked,e!=null&&$p(t,"checked",e,!1)}function df(t,e){X_(t,e);var n=js(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ff(t,e.type,n):e.hasOwnProperty("defaultValue")&&ff(t,e.type,js(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ff(t,e,n){(e!=="number"||_c(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ra=Array.isArray;function Co(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+js(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function pf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ig(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Ra(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:js(n)}}function J_(t,e){var n=js(e.value),r=js(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Cg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Z_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Z_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cu,e0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cu=Cu||document.createElement("div"),Cu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ll(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BS=["Webkit","ms","Moz","O"];Object.keys(Fa).forEach(function(t){BS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fa[e]=Fa[t]})});function t0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fa.hasOwnProperty(t)&&Fa[t]?(""+e).trim():e+"px"}function n0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=t0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var zS=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gf(t,e){if(e){if(zS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function yf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vf=null;function Hp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _f=null,Ao=null,bo=null;function Ag(t){if(t=Vl(t)){if(typeof _f!="function")throw Error(z(280));var e=t.stateNode;e&&(e=fh(e),_f(t.stateNode,t.type,e))}}function r0(t){Ao?bo?bo.push(t):bo=[t]:Ao=t}function s0(){if(Ao){var t=Ao,e=bo;if(bo=Ao=null,Ag(t),e)for(t=0;t<e.length;t++)Ag(e[t])}}function i0(t,e){return t(e)}function o0(){}var td=!1;function a0(t,e,n){if(td)return t(e,n);td=!0;try{return i0(t,e,n)}finally{td=!1,(Ao!==null||bo!==null)&&(o0(),s0())}}function ul(t,e){var n=t.stateNode;if(n===null)return null;var r=fh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var wf=!1;if(Kr)try{var va={};Object.defineProperty(va,"passive",{get:function(){wf=!0}}),window.addEventListener("test",va,va),window.removeEventListener("test",va,va)}catch{wf=!1}function HS(t,e,n,r,s,i,o,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var ja=!1,wc=null,Ec=!1,Ef=null,WS={onError:function(t){ja=!0,wc=t}};function KS(t,e,n,r,s,i,o,u,c){ja=!1,wc=null,HS.apply(WS,arguments)}function qS(t,e,n,r,s,i,o,u,c){if(KS.apply(this,arguments),ja){if(ja){var d=wc;ja=!1,wc=null}else throw Error(z(198));Ec||(Ec=!0,Ef=d)}}function Ki(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function l0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bg(t){if(Ki(t)!==t)throw Error(z(188))}function GS(t){var e=t.alternate;if(!e){if(e=Ki(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return bg(s),t;if(i===r)return bg(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function u0(t){return t=GS(t),t!==null?c0(t):null}function c0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=c0(t);if(e!==null)return e;t=t.sibling}return null}var h0=mn.unstable_scheduleCallback,kg=mn.unstable_cancelCallback,QS=mn.unstable_shouldYield,YS=mn.unstable_requestPaint,Xe=mn.unstable_now,XS=mn.unstable_getCurrentPriorityLevel,Wp=mn.unstable_ImmediatePriority,d0=mn.unstable_UserBlockingPriority,Tc=mn.unstable_NormalPriority,JS=mn.unstable_LowPriority,f0=mn.unstable_IdlePriority,uh=null,hr=null;function ZS(t){if(hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(uh,t,void 0,(t.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:n1,e1=Math.log,t1=Math.LN2;function n1(t){return t>>>=0,t===0?32:31-(e1(t)/t1|0)|0}var Au=64,bu=4194304;function Pa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Pa(u):(i&=o,i!==0&&(r=Pa(i)))}else o=n&~s,o!==0?r=Pa(o):i!==0&&(r=Pa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gn(e),s=1<<n,r|=t[n],e&=~s;return r}function r1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Gn(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=r1(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function Tf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function p0(){var t=Au;return Au<<=1,!(Au&4194240)&&(Au=64),t}function nd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ol(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gn(e),t[e]=n}function i1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Gn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Kp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ce=0;function m0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var g0,qp,y0,v0,_0,Sf=!1,ku=[],As=null,bs=null,ks=null,cl=new Map,hl=new Map,_s=[],o1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xg(t,e){switch(t){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":bs=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":cl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(e.pointerId)}}function _a(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Vl(e),e!==null&&qp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function a1(t,e,n,r,s){switch(e){case"focusin":return As=_a(As,t,e,n,r,s),!0;case"dragenter":return bs=_a(bs,t,e,n,r,s),!0;case"mouseover":return ks=_a(ks,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return cl.set(i,_a(cl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,hl.set(i,_a(hl.get(i)||null,t,e,n,r,s)),!0}return!1}function w0(t){var e=Ti(t.target);if(e!==null){var n=Ki(e);if(n!==null){if(e=n.tag,e===13){if(e=l0(n),e!==null){t.blockedOn=e,_0(t.priority,function(){y0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=If(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vf=r,n.target.dispatchEvent(r),vf=null}else return e=Vl(n),e!==null&&qp(e),t.blockedOn=n,!1;e.shift()}return!0}function Ng(t,e,n){Xu(t)&&n.delete(e)}function l1(){Sf=!1,As!==null&&Xu(As)&&(As=null),bs!==null&&Xu(bs)&&(bs=null),ks!==null&&Xu(ks)&&(ks=null),cl.forEach(Ng),hl.forEach(Ng)}function wa(t,e){t.blockedOn===e&&(t.blockedOn=null,Sf||(Sf=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,l1)))}function dl(t){function e(s){return wa(s,t)}if(0<ku.length){wa(ku[0],t);for(var n=1;n<ku.length;n++){var r=ku[n];r.blockedOn===t&&(r.blockedOn=null)}}for(As!==null&&wa(As,t),bs!==null&&wa(bs,t),ks!==null&&wa(ks,t),cl.forEach(e),hl.forEach(e),n=0;n<_s.length;n++)r=_s[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_s.length&&(n=_s[0],n.blockedOn===null);)w0(n),n.blockedOn===null&&_s.shift()}var ko=Jr.ReactCurrentBatchConfig,Ic=!0;function u1(t,e,n,r){var s=Ce,i=ko.transition;ko.transition=null;try{Ce=1,Gp(t,e,n,r)}finally{Ce=s,ko.transition=i}}function c1(t,e,n,r){var s=Ce,i=ko.transition;ko.transition=null;try{Ce=4,Gp(t,e,n,r)}finally{Ce=s,ko.transition=i}}function Gp(t,e,n,r){if(Ic){var s=If(t,e,n,r);if(s===null)dd(t,e,r,Cc,n),xg(t,r);else if(a1(s,t,e,n,r))r.stopPropagation();else if(xg(t,r),e&4&&-1<o1.indexOf(t)){for(;s!==null;){var i=Vl(s);if(i!==null&&g0(i),i=If(t,e,n,r),i===null&&dd(t,e,r,Cc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else dd(t,e,r,null,n)}}var Cc=null;function If(t,e,n,r){if(Cc=null,t=Hp(r),t=Ti(t),t!==null)if(e=Ki(t),e===null)t=null;else if(n=e.tag,n===13){if(t=l0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cc=t,null}function E0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XS()){case Wp:return 1;case d0:return 4;case Tc:case JS:return 16;case f0:return 536870912;default:return 16}default:return 16}}var Ts=null,Qp=null,Ju=null;function T0(){if(Ju)return Ju;var t,e=Qp,n=e.length,r,s="value"in Ts?Ts.value:Ts.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ju=s.slice(t,1<r?1-r:void 0)}function Zu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xu(){return!0}function Rg(){return!1}function yn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xu:Rg,this.isPropagationStopped=Rg,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xu)},persist:function(){},isPersistent:xu}),e}var Jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yp=yn(Jo),Ll=Ke({},Jo,{view:0,detail:0}),h1=yn(Ll),rd,sd,Ea,ch=Ke({},Ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ea&&(Ea&&t.type==="mousemove"?(rd=t.screenX-Ea.screenX,sd=t.screenY-Ea.screenY):sd=rd=0,Ea=t),rd)},movementY:function(t){return"movementY"in t?t.movementY:sd}}),Pg=yn(ch),d1=Ke({},ch,{dataTransfer:0}),f1=yn(d1),p1=Ke({},Ll,{relatedTarget:0}),id=yn(p1),m1=Ke({},Jo,{animationName:0,elapsedTime:0,pseudoElement:0}),g1=yn(m1),y1=Ke({},Jo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),v1=yn(y1),_1=Ke({},Jo,{data:0}),Dg=yn(_1),w1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function S1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=T1[t])?!!e[t]:!1}function Xp(){return S1}var I1=Ke({},Ll,{key:function(t){if(t.key){var e=w1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?E1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xp,charCode:function(t){return t.type==="keypress"?Zu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),C1=yn(I1),A1=Ke({},ch,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mg=yn(A1),b1=Ke({},Ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xp}),k1=yn(b1),x1=Ke({},Jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),N1=yn(x1),R1=Ke({},ch,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),P1=yn(R1),D1=[9,13,27,32],Jp=Kr&&"CompositionEvent"in window,$a=null;Kr&&"documentMode"in document&&($a=document.documentMode);var M1=Kr&&"TextEvent"in window&&!$a,S0=Kr&&(!Jp||$a&&8<$a&&11>=$a),Og=" ",Lg=!1;function I0(t,e){switch(t){case"keyup":return D1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var po=!1;function O1(t,e){switch(t){case"compositionend":return C0(e);case"keypress":return e.which!==32?null:(Lg=!0,Og);case"textInput":return t=e.data,t===Og&&Lg?null:t;default:return null}}function L1(t,e){if(po)return t==="compositionend"||!Jp&&I0(t,e)?(t=T0(),Ju=Qp=Ts=null,po=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return S0&&e.locale!=="ko"?null:e.data;default:return null}}var V1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!V1[t.type]:e==="textarea"}function A0(t,e,n,r){r0(r),e=Ac(e,"onChange"),0<e.length&&(n=new Yp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ua=null,fl=null;function F1(t){V0(t,0)}function hh(t){var e=yo(t);if(Y_(e))return t}function j1(t,e){if(t==="change")return e}var b0=!1;if(Kr){var od;if(Kr){var ad="oninput"in document;if(!ad){var Fg=document.createElement("div");Fg.setAttribute("oninput","return;"),ad=typeof Fg.oninput=="function"}od=ad}else od=!1;b0=od&&(!document.documentMode||9<document.documentMode)}function jg(){Ua&&(Ua.detachEvent("onpropertychange",k0),fl=Ua=null)}function k0(t){if(t.propertyName==="value"&&hh(fl)){var e=[];A0(e,fl,t,Hp(t)),a0(F1,e)}}function $1(t,e,n){t==="focusin"?(jg(),Ua=e,fl=n,Ua.attachEvent("onpropertychange",k0)):t==="focusout"&&jg()}function U1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hh(fl)}function B1(t,e){if(t==="click")return hh(e)}function z1(t,e){if(t==="input"||t==="change")return hh(e)}function H1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yn=typeof Object.is=="function"?Object.is:H1;function pl(t,e){if(Yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!of.call(e,s)||!Yn(t[s],e[s]))return!1}return!0}function $g(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ug(t,e){var n=$g(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$g(n)}}function x0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?x0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function N0(){for(var t=window,e=_c();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_c(t.document)}return e}function Zp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function W1(t){var e=N0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&x0(n.ownerDocument.documentElement,n)){if(r!==null&&Zp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ug(n,i);var o=Ug(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var K1=Kr&&"documentMode"in document&&11>=document.documentMode,mo=null,Cf=null,Ba=null,Af=!1;function Bg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Af||mo==null||mo!==_c(r)||(r=mo,"selectionStart"in r&&Zp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ba&&pl(Ba,r)||(Ba=r,r=Ac(Cf,"onSelect"),0<r.length&&(e=new Yp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mo)))}function Nu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var go={animationend:Nu("Animation","AnimationEnd"),animationiteration:Nu("Animation","AnimationIteration"),animationstart:Nu("Animation","AnimationStart"),transitionend:Nu("Transition","TransitionEnd")},ld={},R0={};Kr&&(R0=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function dh(t){if(ld[t])return ld[t];if(!go[t])return t;var e=go[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in R0)return ld[t]=e[n];return t}var P0=dh("animationend"),D0=dh("animationiteration"),M0=dh("animationstart"),O0=dh("transitionend"),L0=new Map,zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qs(t,e){L0.set(t,e),Wi(e,[t])}for(var ud=0;ud<zg.length;ud++){var cd=zg[ud],q1=cd.toLowerCase(),G1=cd[0].toUpperCase()+cd.slice(1);qs(q1,"on"+G1)}qs(P0,"onAnimationEnd");qs(D0,"onAnimationIteration");qs(M0,"onAnimationStart");qs("dblclick","onDoubleClick");qs("focusin","onFocus");qs("focusout","onBlur");qs(O0,"onTransitionEnd");Lo("onMouseEnter",["mouseout","mouseover"]);Lo("onMouseLeave",["mouseout","mouseover"]);Lo("onPointerEnter",["pointerout","pointerover"]);Lo("onPointerLeave",["pointerout","pointerover"]);Wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Da));function Hg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,qS(r,e,void 0,t),t.currentTarget=null}function V0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;Hg(s,u,d),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;Hg(s,u,d),i=c}}}if(Ec)throw t=Ef,Ec=!1,Ef=null,t}function Le(t,e){var n=e[Rf];n===void 0&&(n=e[Rf]=new Set);var r=t+"__bubble";n.has(r)||(F0(e,t,2,!1),n.add(r))}function hd(t,e,n){var r=0;e&&(r|=4),F0(n,t,r,e)}var Ru="_reactListening"+Math.random().toString(36).slice(2);function ml(t){if(!t[Ru]){t[Ru]=!0,W_.forEach(function(n){n!=="selectionchange"&&(Q1.has(n)||hd(n,!1,t),hd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ru]||(e[Ru]=!0,hd("selectionchange",!1,e))}}function F0(t,e,n,r){switch(E0(e)){case 1:var s=u1;break;case 4:s=c1;break;default:s=Gp}n=s.bind(null,e,n,t),s=void 0,!wf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function dd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=Ti(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}a0(function(){var d=i,p=Hp(n),m=[];e:{var g=L0.get(t);if(g!==void 0){var S=Yp,I=t;switch(t){case"keypress":if(Zu(n)===0)break e;case"keydown":case"keyup":S=C1;break;case"focusin":I="focus",S=id;break;case"focusout":I="blur",S=id;break;case"beforeblur":case"afterblur":S=id;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Pg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=f1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=k1;break;case P0:case D0:case M0:S=g1;break;case O0:S=N1;break;case"scroll":S=h1;break;case"wheel":S=P1;break;case"copy":case"cut":case"paste":S=v1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Mg}var P=(e&4)!==0,L=!P&&t==="scroll",E=P?g!==null?g+"Capture":null:g;P=[];for(var _=d,C;_!==null;){C=_;var D=C.stateNode;if(C.tag===5&&D!==null&&(C=D,E!==null&&(D=ul(_,E),D!=null&&P.push(gl(_,D,C)))),L)break;_=_.return}0<P.length&&(g=new S(g,I,null,n,p),m.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",g&&n!==vf&&(I=n.relatedTarget||n.fromElement)&&(Ti(I)||I[qr]))break e;if((S||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,S?(I=n.relatedTarget||n.toElement,S=d,I=I?Ti(I):null,I!==null&&(L=Ki(I),I!==L||I.tag!==5&&I.tag!==6)&&(I=null)):(S=null,I=d),S!==I)){if(P=Pg,D="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(P=Mg,D="onPointerLeave",E="onPointerEnter",_="pointer"),L=S==null?g:yo(S),C=I==null?g:yo(I),g=new P(D,_+"leave",S,n,p),g.target=L,g.relatedTarget=C,D=null,Ti(p)===d&&(P=new P(E,_+"enter",I,n,p),P.target=C,P.relatedTarget=L,D=P),L=D,S&&I)t:{for(P=S,E=I,_=0,C=P;C;C=so(C))_++;for(C=0,D=E;D;D=so(D))C++;for(;0<_-C;)P=so(P),_--;for(;0<C-_;)E=so(E),C--;for(;_--;){if(P===E||E!==null&&P===E.alternate)break t;P=so(P),E=so(E)}P=null}else P=null;S!==null&&Wg(m,g,S,P,!1),I!==null&&L!==null&&Wg(m,L,I,P,!0)}}e:{if(g=d?yo(d):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var F=j1;else if(Vg(g))if(b0)F=z1;else{F=U1;var j=$1}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(F=B1);if(F&&(F=F(t,d))){A0(m,F,n,p);break e}j&&j(t,g,d),t==="focusout"&&(j=g._wrapperState)&&j.controlled&&g.type==="number"&&ff(g,"number",g.value)}switch(j=d?yo(d):window,t){case"focusin":(Vg(j)||j.contentEditable==="true")&&(mo=j,Cf=d,Ba=null);break;case"focusout":Ba=Cf=mo=null;break;case"mousedown":Af=!0;break;case"contextmenu":case"mouseup":case"dragend":Af=!1,Bg(m,n,p);break;case"selectionchange":if(K1)break;case"keydown":case"keyup":Bg(m,n,p)}var k;if(Jp)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else po?I0(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(S0&&n.locale!=="ko"&&(po||w!=="onCompositionStart"?w==="onCompositionEnd"&&po&&(k=T0()):(Ts=p,Qp="value"in Ts?Ts.value:Ts.textContent,po=!0)),j=Ac(d,w),0<j.length&&(w=new Dg(w,t,null,n,p),m.push({event:w,listeners:j}),k?w.data=k:(k=C0(n),k!==null&&(w.data=k)))),(k=M1?O1(t,n):L1(t,n))&&(d=Ac(d,"onBeforeInput"),0<d.length&&(p=new Dg("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:d}),p.data=k))}V0(m,e)})}function gl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ac(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ul(t,n),i!=null&&r.unshift(gl(t,i,s)),i=ul(t,e),i!=null&&r.push(gl(t,i,s))),t=t.return}return r}function so(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,s?(c=ul(n,i),c!=null&&o.unshift(gl(n,c,u))):s||(c=ul(n,i),c!=null&&o.push(gl(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Y1=/\r\n?/g,X1=/\u0000|\uFFFD/g;function Kg(t){return(typeof t=="string"?t:""+t).replace(Y1,`
`).replace(X1,"")}function Pu(t,e,n){if(e=Kg(e),Kg(t)!==e&&n)throw Error(z(425))}function bc(){}var bf=null,kf=null;function xf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nf=typeof setTimeout=="function"?setTimeout:void 0,J1=typeof clearTimeout=="function"?clearTimeout:void 0,qg=typeof Promise=="function"?Promise:void 0,Z1=typeof queueMicrotask=="function"?queueMicrotask:typeof qg<"u"?function(t){return qg.resolve(null).then(t).catch(eI)}:Nf;function eI(t){setTimeout(function(){throw t})}function fd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),dl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);dl(e)}function xs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zo=Math.random().toString(36).slice(2),lr="__reactFiber$"+Zo,yl="__reactProps$"+Zo,qr="__reactContainer$"+Zo,Rf="__reactEvents$"+Zo,tI="__reactListeners$"+Zo,nI="__reactHandles$"+Zo;function Ti(t){var e=t[lr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qr]||n[lr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gg(t);t!==null;){if(n=t[lr])return n;t=Gg(t)}return e}t=n,n=t.parentNode}return null}function Vl(t){return t=t[lr]||t[qr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function fh(t){return t[yl]||null}var Pf=[],vo=-1;function Gs(t){return{current:t}}function Ve(t){0>vo||(t.current=Pf[vo],Pf[vo]=null,vo--)}function Ne(t,e){vo++,Pf[vo]=t.current,t.current=e}var $s={},Mt=Gs($s),Jt=Gs(!1),Li=$s;function Vo(t,e){var n=t.type.contextTypes;if(!n)return $s;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Zt(t){return t=t.childContextTypes,t!=null}function kc(){Ve(Jt),Ve(Mt)}function Qg(t,e,n){if(Mt.current!==$s)throw Error(z(168));Ne(Mt,e),Ne(Jt,n)}function j0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,$S(t)||"Unknown",s));return Ke({},n,r)}function xc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$s,Li=Mt.current,Ne(Mt,t),Ne(Jt,Jt.current),!0}function Yg(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=j0(t,e,Li),r.__reactInternalMemoizedMergedChildContext=t,Ve(Jt),Ve(Mt),Ne(Mt,t)):Ve(Jt),Ne(Jt,n)}var Lr=null,ph=!1,pd=!1;function $0(t){Lr===null?Lr=[t]:Lr.push(t)}function rI(t){ph=!0,$0(t)}function Qs(){if(!pd&&Lr!==null){pd=!0;var t=0,e=Ce;try{var n=Lr;for(Ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Lr=null,ph=!1}catch(s){throw Lr!==null&&(Lr=Lr.slice(t+1)),h0(Wp,Qs),s}finally{Ce=e,pd=!1}}return null}var _o=[],wo=0,Nc=null,Rc=0,An=[],bn=0,Vi=null,Fr=1,jr="";function vi(t,e){_o[wo++]=Rc,_o[wo++]=Nc,Nc=t,Rc=e}function U0(t,e,n){An[bn++]=Fr,An[bn++]=jr,An[bn++]=Vi,Vi=t;var r=Fr;t=jr;var s=32-Gn(r)-1;r&=~(1<<s),n+=1;var i=32-Gn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fr=1<<32-Gn(e)+s|n<<s|r,jr=i+t}else Fr=1<<i|n<<s|r,jr=t}function em(t){t.return!==null&&(vi(t,1),U0(t,1,0))}function tm(t){for(;t===Nc;)Nc=_o[--wo],_o[wo]=null,Rc=_o[--wo],_o[wo]=null;for(;t===Vi;)Vi=An[--bn],An[bn]=null,jr=An[--bn],An[bn]=null,Fr=An[--bn],An[bn]=null}var fn=null,dn=null,$e=!1,Wn=null;function B0(t,e){var n=kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fn=t,dn=xs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fn=t,dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vi!==null?{id:Fr,overflow:jr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fn=t,dn=null,!0):!1;default:return!1}}function Df(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mf(t){if($e){var e=dn;if(e){var n=e;if(!Xg(t,e)){if(Df(t))throw Error(z(418));e=xs(n.nextSibling);var r=fn;e&&Xg(t,e)?B0(r,n):(t.flags=t.flags&-4097|2,$e=!1,fn=t)}}else{if(Df(t))throw Error(z(418));t.flags=t.flags&-4097|2,$e=!1,fn=t}}}function Jg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fn=t}function Du(t){if(t!==fn)return!1;if(!$e)return Jg(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xf(t.type,t.memoizedProps)),e&&(e=dn)){if(Df(t))throw z0(),Error(z(418));for(;e;)B0(t,e),e=xs(e.nextSibling)}if(Jg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dn=xs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dn=null}}else dn=fn?xs(t.stateNode.nextSibling):null;return!0}function z0(){for(var t=dn;t;)t=xs(t.nextSibling)}function Fo(){dn=fn=null,$e=!1}function nm(t){Wn===null?Wn=[t]:Wn.push(t)}var sI=Jr.ReactCurrentBatchConfig;function Ta(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Mu(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zg(t){var e=t._init;return e(t._payload)}function H0(t){function e(E,_){if(t){var C=E.deletions;C===null?(E.deletions=[_],E.flags|=16):C.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function s(E,_){return E=Ds(E,_),E.index=0,E.sibling=null,E}function i(E,_,C){return E.index=C,t?(C=E.alternate,C!==null?(C=C.index,C<_?(E.flags|=2,_):C):(E.flags|=2,_)):(E.flags|=1048576,_)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function u(E,_,C,D){return _===null||_.tag!==6?(_=Ed(C,E.mode,D),_.return=E,_):(_=s(_,C),_.return=E,_)}function c(E,_,C,D){var F=C.type;return F===fo?p(E,_,C.props.children,D,C.key):_!==null&&(_.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ys&&Zg(F)===_.type)?(D=s(_,C.props),D.ref=Ta(E,_,C),D.return=E,D):(D=oc(C.type,C.key,C.props,null,E.mode,D),D.ref=Ta(E,_,C),D.return=E,D)}function d(E,_,C,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==C.containerInfo||_.stateNode.implementation!==C.implementation?(_=Td(C,E.mode,D),_.return=E,_):(_=s(_,C.children||[]),_.return=E,_)}function p(E,_,C,D,F){return _===null||_.tag!==7?(_=Pi(C,E.mode,D,F),_.return=E,_):(_=s(_,C),_.return=E,_)}function m(E,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Ed(""+_,E.mode,C),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Su:return C=oc(_.type,_.key,_.props,null,E.mode,C),C.ref=Ta(E,null,_),C.return=E,C;case ho:return _=Td(_,E.mode,C),_.return=E,_;case ys:var D=_._init;return m(E,D(_._payload),C)}if(Ra(_)||ya(_))return _=Pi(_,E.mode,C,null),_.return=E,_;Mu(E,_)}return null}function g(E,_,C,D){var F=_!==null?_.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return F!==null?null:u(E,_,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Su:return C.key===F?c(E,_,C,D):null;case ho:return C.key===F?d(E,_,C,D):null;case ys:return F=C._init,g(E,_,F(C._payload),D)}if(Ra(C)||ya(C))return F!==null?null:p(E,_,C,D,null);Mu(E,C)}return null}function S(E,_,C,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return E=E.get(C)||null,u(_,E,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Su:return E=E.get(D.key===null?C:D.key)||null,c(_,E,D,F);case ho:return E=E.get(D.key===null?C:D.key)||null,d(_,E,D,F);case ys:var j=D._init;return S(E,_,C,j(D._payload),F)}if(Ra(D)||ya(D))return E=E.get(C)||null,p(_,E,D,F,null);Mu(_,D)}return null}function I(E,_,C,D){for(var F=null,j=null,k=_,w=_=0,A=null;k!==null&&w<C.length;w++){k.index>w?(A=k,k=null):A=k.sibling;var T=g(E,k,C[w],D);if(T===null){k===null&&(k=A);break}t&&k&&T.alternate===null&&e(E,k),_=i(T,_,w),j===null?F=T:j.sibling=T,j=T,k=A}if(w===C.length)return n(E,k),$e&&vi(E,w),F;if(k===null){for(;w<C.length;w++)k=m(E,C[w],D),k!==null&&(_=i(k,_,w),j===null?F=k:j.sibling=k,j=k);return $e&&vi(E,w),F}for(k=r(E,k);w<C.length;w++)A=S(k,E,w,C[w],D),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?w:A.key),_=i(A,_,w),j===null?F=A:j.sibling=A,j=A);return t&&k.forEach(function(x){return e(E,x)}),$e&&vi(E,w),F}function P(E,_,C,D){var F=ya(C);if(typeof F!="function")throw Error(z(150));if(C=F.call(C),C==null)throw Error(z(151));for(var j=F=null,k=_,w=_=0,A=null,T=C.next();k!==null&&!T.done;w++,T=C.next()){k.index>w?(A=k,k=null):A=k.sibling;var x=g(E,k,T.value,D);if(x===null){k===null&&(k=A);break}t&&k&&x.alternate===null&&e(E,k),_=i(x,_,w),j===null?F=x:j.sibling=x,j=x,k=A}if(T.done)return n(E,k),$e&&vi(E,w),F;if(k===null){for(;!T.done;w++,T=C.next())T=m(E,T.value,D),T!==null&&(_=i(T,_,w),j===null?F=T:j.sibling=T,j=T);return $e&&vi(E,w),F}for(k=r(E,k);!T.done;w++,T=C.next())T=S(k,E,w,T.value,D),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?w:T.key),_=i(T,_,w),j===null?F=T:j.sibling=T,j=T);return t&&k.forEach(function(R){return e(E,R)}),$e&&vi(E,w),F}function L(E,_,C,D){if(typeof C=="object"&&C!==null&&C.type===fo&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Su:e:{for(var F=C.key,j=_;j!==null;){if(j.key===F){if(F=C.type,F===fo){if(j.tag===7){n(E,j.sibling),_=s(j,C.props.children),_.return=E,E=_;break e}}else if(j.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ys&&Zg(F)===j.type){n(E,j.sibling),_=s(j,C.props),_.ref=Ta(E,j,C),_.return=E,E=_;break e}n(E,j);break}else e(E,j);j=j.sibling}C.type===fo?(_=Pi(C.props.children,E.mode,D,C.key),_.return=E,E=_):(D=oc(C.type,C.key,C.props,null,E.mode,D),D.ref=Ta(E,_,C),D.return=E,E=D)}return o(E);case ho:e:{for(j=C.key;_!==null;){if(_.key===j)if(_.tag===4&&_.stateNode.containerInfo===C.containerInfo&&_.stateNode.implementation===C.implementation){n(E,_.sibling),_=s(_,C.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=Td(C,E.mode,D),_.return=E,E=_}return o(E);case ys:return j=C._init,L(E,_,j(C._payload),D)}if(Ra(C))return I(E,_,C,D);if(ya(C))return P(E,_,C,D);Mu(E,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,_!==null&&_.tag===6?(n(E,_.sibling),_=s(_,C),_.return=E,E=_):(n(E,_),_=Ed(C,E.mode,D),_.return=E,E=_),o(E)):n(E,_)}return L}var jo=H0(!0),W0=H0(!1),Pc=Gs(null),Dc=null,Eo=null,rm=null;function sm(){rm=Eo=Dc=null}function im(t){var e=Pc.current;Ve(Pc),t._currentValue=e}function Of(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xo(t,e){Dc=t,rm=Eo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xt=!0),t.firstContext=null)}function Nn(t){var e=t._currentValue;if(rm!==t)if(t={context:t,memoizedValue:e,next:null},Eo===null){if(Dc===null)throw Error(z(308));Eo=t,Dc.dependencies={lanes:0,firstContext:t}}else Eo=Eo.next=t;return e}var Si=null;function om(t){Si===null?Si=[t]:Si.push(t)}function K0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,om(e)):(n.next=s.next,s.next=n),e.interleaved=n,Gr(t,r)}function Gr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vs=!1;function am(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function q0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $r(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ns(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Gr(t,n)}return s=r.interleaved,s===null?(e.next=e,om(r)):(e.next=s.next,s.next=e),r.interleaved=e,Gr(t,n)}function ec(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kp(t,n)}}function ey(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Mc(t,e,n,r){var s=t.updateQueue;vs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==o&&(u===null?p.firstBaseUpdate=d:u.next=d,p.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,p=d=c=null,u=i;do{var g=u.lane,S=u.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var I=t,P=u;switch(g=e,S=n,P.tag){case 1:if(I=P.payload,typeof I=="function"){m=I.call(S,m,g);break e}m=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=P.payload,g=typeof I=="function"?I.call(S,m,g):I,g==null)break e;m=Ke({},m,g);break e;case 2:vs=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[u]:g.push(u))}else S={eventTime:S,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(d=p=S,c=m):p=p.next=S,o|=g;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;g=u,u=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(c=m),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ji|=o,t.lanes=o,t.memoizedState=m}}function ty(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Fl={},dr=Gs(Fl),vl=Gs(Fl),_l=Gs(Fl);function Ii(t){if(t===Fl)throw Error(z(174));return t}function lm(t,e){switch(Ne(_l,e),Ne(vl,t),Ne(dr,Fl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mf(e,t)}Ve(dr),Ne(dr,e)}function $o(){Ve(dr),Ve(vl),Ve(_l)}function G0(t){Ii(_l.current);var e=Ii(dr.current),n=mf(e,t.type);e!==n&&(Ne(vl,t),Ne(dr,n))}function um(t){vl.current===t&&(Ve(dr),Ve(vl))}var Be=Gs(0);function Oc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var md=[];function cm(){for(var t=0;t<md.length;t++)md[t]._workInProgressVersionPrimary=null;md.length=0}var tc=Jr.ReactCurrentDispatcher,gd=Jr.ReactCurrentBatchConfig,Fi=0,He=null,st=null,ct=null,Lc=!1,za=!1,wl=0,iI=0;function At(){throw Error(z(321))}function hm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yn(t[n],e[n]))return!1;return!0}function dm(t,e,n,r,s,i){if(Fi=i,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tc.current=t===null||t.memoizedState===null?uI:cI,t=n(r,s),za){i=0;do{if(za=!1,wl=0,25<=i)throw Error(z(301));i+=1,ct=st=null,e.updateQueue=null,tc.current=hI,t=n(r,s)}while(za)}if(tc.current=Vc,e=st!==null&&st.next!==null,Fi=0,ct=st=He=null,Lc=!1,e)throw Error(z(300));return t}function fm(){var t=wl!==0;return wl=0,t}function ir(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?He.memoizedState=ct=t:ct=ct.next=t,ct}function Rn(){if(st===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var e=ct===null?He.memoizedState:ct.next;if(e!==null)ct=e,st=t;else{if(t===null)throw Error(z(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ct===null?He.memoizedState=ct=t:ct=ct.next=t}return ct}function El(t,e){return typeof e=="function"?e(t):e}function yd(t){var e=Rn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=st,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,d=i;do{var p=d.lane;if((Fi&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=m,o=r):c=c.next=m,He.lanes|=p,ji|=p}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=u,Yn(r,e.memoizedState)||(Xt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,He.lanes|=i,ji|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vd(t){var e=Rn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Yn(i,e.memoizedState)||(Xt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Q0(){}function Y0(t,e){var n=He,r=Rn(),s=e(),i=!Yn(r.memoizedState,s);if(i&&(r.memoizedState=s,Xt=!0),r=r.queue,pm(Z0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,Tl(9,J0.bind(null,n,r,s,e),void 0,null),ht===null)throw Error(z(349));Fi&30||X0(n,e,s)}return s}function X0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function J0(t,e,n,r){e.value=n,e.getSnapshot=r,ew(e)&&tw(t)}function Z0(t,e,n){return n(function(){ew(e)&&tw(t)})}function ew(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yn(t,n)}catch{return!0}}function tw(t){var e=Gr(t,1);e!==null&&Qn(e,t,1,-1)}function ny(t){var e=ir();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:t},e.queue=t,t=t.dispatch=lI.bind(null,He,t),[e.memoizedState,t]}function Tl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function nw(){return Rn().memoizedState}function nc(t,e,n,r){var s=ir();He.flags|=t,s.memoizedState=Tl(1|e,n,void 0,r===void 0?null:r)}function mh(t,e,n,r){var s=Rn();r=r===void 0?null:r;var i=void 0;if(st!==null){var o=st.memoizedState;if(i=o.destroy,r!==null&&hm(r,o.deps)){s.memoizedState=Tl(e,n,i,r);return}}He.flags|=t,s.memoizedState=Tl(1|e,n,i,r)}function ry(t,e){return nc(8390656,8,t,e)}function pm(t,e){return mh(2048,8,t,e)}function rw(t,e){return mh(4,2,t,e)}function sw(t,e){return mh(4,4,t,e)}function iw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ow(t,e,n){return n=n!=null?n.concat([t]):null,mh(4,4,iw.bind(null,e,t),n)}function mm(){}function aw(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lw(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function uw(t,e,n){return Fi&21?(Yn(n,e)||(n=p0(),He.lanes|=n,ji|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=n)}function oI(t,e){var n=Ce;Ce=n!==0&&4>n?n:4,t(!0);var r=gd.transition;gd.transition={};try{t(!1),e()}finally{Ce=n,gd.transition=r}}function cw(){return Rn().memoizedState}function aI(t,e,n){var r=Ps(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hw(t))dw(e,n);else if(n=K0(t,e,n,r),n!==null){var s=$t();Qn(n,t,r,s),fw(n,e,r)}}function lI(t,e,n){var r=Ps(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hw(t))dw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,Yn(u,o)){var c=e.interleaved;c===null?(s.next=s,om(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=K0(t,e,s,r),n!==null&&(s=$t(),Qn(n,t,r,s),fw(n,e,r))}}function hw(t){var e=t.alternate;return t===He||e!==null&&e===He}function dw(t,e){za=Lc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kp(t,n)}}var Vc={readContext:Nn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},uI={readContext:Nn,useCallback:function(t,e){return ir().memoizedState=[t,e===void 0?null:e],t},useContext:Nn,useEffect:ry,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nc(4194308,4,iw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nc(4194308,4,t,e)},useInsertionEffect:function(t,e){return nc(4,2,t,e)},useMemo:function(t,e){var n=ir();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ir();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=aI.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=ir();return t={current:t},e.memoizedState=t},useState:ny,useDebugValue:mm,useDeferredValue:function(t){return ir().memoizedState=t},useTransition:function(){var t=ny(!1),e=t[0];return t=oI.bind(null,t[1]),ir().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,s=ir();if($e){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),ht===null)throw Error(z(349));Fi&30||X0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ry(Z0.bind(null,r,i,t),[t]),r.flags|=2048,Tl(9,J0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ir(),e=ht.identifierPrefix;if($e){var n=jr,r=Fr;n=(r&~(1<<32-Gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=wl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cI={readContext:Nn,useCallback:aw,useContext:Nn,useEffect:pm,useImperativeHandle:ow,useInsertionEffect:rw,useLayoutEffect:sw,useMemo:lw,useReducer:yd,useRef:nw,useState:function(){return yd(El)},useDebugValue:mm,useDeferredValue:function(t){var e=Rn();return uw(e,st.memoizedState,t)},useTransition:function(){var t=yd(El)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:Q0,useSyncExternalStore:Y0,useId:cw,unstable_isNewReconciler:!1},hI={readContext:Nn,useCallback:aw,useContext:Nn,useEffect:pm,useImperativeHandle:ow,useInsertionEffect:rw,useLayoutEffect:sw,useMemo:lw,useReducer:vd,useRef:nw,useState:function(){return vd(El)},useDebugValue:mm,useDeferredValue:function(t){var e=Rn();return st===null?e.memoizedState=t:uw(e,st.memoizedState,t)},useTransition:function(){var t=vd(El)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:Q0,useSyncExternalStore:Y0,useId:cw,unstable_isNewReconciler:!1};function zn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Lf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gh={isMounted:function(t){return(t=t._reactInternals)?Ki(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$t(),s=Ps(t),i=$r(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ns(t,i,s),e!==null&&(Qn(e,t,s,r),ec(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$t(),s=Ps(t),i=$r(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ns(t,i,s),e!==null&&(Qn(e,t,s,r),ec(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),r=Ps(t),s=$r(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ns(t,s,r),e!==null&&(Qn(e,t,r,n),ec(e,t,r))}};function sy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!pl(n,r)||!pl(s,i):!0}function pw(t,e,n){var r=!1,s=$s,i=e.contextType;return typeof i=="object"&&i!==null?i=Nn(i):(s=Zt(e)?Li:Mt.current,r=e.contextTypes,i=(r=r!=null)?Vo(t,s):$s),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function iy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gh.enqueueReplaceState(e,e.state,null)}function Vf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},am(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Nn(i):(i=Zt(e)?Li:Mt.current,s.context=Vo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Lf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&gh.enqueueReplaceState(s,s.state,null),Mc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Uo(t,e){try{var n="",r=e;do n+=jS(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function _d(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ff(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dI=typeof WeakMap=="function"?WeakMap:Map;function mw(t,e,n){n=$r(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jc||(jc=!0,Gf=r),Ff(t,e)},n}function gw(t,e,n){n=$r(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ff(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ff(t,e),typeof r!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function oy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new dI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=AI.bind(null,t,e,n),e.then(t,t))}function ay(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ly(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$r(-1,1),e.tag=2,Ns(n,e,1))),n.lanes|=1),t)}var fI=Jr.ReactCurrentOwner,Xt=!1;function jt(t,e,n,r){e.child=t===null?W0(e,null,n,r):jo(e,t.child,n,r)}function uy(t,e,n,r,s){n=n.render;var i=e.ref;return xo(e,s),r=dm(t,e,n,r,i,s),n=fm(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qr(t,e,s)):($e&&n&&em(e),e.flags|=1,jt(t,e,r,s),e.child)}function cy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Sm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,yw(t,e,i,r,s)):(t=oc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:pl,n(o,r)&&t.ref===e.ref)return Qr(t,e,s)}return e.flags|=1,t=Ds(i,r),t.ref=e.ref,t.return=e,e.child=t}function yw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(pl(i,r)&&t.ref===e.ref)if(Xt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Xt=!0);else return e.lanes=t.lanes,Qr(t,e,s)}return jf(t,e,n,r,s)}function vw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(So,cn),cn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(So,cn),cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ne(So,cn),cn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ne(So,cn),cn|=r;return jt(t,e,s,n),e.child}function _w(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jf(t,e,n,r,s){var i=Zt(n)?Li:Mt.current;return i=Vo(e,i),xo(e,s),n=dm(t,e,n,r,i,s),r=fm(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qr(t,e,s)):($e&&r&&em(e),e.flags|=1,jt(t,e,n,s),e.child)}function hy(t,e,n,r,s){if(Zt(n)){var i=!0;xc(e)}else i=!1;if(xo(e,s),e.stateNode===null)rc(t,e),pw(e,n,r),Vf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Nn(d):(d=Zt(n)?Li:Mt.current,d=Vo(e,d));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==d)&&iy(e,o,r,d),vs=!1;var g=e.memoizedState;o.state=g,Mc(e,r,o,s),c=e.memoizedState,u!==r||g!==c||Jt.current||vs?(typeof p=="function"&&(Lf(e,n,p,r),c=e.memoizedState),(u=vs||sy(e,n,u,r,g,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,q0(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:zn(e.type,u),o.props=d,m=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Nn(c):(c=Zt(n)?Li:Mt.current,c=Vo(e,c));var S=n.getDerivedStateFromProps;(p=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==m||g!==c)&&iy(e,o,r,c),vs=!1,g=e.memoizedState,o.state=g,Mc(e,r,o,s);var I=e.memoizedState;u!==m||g!==I||Jt.current||vs?(typeof S=="function"&&(Lf(e,n,S,r),I=e.memoizedState),(d=vs||sy(e,n,d,r,g,I,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return $f(t,e,n,r,i,s)}function $f(t,e,n,r,s,i){_w(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Yg(e,n,!1),Qr(t,e,i);r=e.stateNode,fI.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=jo(e,t.child,null,i),e.child=jo(e,null,u,i)):jt(t,e,u,i),e.memoizedState=r.state,s&&Yg(e,n,!0),e.child}function ww(t){var e=t.stateNode;e.pendingContext?Qg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qg(t,e.context,!1),lm(t,e.containerInfo)}function dy(t,e,n,r,s){return Fo(),nm(s),e.flags|=256,jt(t,e,n,r),e.child}var Uf={dehydrated:null,treeContext:null,retryLane:0};function Bf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ew(t,e,n){var r=e.pendingProps,s=Be.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ne(Be,s&1),t===null)return Mf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=_h(o,r,0,null),t=Pi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Bf(n),e.memoizedState=Uf,t):gm(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return pI(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ds(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=Ds(u,i):(i=Pi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Bf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Uf,r}return i=t.child,t=i.sibling,r=Ds(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function gm(t,e){return e=_h({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ou(t,e,n,r){return r!==null&&nm(r),jo(e,t.child,null,n),t=gm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=_d(Error(z(422))),Ou(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=_h({mode:"visible",children:r.children},s,0,null),i=Pi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&jo(e,t.child,null,o),e.child.memoizedState=Bf(o),e.memoizedState=Uf,i);if(!(e.mode&1))return Ou(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(z(419)),r=_d(i,r,void 0),Ou(t,e,o,r)}if(u=(o&t.childLanes)!==0,Xt||u){if(r=ht,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Gr(t,s),Qn(r,t,s,-1))}return Tm(),r=_d(Error(z(421))),Ou(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=bI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,dn=xs(s.nextSibling),fn=e,$e=!0,Wn=null,t!==null&&(An[bn++]=Fr,An[bn++]=jr,An[bn++]=Vi,Fr=t.id,jr=t.overflow,Vi=e),e=gm(e,r.children),e.flags|=4096,e)}function fy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Of(t.return,e,n)}function wd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Tw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(jt(t,e,r.children,n),r=Be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fy(t,n,e);else if(t.tag===19)fy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(Be,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Oc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),wd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Oc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}wd(e,!0,n,null,i);break;case"together":wd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ji|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Ds(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ds(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mI(t,e,n){switch(e.tag){case 3:ww(e),Fo();break;case 5:G0(e);break;case 1:Zt(e.type)&&xc(e);break;case 4:lm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ne(Pc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Be,Be.current&1),e.flags|=128,null):n&e.child.childLanes?Ew(t,e,n):(Ne(Be,Be.current&1),t=Qr(t,e,n),t!==null?t.sibling:null);Ne(Be,Be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Tw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ne(Be,Be.current),r)break;return null;case 22:case 23:return e.lanes=0,vw(t,e,n)}return Qr(t,e,n)}var Sw,zf,Iw,Cw;Sw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zf=function(){};Iw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ii(dr.current);var i=null;switch(n){case"input":s=hf(t,s),r=hf(t,r),i=[];break;case"select":s=Ke({},s,{value:void 0}),r=Ke({},r,{value:void 0}),i=[];break;case"textarea":s=pf(t,s),r=pf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bc)}gf(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(al.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(u=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(al.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Le("scroll",t),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Cw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Sa(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gI(t,e,n){var r=e.pendingProps;switch(tm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(e),null;case 1:return Zt(e.type)&&kc(),bt(e),null;case 3:return r=e.stateNode,$o(),Ve(Jt),Ve(Mt),cm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Du(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wn!==null&&(Xf(Wn),Wn=null))),zf(t,e),bt(e),null;case 5:um(e);var s=Ii(_l.current);if(n=e.type,t!==null&&e.stateNode!=null)Iw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return bt(e),null}if(t=Ii(dr.current),Du(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[lr]=e,r[yl]=i,t=(e.mode&1)!==0,n){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(s=0;s<Da.length;s++)Le(Da[s],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Tg(r,i),Le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Le("invalid",r);break;case"textarea":Ig(r,i),Le("invalid",r)}gf(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&Pu(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Pu(r.textContent,u,t),s=["children",""+u]):al.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Le("scroll",r)}switch(n){case"input":Iu(r),Sg(r,i,!0);break;case"textarea":Iu(r),Cg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Z_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[lr]=e,t[yl]=r,Sw(t,e,!1,!1),e.stateNode=t;e:{switch(o=yf(n,r),n){case"dialog":Le("cancel",t),Le("close",t),s=r;break;case"iframe":case"object":case"embed":Le("load",t),s=r;break;case"video":case"audio":for(s=0;s<Da.length;s++)Le(Da[s],t);s=r;break;case"source":Le("error",t),s=r;break;case"img":case"image":case"link":Le("error",t),Le("load",t),s=r;break;case"details":Le("toggle",t),s=r;break;case"input":Tg(t,r),s=hf(t,r),Le("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ke({},r,{value:void 0}),Le("invalid",t);break;case"textarea":Ig(t,r),s=pf(t,r),Le("invalid",t);break;default:s=r}gf(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?n0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&e0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ll(t,c):typeof c=="number"&&ll(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(al.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Le("scroll",t):c!=null&&$p(t,i,c,o))}switch(n){case"input":Iu(t),Sg(t,r,!1);break;case"textarea":Iu(t),Cg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+js(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Co(t,!!r.multiple,i,!1):r.defaultValue!=null&&Co(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=bc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bt(e),null;case 6:if(t&&e.stateNode!=null)Cw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Ii(_l.current),Ii(dr.current),Du(e)){if(r=e.stateNode,n=e.memoizedProps,r[lr]=e,(i=r.nodeValue!==n)&&(t=fn,t!==null))switch(t.tag){case 3:Pu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lr]=e,e.stateNode=r}return bt(e),null;case 13:if(Ve(Be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&dn!==null&&e.mode&1&&!(e.flags&128))z0(),Fo(),e.flags|=98560,i=!1;else if(i=Du(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[lr]=e}else Fo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bt(e),i=!1}else Wn!==null&&(Xf(Wn),Wn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Be.current&1?ot===0&&(ot=3):Tm())),e.updateQueue!==null&&(e.flags|=4),bt(e),null);case 4:return $o(),zf(t,e),t===null&&ml(e.stateNode.containerInfo),bt(e),null;case 10:return im(e.type._context),bt(e),null;case 17:return Zt(e.type)&&kc(),bt(e),null;case 19:if(Ve(Be),i=e.memoizedState,i===null)return bt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Sa(i,!1);else{if(ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Oc(t),o!==null){for(e.flags|=128,Sa(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(Be,Be.current&1|2),e.child}t=t.sibling}i.tail!==null&&Xe()>Bo&&(e.flags|=128,r=!0,Sa(i,!1),e.lanes=4194304)}else{if(!r)if(t=Oc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Sa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!$e)return bt(e),null}else 2*Xe()-i.renderingStartTime>Bo&&n!==1073741824&&(e.flags|=128,r=!0,Sa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Xe(),e.sibling=null,n=Be.current,Ne(Be,r?n&1|2:n&1),e):(bt(e),null);case 22:case 23:return Em(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?cn&1073741824&&(bt(e),e.subtreeFlags&6&&(e.flags|=8192)):bt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function yI(t,e){switch(tm(e),e.tag){case 1:return Zt(e.type)&&kc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $o(),Ve(Jt),Ve(Mt),cm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return um(e),null;case 13:if(Ve(Be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Fo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(Be),null;case 4:return $o(),null;case 10:return im(e.type._context),null;case 22:case 23:return Em(),null;case 24:return null;default:return null}}var Lu=!1,Nt=!1,vI=typeof WeakSet=="function"?WeakSet:Set,Y=null;function To(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(t,e,r)}else n.current=null}function Hf(t,e,n){try{n()}catch(r){Qe(t,e,r)}}var py=!1;function _I(t,e){if(bf=Ic,t=N0(),Zp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,d=0,p=0,m=t,g=null;t:for(;;){for(var S;m!==n||s!==0&&m.nodeType!==3||(u=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(S=m.firstChild)!==null;)g=m,m=S;for(;;){if(m===t)break t;if(g===n&&++d===s&&(u=o),g===i&&++p===r&&(c=o),(S=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=S}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(kf={focusedElem:t,selectionRange:n},Ic=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var P=I.memoizedProps,L=I.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?P:zn(e.type,P),L);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(D){Qe(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return I=py,py=!1,I}function Ha(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Hf(e,n,i)}s=s.next}while(s!==r)}}function yh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Aw(t){var e=t.alternate;e!==null&&(t.alternate=null,Aw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[lr],delete e[yl],delete e[Rf],delete e[tI],delete e[nI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bw(t){return t.tag===5||t.tag===3||t.tag===4}function my(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bc));else if(r!==4&&(t=t.child,t!==null))for(Kf(t,e,n),t=t.sibling;t!==null;)Kf(t,e,n),t=t.sibling}function qf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(qf(t,e,n),t=t.sibling;t!==null;)qf(t,e,n),t=t.sibling}var mt=null,Hn=!1;function ms(t,e,n){for(n=n.child;n!==null;)kw(t,e,n),n=n.sibling}function kw(t,e,n){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(uh,n)}catch{}switch(n.tag){case 5:Nt||To(n,e);case 6:var r=mt,s=Hn;mt=null,ms(t,e,n),mt=r,Hn=s,mt!==null&&(Hn?(t=mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&(Hn?(t=mt,n=n.stateNode,t.nodeType===8?fd(t.parentNode,n):t.nodeType===1&&fd(t,n),dl(t)):fd(mt,n.stateNode));break;case 4:r=mt,s=Hn,mt=n.stateNode.containerInfo,Hn=!0,ms(t,e,n),mt=r,Hn=s;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hf(n,e,o),s=s.next}while(s!==r)}ms(t,e,n);break;case 1:if(!Nt&&(To(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Qe(n,e,u)}ms(t,e,n);break;case 21:ms(t,e,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,ms(t,e,n),Nt=r):ms(t,e,n);break;default:ms(t,e,n)}}function gy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vI),e.forEach(function(r){var s=kI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Bn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:mt=u.stateNode,Hn=!1;break e;case 3:mt=u.stateNode.containerInfo,Hn=!0;break e;case 4:mt=u.stateNode.containerInfo,Hn=!0;break e}u=u.return}if(mt===null)throw Error(z(160));kw(i,o,s),mt=null,Hn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Qe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)xw(e,t),e=e.sibling}function xw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bn(e,t),rr(t),r&4){try{Ha(3,t,t.return),yh(3,t)}catch(P){Qe(t,t.return,P)}try{Ha(5,t,t.return)}catch(P){Qe(t,t.return,P)}}break;case 1:Bn(e,t),rr(t),r&512&&n!==null&&To(n,n.return);break;case 5:if(Bn(e,t),rr(t),r&512&&n!==null&&To(n,n.return),t.flags&32){var s=t.stateNode;try{ll(s,"")}catch(P){Qe(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&X_(s,i),yf(u,o);var d=yf(u,i);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?n0(s,m):p==="dangerouslySetInnerHTML"?e0(s,m):p==="children"?ll(s,m):$p(s,p,m,d)}switch(u){case"input":df(s,i);break;case"textarea":J_(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?Co(s,!!i.multiple,S,!1):g!==!!i.multiple&&(i.defaultValue!=null?Co(s,!!i.multiple,i.defaultValue,!0):Co(s,!!i.multiple,i.multiple?[]:"",!1))}s[yl]=i}catch(P){Qe(t,t.return,P)}}break;case 6:if(Bn(e,t),rr(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){Qe(t,t.return,P)}}break;case 3:if(Bn(e,t),rr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{dl(e.containerInfo)}catch(P){Qe(t,t.return,P)}break;case 4:Bn(e,t),rr(t);break;case 13:Bn(e,t),rr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(_m=Xe())),r&4&&gy(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Nt=(d=Nt)||p,Bn(e,t),Nt=d):Bn(e,t),rr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(Y=t,p=t.child;p!==null;){for(m=Y=p;Y!==null;){switch(g=Y,S=g.child,g.tag){case 0:case 11:case 14:case 15:Ha(4,g,g.return);break;case 1:To(g,g.return);var I=g.stateNode;if(typeof I.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(P){Qe(r,n,P)}}break;case 5:To(g,g.return);break;case 22:if(g.memoizedState!==null){vy(m);continue}}S!==null?(S.return=g,Y=S):vy(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=t0("display",o))}catch(P){Qe(t,t.return,P)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(P){Qe(t,t.return,P)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Bn(e,t),rr(t),r&4&&gy(t);break;case 21:break;default:Bn(e,t),rr(t)}}function rr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(bw(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ll(s,""),r.flags&=-33);var i=my(t);qf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=my(t);Kf(t,u,o);break;default:throw Error(z(161))}}catch(c){Qe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wI(t,e,n){Y=t,Nw(t)}function Nw(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Lu;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||Nt;u=Lu;var d=Nt;if(Lu=o,(Nt=c)&&!d)for(Y=s;Y!==null;)o=Y,c=o.child,o.tag===22&&o.memoizedState!==null?_y(s):c!==null?(c.return=o,Y=c):_y(s);for(;i!==null;)Y=i,Nw(i),i=i.sibling;Y=s,Lu=u,Nt=d}yy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):yy(t)}}function yy(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||yh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:zn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ty(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ty(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&dl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Nt||e.flags&512&&Wf(e)}catch(g){Qe(e,e.return,g)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function vy(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function _y(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yh(4,e)}catch(c){Qe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Qe(e,s,c)}}var i=e.return;try{Wf(e)}catch(c){Qe(e,i,c)}break;case 5:var o=e.return;try{Wf(e)}catch(c){Qe(e,o,c)}}}catch(c){Qe(e,e.return,c)}if(e===t){Y=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Y=u;break}Y=e.return}}var EI=Math.ceil,Fc=Jr.ReactCurrentDispatcher,ym=Jr.ReactCurrentOwner,xn=Jr.ReactCurrentBatchConfig,we=0,ht=null,tt=null,_t=0,cn=0,So=Gs(0),ot=0,Sl=null,ji=0,vh=0,vm=0,Wa=null,Yt=null,_m=0,Bo=1/0,Dr=null,jc=!1,Gf=null,Rs=null,Vu=!1,Ss=null,$c=0,Ka=0,Qf=null,sc=-1,ic=0;function $t(){return we&6?Xe():sc!==-1?sc:sc=Xe()}function Ps(t){return t.mode&1?we&2&&_t!==0?_t&-_t:sI.transition!==null?(ic===0&&(ic=p0()),ic):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:E0(t.type)),t):1}function Qn(t,e,n,r){if(50<Ka)throw Ka=0,Qf=null,Error(z(185));Ol(t,n,r),(!(we&2)||t!==ht)&&(t===ht&&(!(we&2)&&(vh|=n),ot===4&&ws(t,_t)),en(t,r),n===1&&we===0&&!(e.mode&1)&&(Bo=Xe()+500,ph&&Qs()))}function en(t,e){var n=t.callbackNode;s1(t,e);var r=Sc(t,t===ht?_t:0);if(r===0)n!==null&&kg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kg(n),e===1)t.tag===0?rI(wy.bind(null,t)):$0(wy.bind(null,t)),Z1(function(){!(we&6)&&Qs()}),n=null;else{switch(m0(r)){case 1:n=Wp;break;case 4:n=d0;break;case 16:n=Tc;break;case 536870912:n=f0;break;default:n=Tc}n=Fw(n,Rw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Rw(t,e){if(sc=-1,ic=0,we&6)throw Error(z(327));var n=t.callbackNode;if(No()&&t.callbackNode!==n)return null;var r=Sc(t,t===ht?_t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Uc(t,r);else{e=r;var s=we;we|=2;var i=Dw();(ht!==t||_t!==e)&&(Dr=null,Bo=Xe()+500,Ri(t,e));do try{II();break}catch(u){Pw(t,u)}while(!0);sm(),Fc.current=i,we=s,tt!==null?e=0:(ht=null,_t=0,e=ot)}if(e!==0){if(e===2&&(s=Tf(t),s!==0&&(r=s,e=Yf(t,s))),e===1)throw n=Sl,Ri(t,0),ws(t,r),en(t,Xe()),n;if(e===6)ws(t,r);else{if(s=t.current.alternate,!(r&30)&&!TI(s)&&(e=Uc(t,r),e===2&&(i=Tf(t),i!==0&&(r=i,e=Yf(t,i))),e===1))throw n=Sl,Ri(t,0),ws(t,r),en(t,Xe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:_i(t,Yt,Dr);break;case 3:if(ws(t,r),(r&130023424)===r&&(e=_m+500-Xe(),10<e)){if(Sc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){$t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Nf(_i.bind(null,t,Yt,Dr),e);break}_i(t,Yt,Dr);break;case 4:if(ws(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Gn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EI(r/1960))-r,10<r){t.timeoutHandle=Nf(_i.bind(null,t,Yt,Dr),r);break}_i(t,Yt,Dr);break;case 5:_i(t,Yt,Dr);break;default:throw Error(z(329))}}}return en(t,Xe()),t.callbackNode===n?Rw.bind(null,t):null}function Yf(t,e){var n=Wa;return t.current.memoizedState.isDehydrated&&(Ri(t,e).flags|=256),t=Uc(t,e),t!==2&&(e=Yt,Yt=n,e!==null&&Xf(e)),t}function Xf(t){Yt===null?Yt=t:Yt.push.apply(Yt,t)}function TI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Yn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ws(t,e){for(e&=~vm,e&=~vh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gn(e),r=1<<n;t[n]=-1,e&=~r}}function wy(t){if(we&6)throw Error(z(327));No();var e=Sc(t,0);if(!(e&1))return en(t,Xe()),null;var n=Uc(t,e);if(t.tag!==0&&n===2){var r=Tf(t);r!==0&&(e=r,n=Yf(t,r))}if(n===1)throw n=Sl,Ri(t,0),ws(t,e),en(t,Xe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_i(t,Yt,Dr),en(t,Xe()),null}function wm(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(Bo=Xe()+500,ph&&Qs())}}function $i(t){Ss!==null&&Ss.tag===0&&!(we&6)&&No();var e=we;we|=1;var n=xn.transition,r=Ce;try{if(xn.transition=null,Ce=1,t)return t()}finally{Ce=r,xn.transition=n,we=e,!(we&6)&&Qs()}}function Em(){cn=So.current,Ve(So)}function Ri(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,J1(n)),tt!==null)for(n=tt.return;n!==null;){var r=n;switch(tm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kc();break;case 3:$o(),Ve(Jt),Ve(Mt),cm();break;case 5:um(r);break;case 4:$o();break;case 13:Ve(Be);break;case 19:Ve(Be);break;case 10:im(r.type._context);break;case 22:case 23:Em()}n=n.return}if(ht=t,tt=t=Ds(t.current,null),_t=cn=e,ot=0,Sl=null,vm=vh=ji=0,Yt=Wa=null,Si!==null){for(e=0;e<Si.length;e++)if(n=Si[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Si=null}return t}function Pw(t,e){do{var n=tt;try{if(sm(),tc.current=Vc,Lc){for(var r=He.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Lc=!1}if(Fi=0,ct=st=He=null,za=!1,wl=0,ym.current=null,n===null||n.return===null){ot=1,Sl=e,tt=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=_t,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=u,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var S=ay(o);if(S!==null){S.flags&=-257,ly(S,o,u,i,e),S.mode&1&&oy(i,d,e),e=S,c=d;var I=e.updateQueue;if(I===null){var P=new Set;P.add(c),e.updateQueue=P}else I.add(c);break e}else{if(!(e&1)){oy(i,d,e),Tm();break e}c=Error(z(426))}}else if($e&&u.mode&1){var L=ay(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),ly(L,o,u,i,e),nm(Uo(c,u));break e}}i=c=Uo(c,u),ot!==4&&(ot=2),Wa===null?Wa=[i]:Wa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=mw(i,c,e);ey(i,E);break e;case 1:u=c;var _=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Rs===null||!Rs.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=gw(i,u,e);ey(i,D);break e}}i=i.return}while(i!==null)}Ow(n)}catch(F){e=F,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(!0)}function Dw(){var t=Fc.current;return Fc.current=Vc,t===null?Vc:t}function Tm(){(ot===0||ot===3||ot===2)&&(ot=4),ht===null||!(ji&268435455)&&!(vh&268435455)||ws(ht,_t)}function Uc(t,e){var n=we;we|=2;var r=Dw();(ht!==t||_t!==e)&&(Dr=null,Ri(t,e));do try{SI();break}catch(s){Pw(t,s)}while(!0);if(sm(),we=n,Fc.current=r,tt!==null)throw Error(z(261));return ht=null,_t=0,ot}function SI(){for(;tt!==null;)Mw(tt)}function II(){for(;tt!==null&&!QS();)Mw(tt)}function Mw(t){var e=Vw(t.alternate,t,cn);t.memoizedProps=t.pendingProps,e===null?Ow(t):tt=e,ym.current=null}function Ow(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yI(n,e),n!==null){n.flags&=32767,tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ot=6,tt=null;return}}else if(n=gI(n,e,cn),n!==null){tt=n;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=t}while(e!==null);ot===0&&(ot=5)}function _i(t,e,n){var r=Ce,s=xn.transition;try{xn.transition=null,Ce=1,CI(t,e,n,r)}finally{xn.transition=s,Ce=r}return null}function CI(t,e,n,r){do No();while(Ss!==null);if(we&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(i1(t,i),t===ht&&(tt=ht=null,_t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vu||(Vu=!0,Fw(Tc,function(){return No(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=xn.transition,xn.transition=null;var o=Ce;Ce=1;var u=we;we|=4,ym.current=null,_I(t,n),xw(n,t),W1(kf),Ic=!!bf,kf=bf=null,t.current=n,wI(n),YS(),we=u,Ce=o,xn.transition=i}else t.current=n;if(Vu&&(Vu=!1,Ss=t,$c=s),i=t.pendingLanes,i===0&&(Rs=null),ZS(n.stateNode),en(t,Xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(jc)throw jc=!1,t=Gf,Gf=null,t;return $c&1&&t.tag!==0&&No(),i=t.pendingLanes,i&1?t===Qf?Ka++:(Ka=0,Qf=t):Ka=0,Qs(),null}function No(){if(Ss!==null){var t=m0($c),e=xn.transition,n=Ce;try{if(xn.transition=null,Ce=16>t?16:t,Ss===null)var r=!1;else{if(t=Ss,Ss=null,$c=0,we&6)throw Error(z(331));var s=we;for(we|=4,Y=t.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(Y=d;Y!==null;){var p=Y;switch(p.tag){case 0:case 11:case 15:Ha(8,p,i)}var m=p.child;if(m!==null)m.return=p,Y=m;else for(;Y!==null;){p=Y;var g=p.sibling,S=p.return;if(Aw(p),p===d){Y=null;break}if(g!==null){g.return=S,Y=g;break}Y=S}}}var I=i.alternate;if(I!==null){var P=I.child;if(P!==null){I.child=null;do{var L=P.sibling;P.sibling=null,P=L}while(P!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ha(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,Y=E;break e}Y=i.return}}var _=t.current;for(Y=_;Y!==null;){o=Y;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Y=C;else e:for(o=_;Y!==null;){if(u=Y,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:yh(9,u)}}catch(F){Qe(u,u.return,F)}if(u===o){Y=null;break e}var D=u.sibling;if(D!==null){D.return=u.return,Y=D;break e}Y=u.return}}if(we=s,Qs(),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(uh,t)}catch{}r=!0}return r}finally{Ce=n,xn.transition=e}}return!1}function Ey(t,e,n){e=Uo(n,e),e=mw(t,e,1),t=Ns(t,e,1),e=$t(),t!==null&&(Ol(t,1,e),en(t,e))}function Qe(t,e,n){if(t.tag===3)Ey(t,t,n);else for(;e!==null;){if(e.tag===3){Ey(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Rs===null||!Rs.has(r))){t=Uo(n,t),t=gw(e,t,1),e=Ns(e,t,1),t=$t(),e!==null&&(Ol(e,1,t),en(e,t));break}}e=e.return}}function AI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,ht===t&&(_t&n)===n&&(ot===4||ot===3&&(_t&130023424)===_t&&500>Xe()-_m?Ri(t,0):vm|=n),en(t,e)}function Lw(t,e){e===0&&(t.mode&1?(e=bu,bu<<=1,!(bu&130023424)&&(bu=4194304)):e=1);var n=$t();t=Gr(t,e),t!==null&&(Ol(t,e,n),en(t,n))}function bI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Lw(t,n)}function kI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),Lw(t,n)}var Vw;Vw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jt.current)Xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xt=!1,mI(t,e,n);Xt=!!(t.flags&131072)}else Xt=!1,$e&&e.flags&1048576&&U0(e,Rc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rc(t,e),t=e.pendingProps;var s=Vo(e,Mt.current);xo(e,n),s=dm(null,e,r,t,s,n);var i=fm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zt(r)?(i=!0,xc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,am(e),s.updater=gh,e.stateNode=s,s._reactInternals=e,Vf(e,r,t,n),e=$f(null,e,r,!0,i,n)):(e.tag=0,$e&&i&&em(e),jt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=NI(r),t=zn(r,t),s){case 0:e=jf(null,e,r,t,n);break e;case 1:e=hy(null,e,r,t,n);break e;case 11:e=uy(null,e,r,t,n);break e;case 14:e=cy(null,e,r,zn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),jf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),hy(t,e,r,s,n);case 3:e:{if(ww(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,q0(t,e),Mc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Uo(Error(z(423)),e),e=dy(t,e,r,n,s);break e}else if(r!==s){s=Uo(Error(z(424)),e),e=dy(t,e,r,n,s);break e}else for(dn=xs(e.stateNode.containerInfo.firstChild),fn=e,$e=!0,Wn=null,n=W0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fo(),r===s){e=Qr(t,e,n);break e}jt(t,e,r,n)}e=e.child}return e;case 5:return G0(e),t===null&&Mf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,xf(r,s)?o=null:i!==null&&xf(r,i)&&(e.flags|=32),_w(t,e),jt(t,e,o,n),e.child;case 6:return t===null&&Mf(e),null;case 13:return Ew(t,e,n);case 4:return lm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=jo(e,null,r,n):jt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),uy(t,e,r,s,n);case 7:return jt(t,e,e.pendingProps,n),e.child;case 8:return jt(t,e,e.pendingProps.children,n),e.child;case 12:return jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ne(Pc,r._currentValue),r._currentValue=o,i!==null)if(Yn(i.value,o)){if(i.children===s.children&&!Jt.current){e=Qr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=$r(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Of(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Of(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}jt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,xo(e,n),s=Nn(s),r=r(s),e.flags|=1,jt(t,e,r,n),e.child;case 14:return r=e.type,s=zn(r,e.pendingProps),s=zn(r.type,s),cy(t,e,r,s,n);case 15:return yw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),rc(t,e),e.tag=1,Zt(r)?(t=!0,xc(e)):t=!1,xo(e,n),pw(e,r,s),Vf(e,r,s,n),$f(null,e,r,!0,t,n);case 19:return Tw(t,e,n);case 22:return vw(t,e,n)}throw Error(z(156,e.tag))};function Fw(t,e){return h0(t,e)}function xI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(t,e,n,r){return new xI(t,e,n,r)}function Sm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function NI(t){if(typeof t=="function")return Sm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bp)return 11;if(t===zp)return 14}return 2}function Ds(t,e){var n=t.alternate;return n===null?(n=kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Sm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fo:return Pi(n.children,s,i,e);case Up:o=8,s|=8;break;case af:return t=kn(12,n,e,s|2),t.elementType=af,t.lanes=i,t;case lf:return t=kn(13,n,e,s),t.elementType=lf,t.lanes=i,t;case uf:return t=kn(19,n,e,s),t.elementType=uf,t.lanes=i,t;case G_:return _h(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case K_:o=10;break e;case q_:o=9;break e;case Bp:o=11;break e;case zp:o=14;break e;case ys:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=kn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Pi(t,e,n,r){return t=kn(7,t,r,e),t.lanes=n,t}function _h(t,e,n,r){return t=kn(22,t,r,e),t.elementType=G_,t.lanes=n,t.stateNode={isHidden:!1},t}function Ed(t,e,n){return t=kn(6,t,null,e),t.lanes=n,t}function Td(t,e,n){return e=kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nd(0),this.expirationTimes=nd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Im(t,e,n,r,s,i,o,u,c){return t=new RI(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=kn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},am(i),t}function PI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ho,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function jw(t){if(!t)return $s;t=t._reactInternals;e:{if(Ki(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Zt(n))return j0(t,n,e)}return e}function $w(t,e,n,r,s,i,o,u,c){return t=Im(n,r,!0,t,s,i,o,u,c),t.context=jw(null),n=t.current,r=$t(),s=Ps(n),i=$r(r,s),i.callback=e??null,Ns(n,i,s),t.current.lanes=s,Ol(t,s,r),en(t,r),t}function wh(t,e,n,r){var s=e.current,i=$t(),o=Ps(s);return n=jw(n),e.context===null?e.context=n:e.pendingContext=n,e=$r(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ns(s,e,o),t!==null&&(Qn(t,s,o,i),ec(t,s,o)),o}function Bc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ty(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Cm(t,e){Ty(t,e),(t=t.alternate)&&Ty(t,e)}function DI(){return null}var Uw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Am(t){this._internalRoot=t}Eh.prototype.render=Am.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));wh(t,e,null,null)};Eh.prototype.unmount=Am.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$i(function(){wh(null,t,null,null)}),e[qr]=null}};function Eh(t){this._internalRoot=t}Eh.prototype.unstable_scheduleHydration=function(t){if(t){var e=v0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_s.length&&e!==0&&e<_s[n].priority;n++);_s.splice(n,0,t),n===0&&w0(t)}};function bm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Th(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sy(){}function MI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Bc(o);i.call(d)}}var o=$w(e,r,t,0,null,!1,!1,"",Sy);return t._reactRootContainer=o,t[qr]=o.current,ml(t.nodeType===8?t.parentNode:t),$i(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var d=Bc(c);u.call(d)}}var c=Im(t,0,!1,null,null,!1,!1,"",Sy);return t._reactRootContainer=c,t[qr]=c.current,ml(t.nodeType===8?t.parentNode:t),$i(function(){wh(e,c,n,r)}),c}function Sh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=Bc(o);u.call(c)}}wh(e,o,t,s)}else o=MI(n,e,t,s,r);return Bc(o)}g0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pa(e.pendingLanes);n!==0&&(Kp(e,n|1),en(e,Xe()),!(we&6)&&(Bo=Xe()+500,Qs()))}break;case 13:$i(function(){var r=Gr(t,1);if(r!==null){var s=$t();Qn(r,t,1,s)}}),Cm(t,1)}};qp=function(t){if(t.tag===13){var e=Gr(t,134217728);if(e!==null){var n=$t();Qn(e,t,134217728,n)}Cm(t,134217728)}};y0=function(t){if(t.tag===13){var e=Ps(t),n=Gr(t,e);if(n!==null){var r=$t();Qn(n,t,e,r)}Cm(t,e)}};v0=function(){return Ce};_0=function(t,e){var n=Ce;try{return Ce=t,e()}finally{Ce=n}};_f=function(t,e,n){switch(e){case"input":if(df(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=fh(r);if(!s)throw Error(z(90));Y_(r),df(r,s)}}}break;case"textarea":J_(t,n);break;case"select":e=n.value,e!=null&&Co(t,!!n.multiple,e,!1)}};i0=wm;o0=$i;var OI={usingClientEntryPoint:!1,Events:[Vl,yo,fh,r0,s0,wm]},Ia={findFiberByHostInstance:Ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LI={bundleType:Ia.bundleType,version:Ia.version,rendererPackageName:Ia.rendererPackageName,rendererConfig:Ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=u0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ia.findFiberByHostInstance||DI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fu.isDisabled&&Fu.supportsFiber)try{uh=Fu.inject(LI),hr=Fu}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OI;gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bm(e))throw Error(z(200));return PI(t,e,null,n)};gn.createRoot=function(t,e){if(!bm(t))throw Error(z(299));var n=!1,r="",s=Uw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Im(t,1,!1,null,null,n,!1,r,s),t[qr]=e.current,ml(t.nodeType===8?t.parentNode:t),new Am(e)};gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=u0(e),t=t===null?null:t.stateNode,t};gn.flushSync=function(t){return $i(t)};gn.hydrate=function(t,e,n){if(!Th(e))throw Error(z(200));return Sh(null,t,e,!0,n)};gn.hydrateRoot=function(t,e,n){if(!bm(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Uw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=$w(e,null,t,1,n??null,s,!1,i,o),t[qr]=e.current,ml(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Eh(e)};gn.render=function(t,e,n){if(!Th(e))throw Error(z(200));return Sh(null,t,e,!1,n)};gn.unmountComponentAtNode=function(t){if(!Th(t))throw Error(z(40));return t._reactRootContainer?($i(function(){Sh(null,null,t,!1,function(){t._reactRootContainer=null,t[qr]=null})}),!0):!1};gn.unstable_batchedUpdates=wm;gn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Th(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Sh(t,e,n,!1,r)};gn.version="18.3.1-next-f1338f8080-20240426";function Bw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bw)}catch(t){console.error(t)}}Bw(),B_.exports=gn;var VI=B_.exports,Iy=VI;sf.createRoot=Iy.createRoot,sf.hydrateRoot=Iy.hydrateRoot;const FI="modulepreload",jI=function(t){return"/"+t},Cy={},Ma=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=jI(c),c in Cy)return;Cy[c]=!0;const d=c.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":FI,d||(m.as="script"),m.crossOrigin="",m.href=c,u&&m.setAttribute("nonce",u),document.head.appendChild(m),d)return new Promise((g,S)=>{m.addEventListener("load",g),m.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return s.then(o=>{for(const u of o||[])u.status==="rejected"&&i(u.reason);return e().catch(i)})};function $I({children:t}){return v.jsx(v.Fragment,{children:t})}function zw(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=zw(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function yt(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=zw(t))&&(r&&(r+=" "),r+=e);return r}function Ay({options:t,value:e,onChange:n,className:r,name:s="finder-view"}){return v.jsx("div",{className:yt("flex flex-wrap gap-2",r),children:t.map(i=>{const o=i.id===e;return v.jsxs("label",{className:yt("group relative flex cursor-pointer items-center gap-2 rounded-full border px-3 py-1.5 text-sm font-semibold uppercase tracking-wide transition focus-within:ring-2 focus-within:ring-accent/60",o?"border-transparent bg-gradient-to-r from-accent via-accent/90 to-amber-400 text-accenttext shadow-lg shadow-accent/30":"border-white/10 bg-white/5 text-gray-200 hover:border-accent/40 hover:bg-accent/10 hover:text-white",i.disabled&&"cursor-not-allowed opacity-50"),children:[v.jsx("input",{type:"radio",name:s,value:i.id,checked:o,onChange:()=>{i.disabled||n(i.id)},className:"sr-only",disabled:i.disabled}),v.jsx("span",{className:"relative z-10 capitalize",children:i.label??i.id})]},i.id)})})}function UI({heading:t="Filters",actions:e,meta:n,sections:r,footer:s,className:i}){return v.jsxs("div",{className:yt("space-y-4 rounded-2xl border border-white/10 bg-surface/80 p-4 shadow-xl shadow-black/30 backdrop-blur supports-[backdrop-filter]:backdrop-blur-lg",i),children:[(t||e)&&v.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[typeof t=="string"?v.jsx("h3",{className:"text-lg font-semibold tracking-wide text-white",children:t}):t,e]}),n?v.jsx("div",{className:"text-xs font-medium text-gray-300/80",children:n}):null,v.jsx("div",{className:"space-y-3",children:r.map(o=>{if(!o.content)return null;const u=yt("space-y-2",o.contentClassName,o.collapsible===!1?void 0:"");return o.collapsible===!1?v.jsxs("div",{className:yt("rounded-xl border border-white/5 bg-black/30 p-3 shadow-inner shadow-black/20",o.className),children:[o.title?typeof o.title=="string"?v.jsx("div",{className:"text-sm font-semibold uppercase tracking-wide text-gray-200",children:o.title}):o.title:null,v.jsx("div",{className:yt(o.title?"pt-2":void 0,u),children:o.content})]},o.id):v.jsxs("details",{className:yt("group rounded-xl border border-white/5 bg-black/30 p-3 shadow-inner shadow-black/20 transition",o.className),open:o.defaultOpen,children:[o.title?v.jsx("summary",{className:"cursor-pointer font-semibold uppercase tracking-wide text-gray-200 transition group-open:text-white",children:o.title}):null,v.jsx("div",{className:yt("pt-3",u),children:o.content})]},o.id)})}),s]})}function BI({rootClassName:t,view:e,viewOptions:n,onViewChange:r,mobileFiltersOpen:s,onToggleMobileFilters:i,onCloseMobileFilters:o,mobileSummary:u,mobileBanner:c,filterContent:d,notice:p,children:m}){return v.jsxs("div",{className:yt("flex min-h-screen flex-col bg-bg text-text lg:flex-row",t),children:[v.jsxs("div",{className:"lg:hidden sticky top-0 z-30 border-b border-white/10 bg-surface/80 backdrop-blur supports-[backdrop-filter]:backdrop-blur-lg print-hidden",children:[v.jsxs("div",{className:"space-y-3 px-4 py-3",children:[v.jsx(Ay,{options:n,value:e,onChange:r,className:"mb-1"}),v.jsxs("div",{className:"flex items-center justify-between gap-2",children:[v.jsx("h3",{className:"text-base font-semibold",children:"Filters"}),v.jsx("button",{type:"button",onClick:i,className:"rounded-md border border-white/15 bg-white/5 px-2.5 py-1 text-xs font-semibold uppercase tracking-wide text-gray-100 transition hover:border-accent/40 hover:bg-accent/10 hover:text-white",children:s?"Close filters":"Open filters"})]}),c,u?v.jsx("div",{className:"rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-gray-200",children:u}):null]}),s&&v.jsx("div",{className:"border-t border-white/10 bg-surface/90 px-4 pb-6 shadow-2xl backdrop-blur supports-[backdrop-filter]:backdrop-blur-lg",children:v.jsxs("div",{className:"max-h-[80vh] overflow-y-auto rounded-2xl border border-white/10 bg-surface/80 p-4 shadow-xl shadow-black/30",children:[d,v.jsx("div",{className:"mt-4 flex justify-end",children:v.jsx("button",{type:"button",onClick:o,className:"rounded-full bg-gradient-to-r from-accent to-accent/80 px-5 py-2 text-sm font-semibold text-accenttext shadow-lg shadow-accent/30",children:"Done"})})]})})]}),v.jsxs("div",{className:"flex min-h-0 flex-1 flex-col lg:mx-auto lg:w-full lg:max-w-[96rem] lg:flex-row",children:[v.jsxs("aside",{className:"hidden w-[20rem] flex-shrink-0 flex-col gap-4 bg-transparent p-4 lg:flex print-hidden",children:[v.jsx(Ay,{options:n,value:e,onChange:r,className:"mb-2"}),d]}),v.jsxs("main",{className:"flex-1 min-h-0 overflow-hidden",children:[p,m]})]})]})}function zI({rootClassName:t,view:e,viewOptions:n,onViewChange:r,mobileFiltersOpen:s,onToggleMobileFilters:i,onCloseMobileFilters:o,mobileSummary:u,mobileBanner:c,notice:d,filterHeading:p,filterActions:m,filterMeta:g,filterSections:S,filterFooter:I,filterPanelClassName:P,children:L}){return v.jsx(BI,{rootClassName:t,view:e,viewOptions:n,onViewChange:r,mobileFiltersOpen:s,onToggleMobileFilters:i,onCloseMobileFilters:o,mobileSummary:u,mobileBanner:c,notice:d,filterContent:v.jsx(UI,{heading:p,actions:m,meta:g,sections:S,footer:I,className:P}),children:L})}function Ih({activeView:t,id:e,children:n,className:r,padded:s=!1,hideOnPrint:i=!0}){return t!==e?null:v.jsx("div",{className:yt("finder-view",i&&"print-hidden",s&&"p-4",r),children:n})}function HI({activeView:t,children:e,className:n,padded:r,hideOnPrint:s}){return v.jsx(Ih,{activeView:t,id:"map",padded:r??!1,hideOnPrint:s??!0,className:yt("finder-view--map",n),children:e})}function WI({activeView:t,children:e,className:n,padded:r,hideOnPrint:s}){return v.jsx(Ih,{activeView:t,id:"list",padded:r??!0,hideOnPrint:s??!0,className:yt("finder-view--list",n),children:e})}function KI({activeView:t,children:e,className:n,padded:r,hideOnPrint:s}){return v.jsx(Ih,{activeView:t,id:"calendar",padded:r??!0,hideOnPrint:s??!0,className:yt("finder-view--calendar",n),children:e})}function qI({activeView:t,children:e,className:n,padded:r,hideOnPrint:s}){return v.jsx(Ih,{activeView:t,id:"chart",padded:r??!0,hideOnPrint:s??!0,className:yt("finder-view--chart",n),children:e})}function GI({monthCursor:t,weekdays:e,days:n,matches:r,selectedDateISO:s,onPrevMonth:i,onNextMonth:o,onSelectDate:u,longDateLabel:c,formatLocalDate:d,renderDayEntry:p,renderSelectedItem:m,sortSelectedItems:g}){return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("button",{onClick:i,className:"bg-gray-700 px-3 py-1 rounded",type:"button",children:" Prev"}),v.jsx("span",{className:"font-bold",children:t.toLocaleString("default",{month:"long",year:"numeric"})}),v.jsx("button",{onClick:o,className:"bg-gray-700 px-3 py-1 rounded",type:"button",children:"Next "})]}),v.jsxs("div",{className:"grid grid-cols-7 gap-px bg-gray-700",children:[e.map(S=>v.jsx("div",{className:"bg-surface p-1 text-center font-semibold text-sm",children:S},S)),n.map((S,I)=>{const P=S.getMonth()!==t.getMonth(),L=new Date().toDateString()===S.toDateString(),E=d(S),_=r.filter(C=>C.date===E);return v.jsxs("div",{className:`bg-surface p-1 min-h-[6rem] text-sm ${P?"opacity-40":""} ${L?"ring-1 ring-accent":""}`,onClick:()=>u(E),children:[v.jsx("div",{className:"font-bold text-text",children:S.getDate()}),_.map((C,D)=>p(C,D,E))]},I)})]}),s&&v.jsxs("div",{className:"mt-3",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("h4",{className:"font-bold",children:c(s)}),v.jsx("button",{className:"text-sm text-accent hover:underline",onClick:()=>u(null),type:"button",children:"Clear"})]}),v.jsx("div",{className:"space-y-2 mt-2",children:(g?[...r.filter(S=>S.date===s)].sort(g):r.filter(S=>S.date===s)).map(m)})]})]})}function QI(t){const e=rf.lazy(async()=>{const r=await t();return r!=null&&r.default?r:{default:r}}),n=r=>v.jsx(rf.Suspense,{fallback:null,children:v.jsx(e,{...r})});return n.displayName="DynamicStub",n}const YI=QI(()=>Ma(()=>import("./assets/MapClient-BANyaXLu.js"),[]));function XI({points:t,caption:e,height:n="calc(100vh - 8.5rem)",className:r,mapClassName:s,searchCenter:i,searchRadiusMi:o,onSearchCenterChange:u,searchCenterInteractive:c=!1}){return t.length?v.jsxs("div",{className:r?`space-y-3 ${r}`:"space-y-3",children:[v.jsx("div",{className:s?`w-full overflow-hidden rounded-none border-y border-white/10 bg-surface/70 shadow-xl shadow-black/20 md:rounded-2xl md:border ${s}`:"w-full overflow-hidden rounded-none border-y border-white/10 bg-surface/70 shadow-xl shadow-black/20 md:rounded-2xl md:border",style:{height:n},children:v.jsx(YI,{points:t,searchCenter:i,searchRadiusMi:o,onSearchCenterChange:u,searchCenterInteractive:c})}),e?v.jsx("p",{className:"px-3 text-xs text-muted md:px-0",children:e}):null]}):null}function JI(t){const e=t.match(/^\s*rgba\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*[0-9.]+\s*\)\s*$/i);return e?`rgb(${e[1]}, ${e[2]}, ${e[3]})`:t}function ZI({months:t,rows:e,leftCols:n,leftColWidths:r,chartSortKey:s,chartSortDir:i,onSortKey:o,getRowBackground:u,getCellBackground:c,getBadgeColor:d,getContrastText:p}){return v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"text-sm border-separate border-spacing-0 gar-chart-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[(()=>{let m=0;return n.map((S,I)=>{const P=r[S.key],L=I%2===0?"bg-surface":"bg-gray-800/70",E=v.jsx("th",{className:`sticky top-0 p-1 border border-gray-600 text-left whitespace-nowrap ${L}`,style:{left:m,minWidth:P,width:P,zIndex:5},children:v.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 hover:text-accent",onClick:()=>o(S.key),children:[v.jsx("span",{children:S.label}),s===S.key?v.jsx("span",{"aria-hidden":"true",className:"text-xs",children:i==="asc"?"":""}):null]})},`left-${S.key}`);return m+=P,E})})(),t.map((m,g)=>v.jsx("th",{className:`sticky top-0 p-1 border border-gray-600 text-text ${(n.length+g)%2===0?"bg-surface":"bg-gray-800/70"}`,children:v.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 hover:text-accent",onClick:()=>o(`month:${m.key}`),title:`Sort by ${m.longLabel}`,children:[v.jsx("span",{children:m.shortLabel}),s===`month:${m.key}`?v.jsx("span",{"aria-hidden":"true",className:"text-xs",children:i==="asc"?"":""}):null]})},m.key))]})}),v.jsx("tbody",{children:(()=>{let m=0;const g=n.map(S=>{const I=m;return m+=r[S.key],I});return e.map((S,I)=>{const P=u(S,I),L=JI(P);return v.jsxs("tr",{children:[n.map((E,_)=>{const C=S.values[E.key],D=C!=null&&C.href?v.jsx("a",{href:C.href,className:"text-accent hover:underline",children:C.label}):(C==null?void 0:C.label)??"";return v.jsx("td",{className:"sticky left-0 p-2 border border-gray-600 font-semibold whitespace-nowrap",style:{left:g[_],minWidth:r[E.key],width:r[E.key],zIndex:3,backgroundColor:L},children:D},`gval-${E.key}`)}),t.map(E=>{const _=S.itemsByMonth[E.key]??[],C=c(_,P);return v.jsx("td",{className:"border border-gray-600 p-1 min-w-[2.5rem] gar-chart-cell",style:{backgroundColor:C},children:_.map((D,F)=>{const j=d(D);return v.jsx("a",{href:D.href,className:`gar-chart-day inline-block px-1 mr-1 mb-1 rounded text-xs font-bold text-white hover:opacity-90 ${F%2?"opacity-95":""}`,style:{backgroundColor:j,color:p(j)},title:D.title,children:D.day??""},D.id)})},E.key)})]},`grp-${S.key}`)})})()})]})})}function eC({sectionId:t,options:e,isSelected:n,onToggle:r,getLabel:s,getTitle:i,previewCount:o=8}){const[u,c]=M.useState(!1),d=e.length>o,p=M.useMemo(()=>d&&!u?e.slice(0,o):e,[u,d,e,o]);return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"flex flex-wrap gap-1",children:p.map(m=>v.jsxs("label",{className:`cursor-pointer rounded border px-2 py-1 text-sm ${n(m.value)?"bg-accent text-accenttext":"bg-gray-700"}`,title:i==null?void 0:i(m),children:[v.jsx("input",{type:"checkbox",checked:n(m.value),onChange:()=>r(m.value),className:"sr-only"}),v.jsx("span",{children:s(m)})]},`${t}:${m.value}`))}),d&&v.jsx("button",{type:"button",onClick:()=>c(m=>!m),className:"text-xs font-semibold text-accent hover:underline",children:u?"Show fewer":`Show ${e.length-o} more`})]})}const Ur=2020,Br=2100,hn=t=>{const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`},Xn=t=>{if(!t)return null;const e=/^(\d{4})-(\d{2})-(\d{2})$/.exec(t.trim());if(!e)return null;const n=Number(e[1]),r=Number(e[2]),s=Number(e[3]);if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(s)||n<Ur||n>Br||r<1||r>12||s<1||s>31)return null;const i=new Date(n,r-1,s);return Number.isNaN(i.getTime())||i.getFullYear()!==n||i.getMonth()!==r-1||i.getDate()!==s?null:i},Il=t=>{const e=Xn(t);return e?hn(e):void 0},Hw=t=>{const[e,n]=(t||"").split("-"),r=Number(e),s=Number.isFinite(r)?Math.max(Ur,Math.min(Br,r)):new Date().getFullYear(),i=(Number(n)||1)-1;return{y:s,mIdx:Math.max(0,Math.min(11,i))}},by=t=>{const{y:e,mIdx:n}=Hw(t);return new Date(e,n,1)},tC=t=>{const{y:e,mIdx:n}=Hw(t);return new Date(e,n+1,0)},ky=t=>{if(!t)return null;const e=/^(\d{4})-(\d{2})$/.exec(t.trim());if(!e)return null;const n=Number(e[1]),r=Number(e[2]);return!Number.isFinite(n)||!Number.isFinite(r)||n<Ur||n>Br||r<1||r>12?null:{year:e[1],month:e[2]}},Cn=(t,e,n)=>Math.max(e,Math.min(n,t)),Sd=(t,e)=>new Date(t,e,0).getDate(),qa="w-full rounded bg-gray-900 px-2 py-1 text-center tabular-nums focus:outline-none focus:ring-2 focus:ring-accent/60";function xy({value:t,onChange:e}){const n=Xn(t),[r,s]=M.useState(null),[i,o]=M.useState(()=>({month:n?String(n.getMonth()+1):"",day:n?String(n.getDate()):"",year:n?String(n.getFullYear()):""}));M.useEffect(()=>{const p=Xn(t);o({month:p?String(p.getMonth()+1):"",day:p?String(p.getDate()):"",year:p?String(p.getFullYear()):""})},[t]);const u=M.useCallback(p=>{if(p.year.length!==4||!p.month||!p.day)return;const m=Number(p.month),g=Number(p.day),S=Number(p.year);if(!Number.isFinite(m)||!Number.isFinite(g)||!Number.isFinite(S)||m<1||m>12||g<1||g>31||S<Ur||S>Br)return;const I=Il(`${p.year}-${String(m).padStart(2,"0")}-${String(g).padStart(2,"0")}`);I&&e(I)},[e]),c=M.useCallback((p,m,g)=>{const S=g.replace(/\D/g,"").slice(0,m);o(I=>{const P={...I,[p]:S};return u(P),P})},[u]),d=M.useCallback((p,m)=>{m&&o(g=>{const S=Number(g.year)||(n==null?void 0:n.getFullYear())||new Date().getFullYear(),I=Number(g.month)||(n?n.getMonth()+1:1),P=Number(g.day)||(n?n.getDate():1),L=Cn(S,Ur,Br),E=Cn(I,1,12),_=Sd(L,E),C=Cn(P,1,_);let D=L,F=E,j=C;p==="year"?(D=Cn(L+m,Ur,Br),j=Cn(j,1,Sd(D,F))):p==="month"?(F=Cn(E+m,1,12),j=Cn(j,1,Sd(D,F))):j=Cn(C+m,1,_);const k={month:String(F),day:String(j),year:String(D)};return u(k),k})},[u,n]);return M.useEffect(()=>{if(!r)return;const p=m=>{m.preventDefault();const g=m.deltaY>0?-1:1;d(r,g)};return window.addEventListener("wheel",p,{capture:!0,passive:!1}),()=>{window.removeEventListener("wheel",p,{capture:!0})}},[r,d]),v.jsxs("div",{className:"grid grid-cols-[1fr_auto_1fr_auto_1.35fr] items-center gap-2",onBlurCapture:p=>{p.currentTarget.contains(p.relatedTarget)||s(null)},children:[v.jsx("input",{inputMode:"numeric",autoComplete:"off",placeholder:"MM","aria-label":"Month",value:i.month,onFocus:()=>s("month"),onChange:p=>c("month",2,p.target.value),className:qa}),v.jsx("span",{className:"text-gray-400",children:"/"}),v.jsx("input",{inputMode:"numeric",autoComplete:"off",placeholder:"DD","aria-label":"Day",value:i.day,onFocus:()=>s("day"),onChange:p=>c("day",2,p.target.value),className:qa}),v.jsx("span",{className:"text-gray-400",children:"/"}),v.jsx("input",{inputMode:"numeric",autoComplete:"off",placeholder:"YYYY","aria-label":"Year",value:i.year,onFocus:()=>s("year"),onChange:p=>c("year",4,p.target.value),className:qa})]})}function nC({value:t,onChange:e}){const n=ky(t),[r,s]=M.useState(null),[i,o]=M.useState(()=>({month:n!=null&&n.month?String(Number(n.month)):"",year:(n==null?void 0:n.year)??""}));M.useEffect(()=>{const p=ky(t);o({month:p!=null&&p.month?String(Number(p.month)):"",year:(p==null?void 0:p.year)??""})},[t]);const u=M.useCallback(p=>{if(p.year.length!==4||!p.month)return;const m=Number(p.month),g=Number(p.year);!Number.isFinite(m)||!Number.isFinite(g)||m<1||m>12||g<Ur||g>Br||e(`${p.year}-${String(m).padStart(2,"0")}`)},[e]),c=M.useCallback((p,m,g)=>{const S=g.replace(/\D/g,"").slice(0,m);o(I=>{const P={...I,[p]:S};return u(P),P})},[u]),d=M.useCallback((p,m)=>{m&&o(g=>{const S=Number(g.year)||Number(n==null?void 0:n.year)||new Date().getFullYear(),I=Number(g.month)||Number(n==null?void 0:n.month)||1;let P=Cn(S,Ur,Br),L=Cn(I,1,12);p==="year"?P=Cn(P+m,Ur,Br):L=Cn(L+m,1,12);const E={month:String(L),year:String(P)};return u(E),E})},[u,n==null?void 0:n.month,n==null?void 0:n.year]);return M.useEffect(()=>{if(!r)return;const p=m=>{m.preventDefault();const g=m.deltaY>0?-1:1;d(r,g)};return window.addEventListener("wheel",p,{capture:!0,passive:!1}),()=>{window.removeEventListener("wheel",p,{capture:!0})}},[r,d]),v.jsxs("div",{className:"grid grid-cols-[1fr_auto_1.35fr] items-center gap-2",onBlurCapture:p=>{p.currentTarget.contains(p.relatedTarget)||s(null)},children:[v.jsx("input",{inputMode:"numeric",autoComplete:"off",placeholder:"MM","aria-label":"Month",value:i.month,onFocus:()=>s("month"),onChange:p=>c("month",2,p.target.value),className:qa}),v.jsx("span",{className:"text-gray-400",children:"/"}),v.jsx("input",{inputMode:"numeric",autoComplete:"off",placeholder:"YYYY","aria-label":"Year",value:i.year,onFocus:()=>s("year"),onChange:p=>c("year",4,p.target.value),className:qa})]})}function rC(t){if(!t||typeof t!="string")return"";const e=new Date(`${t}T00:00:00`);return Number.isNaN(e.getTime())?t:e.toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})}function Id(t){return Array.isArray(t)?Array.from(new Set(t.flatMap(e=>String(e).split(",")).map(e=>e.trim()).filter(Boolean))):typeof t=="string"?Array.from(new Set(t.split(",").map(e=>e.trim()).filter(Boolean))):[]}function Cd(t,e=3){return t.length?t.length<=e?t.join(", "):`${t.slice(0,e).join(", ")} +${t.length-e}`:""}function sC(t){if(!t||typeof t!="string")return"";const e=t.trim();if(!e)return"";const n=e.match(/^([01]?\d|2[0-3]):([0-5]\d)(?::[0-5]\d)?$/);if(n){const s=Number(n[1]),i=n[2],o=s>=12?"PM":"AM";return`${s%12||12}:${i}${o}`}const r=e.match(/^(\d{1,2}):([0-5]\d)\s*([aApP][mM])$/);return r?`${Number(r[1])}:${r[2]}${r[3].toUpperCase()}`:e}const iC=({title:t,matchHref:e,ownerName:n,date:r,tier:s,status:i,startTime:o,disciplines:u,subDisciplines:c,series:d,scoringLabel:p,directionsHref:m,extraBadges:g=[]})=>{const S=rC(r),I=Id(u),P=Id(c),L=Id(d),E=sC(o),_=[E?`Starts ${E}`:"",I.length?`Discipline: ${Cd(I)}`:"",P.length?`Sub: ${Cd(P)}`:"",L.length?`Series: ${Cd(L)}`:"",...g].filter(C=>typeof C=="string"&&C.trim());return v.jsxs("div",{className:"finder-entity-card text-sm",children:[v.jsxs("div",{className:"finder-entity-card__header justify-between",children:[v.jsxs("div",{className:"flex min-w-0 flex-wrap items-center gap-2",children:[n?v.jsx("span",{className:"finder-entity-card__owner",children:n}):null,n?v.jsx("span",{className:"finder-entity-card__dot","aria-hidden":"true"}):null]}),m?v.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"text-xs font-semibold text-accent hover:underline",children:"Find Directions"}):null]}),v.jsx("div",{children:e?v.jsx("a",{href:e,className:"finder-entity-card__title",children:t||"Match"}):v.jsx("span",{className:"finder-entity-card__title",children:t||"Match"})}),v.jsxs("div",{className:"finder-entity-card__meta",children:[S,s&&v.jsx("span",{className:"finder-entity-card__badge",children:s}),i&&v.jsx("span",{className:"finder-entity-card__badge finder-entity-card__badge--accent",children:i}),p&&v.jsx("span",{className:"finder-entity-card__badge",children:p}),_.map((C,D)=>v.jsx("span",{className:"finder-entity-card__badge",children:C},`${C}-${D}`))]})]})};function Ny({item:t}){return v.jsx(iC,{title:t.title,matchHref:t.matchHref,ownerName:t.ownerName,ownerHref:t.ownerHref,date:t.date,tier:t.tier,status:t.status,startTime:t.startTime,disciplines:t.disciplines,subDisciplines:t.subDisciplines,series:t.series,scoringLabel:t.scoringLabel,directionsHref:t.directionsHref,extraBadges:t.extraBadges})}const oC={neutral:"border-white/10 bg-surface/70 text-muted",error:"border-rose-500/30 bg-rose-500/10 text-rose-100",warning:"border-amber-500/30 bg-amber-500/10 text-amber-200"};function Ry({title:t,description:e,tone:n="neutral",centered:r=!1,compact:s=!1,className:i}){return v.jsxs("div",{className:yt("rounded-3xl border shadow-xl shadow-black/20",s?"p-6":"p-8",r&&"text-center",oC[n],i),children:[v.jsx("p",{className:yt(s?"text-base font-semibold":"text-lg font-semibold"),children:t}),e?v.jsx("p",{className:"mt-2 text-sm",children:e}):null]})}function aC({title:t,summary:e,actions:n,className:r}){return!t&&!e&&!n?null:v.jsxs("div",{className:yt("flex flex-wrap items-center justify-between gap-3",r),children:[v.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted",children:[t?v.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-primary",children:t}):null,e?v.jsx("span",{children:e}):null]}),n?v.jsx("div",{className:"flex items-center gap-2",children:n}):null]})}const lC=new Set(["entityType","type","sub","subDisciplines","tier","status","series","seriesMode","from","to","radius","zip","lat","lng","sort","minEvents","view"]);function Py(t){return Array.isArray(t)?typeof t[0]=="string"?t[0]:void 0:typeof t=="string"?t:void 0}function Ca(t){return t==null?[]:(Array.isArray(t)?t.join(","):String(t)).split(",").map(n=>n.trim()).filter(Boolean)}function uC(t){return Object.keys(t||{}).some(e=>lC.has(e))}function cC(t){const e=new URLSearchParams(t||""),n={};return e.forEach((r,s)=>{const i=n[s];if(i==null){n[s]=r;return}n[s]=Array.isArray(i)?[...i,r]:[i,r]}),n}function Dy(t){const e=new URLSearchParams;return Object.entries(t).forEach(([n,r])=>{if(r==null)return;const s=String(r).trim();s&&e.set(n,s)}),e}const Jf={lat:43,lng:-90.5},hC={types:[],tiers:[],statuses:[],series:[],seriesMode:"or",subDisciplines:[],radius:100,sort:"dateAsc",lat:Jf.lat,lng:Jf.lng,minEvents:void 0},dC=new Set(["dateAsc","dateDesc","nameAsc","nameDesc"]),ju=t=>{if(t==null||t==="")return;const e=Number(t);return Number.isFinite(e)?e:void 0};function Ww(t){const e={};t.from&&(e.from=t.from),t.to&&(e.to=t.to);const n=t.radius??100;return n!==100&&(e.radius=String(n)),t.lat!=null&&(e.lat=String(t.lat)),t.lng!=null&&(e.lng=String(t.lng)),(t.lat==null||t.lng==null)&&t.zip&&(e.zip=t.zip),t.types.length&&(e.type=t.types.join(",")),t.subDisciplines.length&&(e.sub=t.subDisciplines.join(",")),t.series.length&&(e.series=t.series.join(",")),t.seriesMode!=="or"&&(e.seriesMode=t.seriesMode),t.tiers.length&&(e.tier=t.tiers.join(",")),t.statuses.length&&(e.status=t.statuses.join(",")),t.sort&&t.sort!=="dateAsc"&&(e.sort=t.sort),t.minEvents!=null&&(e.minEvents=String(t.minEvents)),e}function My(t){const e=ju(t.radius),n=Il(Py(t.from)),r=Il(Py(t.to)),s=String(t.sort||"");return{types:Ca(t.type),subDisciplines:Ca(t.sub||t.subDisciplines),tiers:Ca(t.tier),statuses:Ca(t.status),series:Ca(t.series),seriesMode:t.seriesMode==="and"?"and":"or",from:n,to:r,radius:e==null?100:Math.min(500,Math.max(0,e)),zip:t.zip?String(t.zip):void 0,lat:ju(t.lat),lng:ju(t.lng),sort:dC.has(s)?s:"dateAsc",minEvents:ju(t.minEvents)}}function fC(t){return{filterStorageKey:t==="clubs"?"clubFinderFiltersV2":"matchFinderFiltersV1",viewStorageKey:t==="clubs"?"clubFinderViewV1":"matchFinderViewV1"}}function pC(t,e,n){return{...Ww(t),from:e.from,to:e.to,view:n}}const Ga=12,mC=(t,e)=>{if(!t||!e)return[];const n=Xn(t),r=Xn(e);if(!n||!r)return[];const s=n<=r?new Date(n):new Date(r),i=n<=r?new Date(r):new Date(n);s.setDate(1),i.setDate(1);const o=[];for(let u=new Date(s);u<=i;u.setMonth(u.getMonth()+1))o.push(`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`);return o.length<=Ga?o:o.slice(-Ga)},Qa=(t,e)=>{const n=Il(t),r=Il(e);if(!n||!r)return{from:n,to:r};const s=Xn(n),i=Xn(r);return!s||!i?{from:n,to:r}:s.getTime()<=i.getTime()?{from:n,to:r}:{from:r,to:n}},Kw=(t,e,n="to")=>{const r=Qa(t,e);if(!r.from||!r.to)return r;const s=Xn(r.from),i=Xn(r.to);if(!s||!i||(i.getFullYear()-s.getFullYear())*12+(i.getMonth()-s.getMonth())+1<=Ga)return r;if(n==="from"){const c=new Date(s);return c.setMonth(c.getMonth()+(Ga-1)),Qa(hn(s),hn(c))}const u=new Date(i);return u.setMonth(u.getMonth()-(Ga-1)),Qa(hn(u),hn(i))},Ad=(t,e,n,r="to")=>{const s=Kw(t,e,r);return{from:s.from??n.from,to:s.to??n.to}},Aa=t=>t.replace(/\\/g,"\\\\").replace(/\r?\n/g,"\\n").replace(/,/g,"\\,").replace(/;/g,"\\;"),gC=t=>{const e=t.getUTCFullYear(),n=String(t.getUTCMonth()+1).padStart(2,"0"),r=String(t.getUTCDate()).padStart(2,"0"),s=String(t.getUTCHours()).padStart(2,"0"),i=String(t.getUTCMinutes()).padStart(2,"0"),o=String(t.getUTCSeconds()).padStart(2,"0");return`${e}${n}${r}T${s}${i}${o}Z`},yC=t=>{const n=String(t??"").replace(/"/g,'""');return/[",\n\r]/.test(n)?`"${n}"`:n},zc=(t,e)=>{const n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},vC=(t,e)=>{if(!t.length)return;const n=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//The Shooters Hub//Match Finder//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH"];t.forEach(s=>{n.push("BEGIN:VEVENT",`UID:${Aa(s.uid)}`,`DTSTAMP:${gC(new Date)}`,`DTSTART;VALUE=DATE:${s.start}`,`DTEND;VALUE=DATE:${s.endExclusive}`,`SUMMARY:${Aa(s.title)}`,`DESCRIPTION:${Aa(s.description)}`),s.location&&n.push(`LOCATION:${Aa(s.location)}`),n.push(`URL:${Aa(s.matchUrl)}`,"END:VEVENT")}),n.push("END:VCALENDAR");const r=new Blob([n.join(`\r
`)],{type:"text/calendar;charset=utf-8"});zc(r,e)},Oy=(t,e)=>{const n=t.map(s=>s.map(yC).join(",")).join(`\r
`),r=new Blob([n],{type:"text/csv;charset=utf-8;"});zc(r,e)};async function _C({format:t,chartLeftCols:e,visibleChartMonths:n,rows:r,filterLines:s,siteBaseUrl:i}){if(!n.length)return;const o=[...e.map(I=>I.label),...n.map(I=>I.longLabel)],u=[];u.push(["The Gar Chart"]),(s.length?s:["None"]).forEach((I,P)=>{u.push([P===0?"Filters":"",I])}),u.push(["Generated by The Shooters Hub","shootershub.fortneyengineering.com"]),u.push([]),u.push(o);const d=[[...e.map(I=>I.label),"Month","Date","Match","Link"]];r.forEach(I=>{const P=e.map(E=>{const _=I.values[E.key];return _?_.fullUrl?`${_.label} (${_.fullUrl})`:_.label:""}),L=n.map(E=>{const _=I.itemsByMonth[E.key]??[];return _.length?_.map(C=>{const D=C.day!=null?`${String(C.day).padStart(2,"0")}: `:"",F=C.owner?`  ${C.owner}`:"",j=C.fullUrl?`  ${C.fullUrl}`:"";return`${D}${C.title}${F}${j}`}).join(`
`):""});u.push([...P,...L]),n.forEach(E=>{(I.itemsByMonth[E.key]??[]).forEach(C=>{const D=e.map(F=>{var j;return((j=I.values[F.key])==null?void 0:j.label)??""});d.push([...D,E.longLabel,C.date??"",C.title,C.fullUrl])})})});const p=new Date().toISOString().replace(/[:.]/g,"-");if(t==="csv"){const I=E=>(/["]/g.test(E)&&(E=E.replace(/"/g,'""')),/[",\n\r]/.test(E)?`"${E}"`:E),P=u.map(E=>E.map(_=>I(_??"")).join(",")).join(`\r
`),L=new Blob([P],{type:"text/csv;charset=utf-8;"});zc(L,`the-gar-chart-${p}.csv`);return}const m=I=>I.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),g=[];g.push('<html><head><meta charset="utf-8" />'),g.push("<title>The Gar Chart</title><style>body{font-family:Arial,Helvetica,sans-serif;color:#000;}table{border-collapse:collapse;margin-bottom:16px;}th,td{border:1px solid #000;padding:4px;font-size:12px;vertical-align:top;}h1,h2{margin-bottom:8px;}ul{margin:4px 0 12px 20px;padding:0;}li{margin-bottom:2px;}</style>"),g.push("</head><body>"),g.push("<h1>The Gar Chart</h1>"),g.push("<p><strong>Filters</strong></p>"),g.push("<ul>"),(s.length?s:["No filters applied"]).forEach(I=>{g.push(`<li>${m(I)}</li>`)}),g.push("</ul>"),g.push(`<p>Generated by The Shooters Hub  <a href="${m(i)}">shootershub.fortneyengineering.com</a></p>`),g.push("<table>"),g.push("<tr>"),e.forEach(I=>{g.push(`<th>${m(I.label)}</th>`)}),n.forEach(I=>{g.push(`<th>${m(I.longLabel)}</th>`)}),g.push("</tr>"),r.forEach(I=>{g.push("<tr>"),e.forEach(P=>{const L=I.values[P.key];L!=null&&L.fullUrl?g.push(`<td><a href="${m(L.fullUrl)}">${m(L.label)}</a></td>`):g.push(`<td>${m((L==null?void 0:L.label)??"")}</td>`)}),n.forEach(P=>{const L=I.itemsByMonth[P.key]??[];if(!L.length){g.push("<td></td>");return}const E=L.map(_=>{const C=_.day!=null?`${String(_.day).padStart(2,"0")}: `:"",D=_.owner?`  ${_.owner}`:"",F=`${C}${_.title}${D}`;return _.fullUrl?`<div><a href="${m(_.fullUrl)}">${m(F)}</a></div>`:`<div>${m(F)}</div>`}).join("");g.push(`<td>${E}</td>`)}),g.push("</tr>")}),g.push("</table>"),d.length>1&&(g.push("<h2>Matches</h2>"),g.push("<table>"),d.forEach((I,P)=>{g.push("<tr>"),I.forEach((L,E)=>{if(P===0){g.push(`<th>${m(L)}</th>`);return}if(E===I.length-1)g.push(`<td><a href="${m(L)}">${m(L)}</a></td>`);else if(E===I.length-2){const _=I[I.length-1],C=L;_?g.push(`<td><a href="${m(_)}">${m(C)}</a></td>`):g.push(`<td>${m(C)}</td>`)}else g.push(`<td>${m(L)}</td>`)}),g.push("</tr>")}),g.push("</table>")),g.push("</body></html>");const S=new Blob([g.join("")],{type:"application/vnd.ms-excel;charset=utf-8;"});zc(S,`the-gar-chart-${p}.xls`)}function wC(t={}){const{viewSelector:e=".finder-view"}=t,n=M.useRef(null),r=M.useCallback(u=>{var c;try{if(!u){(c=n.current)!=null&&c.parentNode&&n.current.parentNode.removeChild(n.current),n.current=null;return}let d=n.current;d||(d=document.createElement("style"),d.setAttribute("data-print-orientation","active-view"),document.head.appendChild(d),n.current=d),d.textContent=`@page { size: ${u}; }`}catch{}},[]),s=M.useCallback(()=>{try{const u=document.querySelector(e);if(!u)return;const c=u.getBoundingClientRect();if(!c.width||!c.height)return;const d=c.width/c.height;r(d>1.05?"landscape":"portrait")}catch{}},[r,e]),i=M.useCallback(async()=>{s(),await new Promise(u=>requestAnimationFrame(()=>requestAnimationFrame(()=>u())))},[s]),o=M.useCallback(()=>{i().finally(()=>{window.print()})},[i]);return M.useEffect(()=>{const u=()=>{i()},c=()=>{r(null)};return window.addEventListener("beforeprint",u),window.addEventListener("afterprint",c),()=>{window.removeEventListener("beforeprint",u),window.removeEventListener("afterprint",c)}},[i,r]),M.useEffect(()=>()=>{r(null)},[r]),{handlePrint:o}}var io={};const Di=t=>(t||"").trim().replace(/\/+$/,""),qw=Di("/wp-json/shooters-hub/v1/proxy/olc"),EC=()=>{if(typeof window>"u")return"";const t=window.__SH_PLUGIN_OLC_BASE__;return typeof t=="string"?Di(t):""},TC=t=>{const e=Di(t).toLowerCase();if(!e)return null;const n=e.match(/^([a-z0-9-]+)\.(firebaseapp\.com|web\.app)$/);return(n==null?void 0:n[1])||null},SC=t=>{const e=Di(t).toLowerCase();if(!e)return null;const n=e.match(/^([a-z0-9-]+)\.firebasestorage\.app$/);if(n!=null&&n[1])return n[1];const r=e.match(/^([a-z0-9-]+)\.appspot\.com$/);if(r!=null&&r[1])return r[1];try{const i=new URL(e).pathname.match(/\/([a-z0-9-]+)\.firebasestorage\.app\/?$/);if(i!=null&&i[1])return i[1]}catch{}return null},IC=()=>{const t=Di(io.NEXT_PUBLIC_OLC_API_FALLBACK_BASE||"");if(t)return t;const e=Di(io.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"")||TC(io.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN)||SC(io.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET)||"";return e?`https://${Di(io.NEXT_PUBLIC_FUNCTIONS_REGION||io.NEXT_PUBLIC_FIREBASE_FUNCTIONS_REGION||"us-central1")}-${e}.cloudfunctions.net/api/olc`:null},bd=IC(),CC=()=>EC()||qw,AC=()=>!bd||bd===qw?null:bd,Gw=(t,e)=>{if(!e)return t;if(/^https?:/i.test(e))return e;let n=e;return n.startsWith("/")||(n=`/${n}`),n==="/"?t:`${t}${n}`},bC=t=>Gw(CC(),t),Ly=t=>{const e=AC();return e?Gw(e,t):null},kC=(t,e)=>{if(t!==502)return!1;if(!e)return!0;const n=e.trim().toLowerCase();return n?n.includes("upstream error")||n.includes("fetch failed")||n.includes("api proxy misconfigured"):!0},km=async(t,e)=>{var r,s;const n=bC(t);try{const i=await fetch(n,e),o=Ly(t);if(!o)return i;if(i.status===502){let u=null;try{u=await i.clone().text()}catch{u=null}if(kC(i.status,u))try{const c=await fetch(o,e);try{(s=(r=i.body)==null?void 0:r.cancel)==null||s.call(r)}catch{}return c}catch{return i}}return i}catch(i){const o=Ly(t);if(!o)throw i;try{return await fetch(o,e)}catch{throw i}}},$u="23456789CFGHJMPQRVWX";function xC(t){for(;t<-180;)t+=360;for(;t>=180;)t-=360;return t}function NC(t,e){t=Math.min(89.999999,Math.max(-90,t)),e=xC(e);const n=t+90,r=e+180,s=Math.floor(n/20),i=Math.floor(r/20),o=Math.floor(n%20),u=Math.floor(r%20);return $u[s]+$u[i]+$u[o]+$u[u]}function RC(t,e){const n=e/69,r=e/(69*Math.cos(t.lat*Math.PI/180)),s=t.lat-n,i=t.lat+n,o=t.lng-r,u=t.lng+r,c=new Set;for(let d=Math.floor(s);d<=Math.floor(i);d++)for(let p=Math.floor(o);p<=Math.floor(u);p++)c.add(NC(d+.5,p+.5));return Array.from(c)}function PC(t,e){const r=m=>m*Math.PI/180,s=r(e.lat-t.lat),i=r(e.lng-t.lng),o=r(t.lat),u=r(e.lat),c=Math.sin(s/2),d=Math.sin(i/2);return 6371e3*(2*Math.atan2(Math.sqrt(c*c+Math.cos(o)*Math.cos(u)*d*d),Math.sqrt(1-(c*c+Math.cos(o)*Math.cos(u)*d*d))))/1609.34}function Qw(t,e,n){return t.filter(r=>PC(e,r)<=n)}const vt=new Map,Vr=new Map,Cl="v2",Zf=`olcTileCache:${Cl}`,ep=`olcMissingCache:${Cl}`,tp="olcCacheVersion",Vy=60*60*1e3,Fy=10*60*1e3,DC=500,np=new Map,MC=5*60*1e3,OC=60*1e3,LC=30*1e3;function VC(t){const e=Array.isArray(t==null?void 0:t.rows)?t.rows:[],n=Array.isArray(t==null?void 0:t.columns)?t.columns:[];if(!e.length||!n.length)return[];const r=D=>n.indexOf(D),s=r("id"),i=r("title"),o=r("type"),u=r("start"),c=r("lat"),d=r("lng"),p=r("clubId"),m=r("clubName"),g=r("discipline"),S=r("subDiscipline"),I=r("tier"),P=r("likeCount"),L=r("detail"),E=r("seriesIds"),_=r("seriesId"),C=r("series");return e.map(D=>{if(!Array.isArray(D))return null;const F=s>=0?String(D[s]??""):"";if(!F)return null;const j=i>=0&&D[i]!=null?String(D[i]):void 0,k=o>=0&&D[o]!=null?String(D[o]):void 0,w=u>=0&&D[u]!=null?String(D[u]):void 0,A=c>=0?Number(D[c]):NaN,T=d>=0?Number(D[d]):NaN,x=p>=0&&D[p]!=null?String(D[p]):void 0,R=m>=0&&D[m]!=null?String(D[m]):void 0,b=g>=0&&D[g]!=null?String(D[g]):void 0,Se=S>=0&&D[S]!=null?String(D[S]):void 0,me=I>=0&&D[I]!=null?String(D[I]):void 0,ke=P>=0?Number(D[P]):NaN,qe=L>=0&&D[L]!=null?String(D[L]):void 0,H=[...E>=0?ar(D[E]):[],..._>=0?ar(D[_]):[],...C>=0?ar(D[C]):[]];return{id:F,title:j,type:k,start:w,lat:Number.isFinite(A)?A:void 0,lng:Number.isFinite(T)?T:void 0,clubId:x,clubName:R,discipline:b,subDiscipline:Se,tier:me,likeCount:Number.isFinite(ke)?Math.max(0,Math.trunc(ke)):void 0,detail:qe,seriesIds:Array.from(new Set(H))}}).filter(Boolean)}const ar=t=>Array.isArray(t)?t.filter(e=>typeof e=="string").map(e=>e.trim()).filter(Boolean):typeof t=="string"?t.split(",").map(e=>e.trim()).filter(Boolean):[];function Hc(t){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const e=Number(t);if(Number.isFinite(e))return e}}function FC(t){const e=Hc(t.lat),n=Hc(t.lng);if(e==null||n==null)return null;const r=t.start?String(t.start):void 0,s=r?r.slice(0,10):void 0,i=r&&r.length>=16?r.slice(11,16):void 0,o=typeof t.discipline=="string"?t.discipline.trim():"",u=typeof t.type=="string"?t.type.trim():"",c=o||(u&&u!=="M"?u:"");return{id:t.id,title:t.title||t.id,type:c||void 0,date:s,startTime:i,firstTime:i,lat:e,lng:n,location:{lat:e,lng:n},clubId:t.clubId,clubName:t.clubName,disciplines:c?[c]:[],subDiscipline:ar(t.subDiscipline),seriesIds:Array.isArray(t.seriesIds)?t.seriesIds:[],matchTier:t.tier,likeCount:typeof t.likeCount=="number"?t.likeCount:void 0,matchLink:t.detail}}function jC(t){var i,o;const e=Hc(t.lat??((i=t.location)==null?void 0:i.lat)),n=Hc(t.lng??((o=t.location)==null?void 0:o.lng)),r=Array.from(new Set([...ar(t==null?void 0:t.seriesIds),...ar(t==null?void 0:t.seriesId),...ar(t==null?void 0:t.series),...ar(t==null?void 0:t.seriesKey)]));return{...t||{},lat:e??0,lng:n??0,location:(t==null?void 0:t.location)??{lat:e??0,lng:n??0},disciplines:ar(t==null?void 0:t.disciplines),subDiscipline:ar(t==null?void 0:t.subDiscipline),seriesIds:r}}function $C(t){const e=VC(t),r=(Array.isArray(t==null?void 0:t.items)?t.items:[]).map(i=>jC(i)),s=new Map;return r.forEach(i=>{i!=null&&i.id&&s.set(String(i.id),i)}),e.length?e.map(i=>{const o=FC(i);if(!o)return null;const u=s.get(String(i.id));return u?{...u,...o,title:u.title||o.title,clubName:u.clubName||o.clubName,location:{...u.location||{},...o.location||{}},disciplines:Array.isArray(u.disciplines)&&u.disciplines.length?u.disciplines:o.disciplines,subDiscipline:Array.isArray(u.subDiscipline)&&u.subDiscipline.length?u.subDiscipline:o.subDiscipline,seriesIds:Array.isArray(u.seriesIds)&&u.seriesIds.length?u.seriesIds:o.seriesIds,matchTier:u.matchTier||o.matchTier,customTier:u.customTier||o.customTier,status:u.status||o.status,matchLink:u.matchLink||o.matchLink}:o}).filter(Boolean):r.length?r:[]}function Yw(t){const[e,n]=t.split("-"),r=Number(e),s=Number(n)-1,i=new Date;return(i.getFullYear()-r)*12+(i.getMonth()-s)}function xm(t){const e=t.split(":")[1],n=Yw(e);return n===0?Fy:Math.abs(n)===1?6*Fy:24*60*60*1e3}function Nm(t){const e=t.split(":")[1],n=Yw(e);return n===0?Vy:Math.abs(n)===1?6*Vy:24*60*60*1e3}function Xw(){try{if(typeof localStorage<"u")return localStorage}catch{}try{if(typeof sessionStorage<"u")return sessionStorage}catch{}return null}function Al(t){return!t||/^\d{4}-\d{2}$/.test(t)?t:/^\d{6}$/.test(t)?`${t.slice(0,4)}-${t.slice(4)}`:t}function ac(t){const[e,n]=String(t||"").split(":"),r=Al(String(n||""));return`${e}:${r}`}function Jw(t){const e=s=>{if(!s||typeof s!="object")return null;const i=typeof s.tileId=="string"?s.tileId:void 0,o=typeof s.olc4=="string"?s.olc4:i==null?void 0:i.split(":")[0];if(!o)return null;const u=s.updatedAt??s.updated_at,c=typeof u=="string"?u:void 0;return{olc4:o.toUpperCase(),updatedAt:c}},n=Array.isArray(t==null?void 0:t.tiles)?t.tiles:Array.isArray(t)?t:null;if(!n)return null;const r=[];for(const s of n){if(typeof s=="string"){const o=s.trim();o&&r.push({olc4:o.toUpperCase()});continue}const i=e(s);i&&r.push(i)}return r}function Zw(t){const e=np.get(t);if(!e)return;const n=e.ok?e.tiles&&e.tiles.length?MC:OC:LC;if(Date.now()-e.fetchedAt>n){np.delete(t);return}return e.tiles}function Ci(t,e,n){np.set(t,{tiles:e,ok:n,fetchedAt:Date.now()})}async function UC(t,e,n){const r=String(t||"").toUpperCase(),s=Al(String(e||"")),i=`${r}:${s}`,o=Zw(i);if(o!==void 0)return o;const u=new URLSearchParams({olc2:r,month:s});try{const c=await km(`/index?${u.toString()}`,{signal:n});if(c.status===404)return Ci(i,[],!0),[];if(!c.ok){const g=await c.text().catch(()=>"");throw new Error(g||`Failed to load index (${c.status})`)}const d=await c.json(),p=Jw(d);if(!p)return Ci(i,null,!1),null;const m=p.map(g=>({...g,olc4:g.olc4.toUpperCase()}));return Ci(i,m,!0),m}catch(c){if((c==null?void 0:c.name)==="AbortError")throw c;return Ci(i,null,!1),null}}async function BC(t,e){if(!t.length)return;const n=t.map(({olc2:s,month:i})=>({olc2:String(s||"").toUpperCase(),month:Al(String(i||""))})).filter(s=>s.olc2&&s.month);if(!n.length)return;const r=n.filter(({olc2:s,month:i})=>Zw(`${s}:${i}`)===void 0);if(r.length)try{const s=await km("/index/bulk",{method:"POST",headers:{"Content-Type":"application/json"},signal:e,body:JSON.stringify({pairs:r})});if(!s.ok)return;const i=await s.json();(Array.isArray(i==null?void 0:i.results)?i.results:[]).forEach(u=>{const c=String((u==null?void 0:u.olc2)||"").toUpperCase(),d=Al(String((u==null?void 0:u.month)||""));if(!c||!d)return;const p=`${c}:${d}`,m=u==null?void 0:u.tiles;if(m===null){Ci(p,null,!1);return}const g=Jw(m);if(!g){Ci(p,null,!1);return}const S=g.map(I=>({...I,olc4:I.olc4.toUpperCase()}));Ci(p,S,!0)})}catch(s){if((s==null?void 0:s.name)==="AbortError")throw s}}function zC(t){const e=[],n=new Set;for(const r of t||[]){const s=String((r==null?void 0:r.id)||"");s&&n.has(s)||(s&&n.add(s),e.push(r))}return e}function HC(t,e,n,r){const s=ac(t),i=vt.get(s),o=i?new Date(i.updatedAt).getTime():-1,u=(()=>{try{return new Date(e).getTime()}catch{return 0}})();if(i&&o>=u)return;const c=zC(Array.isArray(r)?r:[]);vt.set(s,{updatedAt:String(e||new Date(0).toISOString()),fetchedAt:n,items:c}),Ya(s),eE()}function WC(){const t=Xw();if(t)try{t.getItem(tp)!==Cl&&(t.removeItem("olcTileCache"),t.removeItem("olcMissingCache"),t.removeItem(Zf),t.removeItem(ep),t.setItem(tp,Cl));const n=t.getItem(Zf);if(n){const s=JSON.parse(n),i=Date.now();s.forEach(([o,u])=>{i-u.fetchedAt<xm(o)&&vt.set(o,u)}),eE()}const r=t.getItem(ep);if(r){const s=JSON.parse(r),i=Date.now();s.forEach(([o,u])=>{i-u<Nm(o)&&Vr.set(o,u)})}}catch{}}function Rm(){const t=Xw();if(t)try{t.setItem(Zf,JSON.stringify(Array.from(vt.entries()))),t.setItem(ep,JSON.stringify(Array.from(Vr.entries()))),t.setItem(tp,Cl)}catch{}}function Ya(t){const e=vt.get(t);e&&(vt.delete(t),vt.set(t,e))}function eE(){for(;vt.size>DC;){const t=vt.keys().next().value;if(t===void 0)break;vt.delete(t)}}function KC(){const t=Date.now();let e=!1;for(const[n,r]of vt.entries())t-r.fetchedAt>xm(n)&&(vt.delete(n),e=!0);e&&Rm()}function qC(){const t=Date.now();let e=!1;for(const[n,r]of Vr.entries())t-r>Nm(n)&&(Vr.delete(n),e=!0);e&&Rm()}WC();async function GC(t){var u;const e=(u=t.months)!=null&&u.length?t.months:[new Date().toISOString().slice(0,7)],n=JSON.stringify({c:{lat:Number(t.center.lat.toFixed(4)),lng:Number(t.center.lng.toFixed(4))},r:Math.round(t.radiusMi),m:e.slice().sort()}),r=typeof window<"u"?window:globalThis;r.__olcInflightSearch||(r.__olcInflightSearch=new Map);const s=r.__olcInflightSearch,i=s.get(n);if(i)return i;const o=(async()=>{const c=typeof window<"u"&&window.olcDebug;qC(),KC();const d=e.slice(-12).map(I=>Al(String(I))).filter(Boolean),p=Number.isFinite(t.radiusMi)?Math.max(0,Math.min(500,t.radiusMi)):100;let m=RC(t.center,p);m.length>5e4&&(m=m.slice(0,5e4));const g=new Set(m),S=new Set;d.forEach(I=>{m.forEach(P=>S.add(`${P}:${I}`))});try{const I=Array.from(new Set(m.map(T=>T.slice(0,2)))),P=d.flatMap(T=>I.map(x=>({olc2:x,month:T})));await BC(P,t.signal);const L=await Promise.all(P.map(async({olc2:T,month:x})=>{const R=await UC(T,x,t.signal);return{key:`${T}:${x}`,tiles:R}})),E=new Map;L.forEach(({key:T,tiles:x})=>{E.set(T,x??null)});const _=new Set,C=new Set,D=new Map;for(const T of d)for(const x of I){const R=`${x}:${T}`,b=E.get(R);if(b===null){for(const Se of m)Se.startsWith(x)&&_.add(`${Se}:${T}`);continue}if(b!=null&&b.length)for(const Se of b){const me=Se.olc4.toUpperCase();if(!g.has(me))continue;const ke=`${me}:${T}`;_.add(ke),C.add(ke),Se.updatedAt&&D.set(ke,String(Se.updatedAt))}}const F=Date.now(),j=[];for(const T of _){const x=Vr.get(T);if(x!=null){if(C.has(T))Vr.delete(T);else if(F-x<=Nm(T))continue;Vr.delete(T)}const R=vt.get(T);if(R){const b=D.get(T);if(b){if(R.updatedAt===b){R.fetchedAt=F,Ya(T);continue}j.push(T);continue}if(F-R.fetchedAt<=xm(T)){Ya(T);continue}}j.push(T)}const k=T=>{const x=ac(T.tileId||`${T.olc4}:${T.yyyymm}`),R=String(T.updatedAt||new Date(0).toISOString()),b=$C(T);return{tileId:x,updatedAt:R,items:b}},w=(T,x)=>{const R=Array.isArray(T.tiles)?T.tiles:[],b=Array.isArray(T.notModified)?T.notModified:[],Se=Array.isArray(T.missing)?T.missing:[];R.forEach(me=>{const ke=k(me);HC(ke.tileId,ke.updatedAt,x,ke.items)}),b.forEach(me=>{const ke=ac(me),qe=vt.get(ke);qe&&(qe.fetchedAt=x,Ya(ke))}),Se.forEach(me=>{const ke=ac(me);Vr.set(ke,x)})};return await(async T=>{if(!T.length)return;const x=180;for(let R=0;R<T.length;R+=x){const b=T.slice(R,R+x),Se=b.map(qe=>{const H=vt.get(qe);return H?{tileId:qe,updatedAt:H.updatedAt}:null}).filter(Boolean);c&&console.debug("[OLC] POST /tiles",{batch:R/x+1,size:b.length,have:Se.length});const me=await km("/tiles",{method:"POST",headers:{"Content-Type":"application/json"},signal:t.signal,body:JSON.stringify({tileIds:b,have:Se})});if(!me.ok){const qe=await me.text().catch(()=>"");throw new Error(qe||`Failed to load tiles (${me.status})`)}const ke=await me.json();w(ke,Date.now())}})(j),Rm(),c&&console.debug("[OLC] cache size",vt.size,"missing size",Vr.size,"tilesToFetch",j.length),jy(m,d,t.center,p,_)}catch(I){if((I==null?void 0:I.name)==="AbortError")throw I;try{console.error("[OLC] searchMatchesByOlc failed:",I)}catch{}const P=jy(m,d,t.center,p,S);if(P.length)return P;throw I instanceof Error?I:new Error("Failed to load OLC tiles")}})();s.set(n,o);try{return await o}finally{s.delete(n)}}function jy(t,e,n,r,s){const i=new Set(e),o=new Set(t),u=s??null,c=[],d=2e5;for(const[S,I]of vt.entries()){const[P,L]=S.split(":");if(!P||!L||!i.has(L))continue;if(u){if(!u.has(S))continue}else if(!o.has(P))continue;const E=Array.isArray(I.items)?I.items:[],C=Math.min(E.length,1e4,Math.max(0,d-c.length));for(let D=0;D<C;D++)c.push(E[D]);if(c.length>=d)break;Ya(S)}const p=Qw(c,n,r),m=[],g=new Set;for(const S of p){const I=String((S==null?void 0:S.id)||"");I&&g.has(I)||(I&&g.add(I),m.push(S))}return m}const QC="https://wiprecisionseries.com/register",YC={westBend:{id:"v6n8dazk0x",name:"West Bend Barton's Sportsman's Club",formattedName:"West Bend Barton's Sportsman's Club",lat:43.5214,lng:-88.1925,address:"3540 Trapshoot Ln",city:"Kewaskum",state:"WI",postalCode:"53040"},luxemburg:{id:"vjjlz6tqwd",name:"Luxemburg Sportsman's Club",formattedName:"Luxemburg Sportsman's Club",lat:44.5506,lng:-87.7156,address:"E2066 WI-54",city:"Luxemburg",state:"WI",postalCode:"54217"},beloit:{id:"ilgcc31aft",name:"Beloit Rifle Club",formattedName:"Beloit Rifle Club",lat:42.562,lng:-89.086,address:"851 E Philhower Rd",city:"Beloit",state:"WI",postalCode:"53511"}},XC=[{key:"wprs-2026-04",title:"WPRS Match #4 - 2026 Season",date:"2026-02-15",club:"westBend"},{key:"wprs-2026-05",title:"WPRS Match #5 - 2026 Season",date:"2026-03-15",club:"westBend"},{key:"wprs-2026-06",title:"WPRS Match #6 - 2026 Season",date:"2026-04-18",club:"westBend"},{key:"wprs-2026-may-a",title:"WPRS Match - 2026 Season",date:"2026-05-09",club:"luxemburg"},{key:"wprs-2026-07",title:"WPRS Match #7 - 2026 Season",date:"2026-05-23",club:"westBend"},{key:"wprs-2026-08",title:"WPRS Match #8 - 2026 Season",date:"2026-06-20",club:"westBend"},{key:"wprs-2026-jun-b",title:"WPRS Match - 2026 Season",date:"2026-06-27",club:"luxemburg"},{key:"wprs-2026-09",title:"WPRS Match #9 - 2026 Season",date:"2026-07-18",club:"westBend"},{key:"wprs-2026-10",title:"WPRS Match #10 - PRS Qualifier",date:"2026-07-19",club:"beloit",tier:"Custom",customTier:"PRS Qualifier"},{key:"wprs-2026-11",title:"WPRS Match #11 - PRS Qualifier",date:"2026-08-01",club:"westBend",tier:"Custom",customTier:"PRS Qualifier"},{key:"wprs-2026-12",title:"WPRS Match #12 - 2026 Season",date:"2026-08-02",club:"beloit"},{key:"wprs-2026-13",title:"WPRS Match #13 - 2026 Season",date:"2026-09-12",club:"westBend"},{key:"wprs-2027-01",title:"WPRS Match #1 - 2027 Season",date:"2026-10-31",club:"westBend"},{key:"wprs-2027-02",title:"WPRS Match #2 - 2027 Season",date:"2026-12-13",club:"westBend"}],JC=t=>{const e=YC[t.club];return{id:t.key,title:t.title,type:"PRS22",subDiscipline:["Rimfire"],matchTier:t.tier??"Regional",customTier:t.customTier,date:t.date,startTime:t.startTime??"08:00",firstTime:t.startTime??"08:00",matchLink:QC,lat:e.lat,lng:e.lng,clubId:e.id,clubName:e.formattedName,location:{lat:e.lat,lng:e.lng,address:e.address,city:e.city,state:e.state,postalCode:e.postalCode},disciplines:["PRS22"],status:"Open",visibility:"public",seasonIds:[],createdBy:"demo",documents:{}}},ZC=XC.map(t=>JC(t)),eA=t=>{const e=t==null?void 0:t.trim();return/^\d{4}-\d{2}$/.test(e)?e:/^\d{6}$/.test(e)?`${e.slice(0,4)}-${e.slice(4)}`:e||""},tA=t=>t?/^\d{4}-\d{2}$/.test(t)?t:/^\d{4}-\d{2}-\d{2}$/.test(t)?t.slice(0,7):"":"";function nA(t){var i;const e=(i=t.months)!=null&&i.length?t.months.map(o=>eA(o)).filter(Boolean):[],n=new Set(e),r=ZC.filter(o=>{if(!n.size)return!0;const u=tA(typeof o.date=="string"?o.date:void 0);return u?n.has(u):!1});return Qw(r,t.center,t.radiusMi).map(o=>({...o}))}const rA=t=>!1;async function sA(t){try{return await GC(t)}catch(e){if(rA())return console.warn("[olcFinderClient] Falling back to demo match finder data",e),nA({center:t.center,radiusMi:t.radiusMi,months:t.months});throw e}}function iA(){return{push:t=>{typeof window<"u"&&window.location.assign(t)},replace:t=>{typeof window<"u"&&window.location.replace(t)},back:()=>{typeof window<"u"&&window.history.back()}}}const tE=t=>{const n=((typeof window<"u"&&typeof window.__SH_PLUGIN_API_BASE__=="string"?String(window.__SH_PLUGIN_API_BASE__):"")||"/wp-json/shooters-hub/v1/proxy").replace(/\/+$/,"");let r=t;return n.endsWith("/api")&&(r=r.replace(/^\/api(?=\/|$)/,"")),r.startsWith("/")||(r=`/${r}`),r==="/"?n:`${n}${r}`},nE=(t,e)=>fetch(tE(t),e);async function oA(t,e){const n=await nE(`/api/postalAreas?postalCode=${t}&country=${e}`);if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to get postal area")}return n.json()}const aA=tE("/geocache"),lA=15e3;function uA(t){throw new Error("Unsupported resolve mode")}function cA(t){try{return JSON.parse(t)}catch{return null}}async function kd(t){const e=new AbortController,n=setTimeout(()=>e.abort(),lA),r=await fetch(aA,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t),signal:e.signal}).catch(o=>{throw new Error(`Network error contacting geocache: ${(o==null?void 0:o.message)||o}`)}).finally(()=>clearTimeout(n)),s=await r.text(),i=cA(s);if(!r.ok){const o=i&&(i.error||i.message||i.detail)||s||`HTTP ${r.status}`;throw new Error(o)}if(!i||typeof i!="object")throw new Error(s||"Bad response from geocache endpoint");if(typeof i.lat!="number"||typeof i.lng!="number"||typeof i.coordsId!="string")throw new Error("Malformed geocache response (missing lat/lng/coordsId)");return i}async function hA(t){switch(t.mode){case"coords":{const{lat:e,lng:n,country:r,language:s}=t;if(!Number.isFinite(e)||!Number.isFinite(n))throw new Error("Invalid coordinates");return kd({lat:e,lng:n,country:r,language:s})}case"plus_code":{const{plusCode:e,country:n,language:r}=t,s=(e||"").trim();if(!s)throw new Error("Plus code required");return kd({plusCode:s,country:n,language:r})}case"address":{const{address:e,fullAddress:n,country:r,language:s}=t,i=!!(e!=null&&e.line1||e!=null&&e.city&&(e!=null&&e.region)&&(e!=null&&e.country||r));if(!n&&!i)throw new Error("Provide fullAddress or a minimally complete structured address");return kd({address:e,fullAddress:n,country:r,language:s})}default:return uA()}}const dA=()=>{};var $y={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},fA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},sE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,p=i>>2,m=(i&3)<<4|u>>4;let g=(u&15)<<2|d>>6,S=d&63;c||(S=64,o||(g=64)),r.push(n[p],n[m],n[g],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||d==null||m==null)throw new pA;const g=i<<2|u>>4;if(r.push(g),d!==64){const S=u<<4&240|d>>2;if(r.push(S),m!==64){const I=d<<6&192|m;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mA=function(t){const e=rE(t);return sE.encodeByteArray(e,!0)},Wc=function(t){return mA(t).replace(/\./g,"")},iE=function(t){try{return sE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=()=>gA().__FIREBASE_DEFAULTS__,vA=()=>{if(typeof process>"u"||typeof $y>"u")return;const t=$y.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_A=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iE(t[1]);return e&&JSON.parse(e)},Ch=()=>{try{return dA()||yA()||vA()||_A()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wA=t=>{var e,n;return(n=(e=Ch())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},EA=t=>{const e=wA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oE=()=>{var t;return(t=Ch())==null?void 0:t.config},TA=t=>{var e;return(e=Ch())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function IA(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Wc(JSON.stringify(n)),Wc(JSON.stringify(o)),""].join(".")}const Xa={};function AA(){const t={prod:[],emulator:[]};for(const e of Object.keys(Xa))Xa[e]?t.emulator.push(e):t.prod.push(e);return t}function bA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Uy=!1;function kA(t,e){if(typeof window>"u"||typeof document>"u"||!jl(window.location.host)||Xa[t]===e||Xa[t]||Uy)return;Xa[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=AA().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function u(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,S){g.setAttribute("width","24"),g.setAttribute("id",S),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Uy=!0,o()},g}function p(g,S){g.setAttribute("id",S),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=bA(r),S=n("text"),I=document.getElementById(S)||document.createElement("span"),P=n("learnmore"),L=document.getElementById(P)||document.createElement("a"),E=n("preprendIcon"),_=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const C=g.element;u(C),p(L,P);const D=d();c(_,E),C.append(_,I,L,D),document.body.appendChild(C)}i?(I.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jn())}function NA(){var e;const t=(e=Ch())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function DA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MA(){return!NA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OA(){try{return typeof indexedDB=="object"}catch{return!1}}function LA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="FirebaseError";class yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=VA,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qi.prototype.create)}}class qi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?FA(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new yr(s,u,r)}}function FA(t,e){return t.replace(jA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const jA=/\{\$([^}]+)}/g;function Kc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(By(i)&&By(o)){if(!Kc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function By(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $A(t,e){const n=new UA(t,e);return n.subscribe.bind(n)}class UA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=xd),s.error===void 0&&(s.error=xd),s.complete===void 0&&(s.complete=xd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t){return t&&t._delegate?t._delegate:t}class Pn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new SA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WA(e))try{this.getOrInitializeService({instanceIdentifier:wi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wi){return this.instances.has(e)}getOptions(e=wi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wi){return this.component?this.component.multipleInstances?e:wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HA(t){return t===wi?void 0:t}function WA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const qA={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},GA=he.INFO,QA={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},YA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=QA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pm{constructor(e){this.name=e,this._logLevel=GA,this._logHandler=YA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const XA=(t,e)=>e.some(n=>t instanceof n);let zy,Hy;function JA(){return zy||(zy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZA(){return Hy||(Hy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lE=new WeakMap,rp=new WeakMap,uE=new WeakMap,Nd=new WeakMap,Dm=new WeakMap;function eb(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ms(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lE.set(n,t)}).catch(()=>{}),Dm.set(e,t),e}function tb(t){if(rp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});rp.set(t,e)}let sp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ms(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nb(t){sp=t(sp)}function rb(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Rd(this),e,...n);return uE.set(r,e.sort?e.sort():[e]),Ms(r)}:ZA().includes(t)?function(...e){return t.apply(Rd(this),e),Ms(lE.get(this))}:function(...e){return Ms(t.apply(Rd(this),e))}}function sb(t){return typeof t=="function"?rb(t):(t instanceof IDBTransaction&&tb(t),XA(t,JA())?new Proxy(t,sp):t)}function Ms(t){if(t instanceof IDBRequest)return eb(t);if(Nd.has(t))return Nd.get(t);const e=sb(t);return e!==t&&(Nd.set(t,e),Dm.set(e,t)),e}const Rd=t=>Dm.get(t);function ib(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=Ms(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ms(o.result),c.oldVersion,c.newVersion,Ms(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const ob=["get","getKey","getAll","getAllKeys","count"],ab=["put","add","delete","clear"],Pd=new Map;function Wy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Pd.get(e))return Pd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ab.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ob.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),s&&c.done]))[0]};return Pd.set(e,i),i}nb(t=>({...t,get:(e,n,r)=>Wy(e,n)||t.get(e,n,r),has:(e,n)=>!!Wy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ub(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ub(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ip="@firebase/app",Ky="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new Pm("@firebase/app"),cb="@firebase/app-compat",hb="@firebase/analytics-compat",db="@firebase/analytics",fb="@firebase/app-check-compat",pb="@firebase/app-check",mb="@firebase/auth",gb="@firebase/auth-compat",yb="@firebase/database",vb="@firebase/data-connect",_b="@firebase/database-compat",wb="@firebase/functions",Eb="@firebase/functions-compat",Tb="@firebase/installations",Sb="@firebase/installations-compat",Ib="@firebase/messaging",Cb="@firebase/messaging-compat",Ab="@firebase/performance",bb="@firebase/performance-compat",kb="@firebase/remote-config",xb="@firebase/remote-config-compat",Nb="@firebase/storage",Rb="@firebase/storage-compat",Pb="@firebase/firestore",Db="@firebase/ai",Mb="@firebase/firestore-compat",Ob="firebase",Lb="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="[DEFAULT]",Vb={[ip]:"fire-core",[cb]:"fire-core-compat",[db]:"fire-analytics",[hb]:"fire-analytics-compat",[pb]:"fire-app-check",[fb]:"fire-app-check-compat",[mb]:"fire-auth",[gb]:"fire-auth-compat",[yb]:"fire-rtdb",[vb]:"fire-data-connect",[_b]:"fire-rtdb-compat",[wb]:"fire-fn",[Eb]:"fire-fn-compat",[Tb]:"fire-iid",[Sb]:"fire-iid-compat",[Ib]:"fire-fcm",[Cb]:"fire-fcm-compat",[Ab]:"fire-perf",[bb]:"fire-perf-compat",[kb]:"fire-rc",[xb]:"fire-rc-compat",[Nb]:"fire-gcs",[Rb]:"fire-gcs-compat",[Pb]:"fire-fst",[Mb]:"fire-fst-compat",[Db]:"fire-vertex","fire-js":"fire-js",[Ob]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=new Map,Fb=new Map,ap=new Map;function qy(t,e){try{t.container.addComponent(e)}catch(n){Yr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zn(t){const e=t.name;if(ap.has(e))return Yr.debug(`There were multiple attempts to register component ${e}.`),!1;ap.set(e,t);for(const n of bl.values())qy(n,t);for(const n of Fb.values())qy(n,t);return!0}function Mm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Es(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Os=new qi("app","Firebase",jb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=Lb;function Ub(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:op,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Os.create("bad-app-name",{appName:String(s)});if(n||(n=oE()),!n)throw Os.create("no-options");const i=bl.get(s);if(i){if(Kc(n,i.options)&&Kc(r,i.config))return i;throw Os.create("duplicate-app",{appName:s})}const o=new KA(s);for(const c of ap.values())o.addComponent(c);const u=new $b(n,r,o);return bl.set(s,u),u}function Bb(t=op){const e=bl.get(t);if(!e&&t===op&&oE())return Ub();if(!e)throw Os.create("no-app",{appName:t});return e}function PD(){return Array.from(bl.values())}function tn(t,e,n){let r=Vb[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yr.warn(o.join(" "));return}Zn(new Pn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="firebase-heartbeat-database",Hb=1,kl="firebase-heartbeat-store";let Dd=null;function cE(){return Dd||(Dd=ib(zb,Hb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(kl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Os.create("idb-open",{originalErrorMessage:t.message})})),Dd}async function Wb(t){try{const n=(await cE()).transaction(kl),r=await n.objectStore(kl).get(hE(t));return await n.done,r}catch(e){if(e instanceof yr)Yr.warn(e.message);else{const n=Os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yr.warn(n.message)}}}async function Gy(t,e){try{const r=(await cE()).transaction(kl,"readwrite");await r.objectStore(kl).put(e,hE(t)),await r.done}catch(n){if(n instanceof yr)Yr.warn(n.message);else{const r=Os.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yr.warn(r.message)}}}function hE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=1024,qb=30;class Gb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Yb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Qy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>qb){const o=Xb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Yr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qy(),{heartbeatsToSend:r,unsentEntries:s}=Qb(this._heartbeatsCache.heartbeats),i=Wc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Yr.warn(n),""}}}function Qy(){return new Date().toISOString().substring(0,10)}function Qb(t,e=Kb){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Yy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Yy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Yb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OA()?LA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Wb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Gy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Gy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Yy(t){return Wc(JSON.stringify({version:2,heartbeats:t})).length}function Xb(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t){Zn(new Pn("platform-logger",e=>new lb(e),"PRIVATE")),Zn(new Pn("heartbeat",e=>new Gb(e),"PRIVATE")),tn(ip,Ky,t),tn(ip,Ky,"esm2020"),tn("fire-js","")}Jb("");function dE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zb=dE,fE=new qi("auth","Firebase",dE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=new Pm("@firebase/auth");function ek(t,...e){qc.logLevel<=he.WARN&&qc.warn(`Auth (${Ul}): ${t}`,...e)}function lc(t,...e){qc.logLevel<=he.ERROR&&qc.error(`Auth (${Ul}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t,...e){throw Om(t,...e)}function pE(t,...e){return Om(t,...e)}function mE(t,e,n){const r={...Zb(),[e]:n};return new qi("auth","Firebase",r).create(e,{appName:t.name})}function uc(t){return mE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Om(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return fE.create(t,...e)}function Te(t,e,...n){if(!t)throw Om(e,...n)}function Ja(t){const e="INTERNAL ASSERTION FAILED: "+t;throw lc(e),new Error(e)}function Gc(t,e){t||Ja(e)}function tk(){return Jy()==="http:"||Jy()==="https:"}function Jy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tk()||PA()||"connection"in navigator)?navigator.onLine:!0}function rk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gc(n>e,"Short delay should be less than long delay!"),this.isMobile=xA()||DA()}get(){return nk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t,e){Gc(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ja("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ja("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ja("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ak=new Bl(3e4,6e4);function yE(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ah(t,e,n,r,s={}){return vE(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=aE({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return RA()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&jl(t.emulatorConfig.host)&&(d.credentials="include"),gE.fetch()(await _E(t,t.config.apiHost,n,u),d)})}async function vE(t,e,n){t._canInitEmulator=!1;const r={...ik,...e};try{const s=new lk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Uu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uu(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Uu(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Uu(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw mE(t,p,d);Xy(t,p)}}catch(s){if(s instanceof yr)throw s;Xy(t,"network-request-failed",{message:String(s)})}}async function _E(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?sk(t.config,s):`${t.config.apiScheme}://${s}`;return ok.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class lk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pE(this.auth,"network-request-failed")),ak.get())})}}function Uu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=pE(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uk(t,e){return Ah(t,"POST","/v1/accounts:delete",e)}async function Qc(t,e){return Ah(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ck(t,e=!1){const n=$l(t),r=await n.getIdToken(e),s=wE(r);Te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Za(Md(s.auth_time)),issuedAtTime:Za(Md(s.iat)),expirationTime:Za(Md(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Md(t){return Number(t)*1e3}function wE(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return lc("JWT malformed, contained fewer than 3 sections"),null;try{const s=iE(n);return s?JSON.parse(s):(lc("Failed to decode base64 JWT payload"),null)}catch(s){return lc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Zy(t){const e=wE(t);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lp(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yr&&hk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function hk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Za(this.lastLoginAt),this.creationTime=Za(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yc(t){var m;const e=t.auth,n=await t.getIdToken(),r=await lp(t,Qc(e,{idToken:n}));Te(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?EE(s.providerUserInfo):[],o=pk(t.providerData,i),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=u?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new up(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function fk(t){const e=$l(t);await Yc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pk(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function EE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mk(t,e){const n=await vE(t,{},async()=>{const r=aE({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await _E(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:u,body:r};return t.emulatorConfig&&jl(t.emulatorConfig.host)&&(c.credentials="include"),gE.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gk(t,e){return Ah(t,"POST","/v2/accounts:revokeToken",yE(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=Zy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await mk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ro;return r&&(Te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return Ja("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(t,e){Te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class cr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new dk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new up(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await lp(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ck(this,e)}reload(){return fk(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new cr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Es(this.auth.app))return Promise.reject(uc(this.auth));const e=await this.getIdToken();return await lp(this,uk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,u=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:S,providerData:I,stsTokenManager:P}=n;Te(m&&P,e,"internal-error");const L=Ro.fromJSON(this.name,P);Te(typeof m=="string",e,"internal-error"),gs(r,e.name),gs(s,e.name),Te(typeof g=="boolean",e,"internal-error"),Te(typeof S=="boolean",e,"internal-error"),gs(i,e.name),gs(o,e.name),gs(u,e.name),gs(c,e.name),gs(d,e.name),gs(p,e.name);const E=new cr({uid:m,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:S,photoURL:o,phoneNumber:i,tenantId:u,stsTokenManager:L,createdAt:d,lastLoginAt:p});return I&&Array.isArray(I)&&(E.providerData=I.map(_=>({..._}))),c&&(E._redirectEventId=c),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ro;s.updateFromServerResponse(n);const i=new cr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Yc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?EE(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new Ro;u.updateFromIdToken(r);const c=new cr({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new up(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=new Map;function Ai(t){Gc(t instanceof Function,"Expected a class definition");let e=ev.get(t);return e?(Gc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ev.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}TE.type="NONE";const tv=TE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t,e,n){return`firebase:${t}:${e}:${n}`}class Po{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Od(this.userKey,s.apiKey,i),this.fullPersistenceKey=Od("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Qc(this.auth,{idToken:e}).catch(()=>{});return n?cr._fromGetAccountInfoResponse(this.auth,n,e):null}return cr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Po(Ai(tv),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Ai(tv);const o=Od(r,e.config.apiKey,e.name);let u=null;for(const d of n)try{const p=await d._get(o);if(p){let m;if(typeof p=="string"){const g=await Qc(e,{idToken:p}).catch(()=>{});if(!g)break;m=await cr._fromGetAccountInfoResponse(e,g,p)}else m=cr._fromJSON(e,p);d!==i&&(u=m),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Po(i,e,r):(i=c[0],u&&await i._set(o,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Po(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Tk(e))return"Blackberry";if(Sk(e))return"Webos";if(vk(e))return"Safari";if((e.includes("chrome/")||_k(e))&&!e.includes("edge/"))return"Chrome";if(Ek(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function yk(t=Jn()){return/firefox\//i.test(t)}function vk(t=Jn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _k(t=Jn()){return/crios\//i.test(t)}function wk(t=Jn()){return/iemobile/i.test(t)}function Ek(t=Jn()){return/android/i.test(t)}function Tk(t=Jn()){return/blackberry/i.test(t)}function Sk(t=Jn()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(t,e=[]){let n;switch(t){case"Browser":n=nv(Jn());break;case"Worker":n=`${nv(Jn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ul}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,u)=>{try{const c=e(i);o(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(t,e={}){return Ah(t,"GET","/v2/passwordPolicy",yE(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=6;class bk{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Ak,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rv(this),this.idTokenSubscription=new rv(this),this.beforeStateQueue=new Ik(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ai(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Po.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Qc(this,{idToken:e}),r=await cr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Es(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,u=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Es(this.app))return Promise.reject(uc(this));const n=e?$l(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Es(this.app)?Promise.reject(uc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Es(this.app)?Promise.reject(uc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ck(this),n=new bk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await gk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ai(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await Po.create(this,[Ai(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Es(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&ek(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function xk(t){return $l(t)}class rv{constructor(e){this.auth=e,this.observer=null,this.addObserver=$A(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Nk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ai);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}new Bl(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Bl(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Bl(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Bl(5e3,15e3);var sv="@firebase/auth",iv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dk(t){Zn(new Pn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;Te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SE(t)},d=new kk(r,s,i,c);return Nk(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zn(new Pn("auth-internal",e=>{const n=xk(e.getProvider("auth").getImmediate());return(r=>new Rk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),tn(sv,iv,Pk(t)),tn(sv,iv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=5*60;TA("authIdTokenMaxAge");Dk("Browser");var Ok="firebase",Lk="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn(Ok,Lk,"app");var ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ls,IE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,w){function A(){}A.prototype=w.prototype,k.D=w.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(T,x,R){for(var b=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)b[Se-2]=arguments[Se];return w.prototype[x].apply(T,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,w,A){A||(A=0);var T=Array(16);if(typeof w=="string")for(var x=0;16>x;++x)T[x]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(x=0;16>x;++x)T[x]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=k.g[0],A=k.g[1],x=k.g[2];var R=k.g[3],b=w+(R^A&(x^R))+T[0]+3614090360&4294967295;w=A+(b<<7&4294967295|b>>>25),b=R+(x^w&(A^x))+T[1]+3905402710&4294967295,R=w+(b<<12&4294967295|b>>>20),b=x+(A^R&(w^A))+T[2]+606105819&4294967295,x=R+(b<<17&4294967295|b>>>15),b=A+(w^x&(R^w))+T[3]+3250441966&4294967295,A=x+(b<<22&4294967295|b>>>10),b=w+(R^A&(x^R))+T[4]+4118548399&4294967295,w=A+(b<<7&4294967295|b>>>25),b=R+(x^w&(A^x))+T[5]+1200080426&4294967295,R=w+(b<<12&4294967295|b>>>20),b=x+(A^R&(w^A))+T[6]+2821735955&4294967295,x=R+(b<<17&4294967295|b>>>15),b=A+(w^x&(R^w))+T[7]+4249261313&4294967295,A=x+(b<<22&4294967295|b>>>10),b=w+(R^A&(x^R))+T[8]+1770035416&4294967295,w=A+(b<<7&4294967295|b>>>25),b=R+(x^w&(A^x))+T[9]+2336552879&4294967295,R=w+(b<<12&4294967295|b>>>20),b=x+(A^R&(w^A))+T[10]+4294925233&4294967295,x=R+(b<<17&4294967295|b>>>15),b=A+(w^x&(R^w))+T[11]+2304563134&4294967295,A=x+(b<<22&4294967295|b>>>10),b=w+(R^A&(x^R))+T[12]+1804603682&4294967295,w=A+(b<<7&4294967295|b>>>25),b=R+(x^w&(A^x))+T[13]+4254626195&4294967295,R=w+(b<<12&4294967295|b>>>20),b=x+(A^R&(w^A))+T[14]+2792965006&4294967295,x=R+(b<<17&4294967295|b>>>15),b=A+(w^x&(R^w))+T[15]+1236535329&4294967295,A=x+(b<<22&4294967295|b>>>10),b=w+(x^R&(A^x))+T[1]+4129170786&4294967295,w=A+(b<<5&4294967295|b>>>27),b=R+(A^x&(w^A))+T[6]+3225465664&4294967295,R=w+(b<<9&4294967295|b>>>23),b=x+(w^A&(R^w))+T[11]+643717713&4294967295,x=R+(b<<14&4294967295|b>>>18),b=A+(R^w&(x^R))+T[0]+3921069994&4294967295,A=x+(b<<20&4294967295|b>>>12),b=w+(x^R&(A^x))+T[5]+3593408605&4294967295,w=A+(b<<5&4294967295|b>>>27),b=R+(A^x&(w^A))+T[10]+38016083&4294967295,R=w+(b<<9&4294967295|b>>>23),b=x+(w^A&(R^w))+T[15]+3634488961&4294967295,x=R+(b<<14&4294967295|b>>>18),b=A+(R^w&(x^R))+T[4]+3889429448&4294967295,A=x+(b<<20&4294967295|b>>>12),b=w+(x^R&(A^x))+T[9]+568446438&4294967295,w=A+(b<<5&4294967295|b>>>27),b=R+(A^x&(w^A))+T[14]+3275163606&4294967295,R=w+(b<<9&4294967295|b>>>23),b=x+(w^A&(R^w))+T[3]+4107603335&4294967295,x=R+(b<<14&4294967295|b>>>18),b=A+(R^w&(x^R))+T[8]+1163531501&4294967295,A=x+(b<<20&4294967295|b>>>12),b=w+(x^R&(A^x))+T[13]+2850285829&4294967295,w=A+(b<<5&4294967295|b>>>27),b=R+(A^x&(w^A))+T[2]+4243563512&4294967295,R=w+(b<<9&4294967295|b>>>23),b=x+(w^A&(R^w))+T[7]+1735328473&4294967295,x=R+(b<<14&4294967295|b>>>18),b=A+(R^w&(x^R))+T[12]+2368359562&4294967295,A=x+(b<<20&4294967295|b>>>12),b=w+(A^x^R)+T[5]+4294588738&4294967295,w=A+(b<<4&4294967295|b>>>28),b=R+(w^A^x)+T[8]+2272392833&4294967295,R=w+(b<<11&4294967295|b>>>21),b=x+(R^w^A)+T[11]+1839030562&4294967295,x=R+(b<<16&4294967295|b>>>16),b=A+(x^R^w)+T[14]+4259657740&4294967295,A=x+(b<<23&4294967295|b>>>9),b=w+(A^x^R)+T[1]+2763975236&4294967295,w=A+(b<<4&4294967295|b>>>28),b=R+(w^A^x)+T[4]+1272893353&4294967295,R=w+(b<<11&4294967295|b>>>21),b=x+(R^w^A)+T[7]+4139469664&4294967295,x=R+(b<<16&4294967295|b>>>16),b=A+(x^R^w)+T[10]+3200236656&4294967295,A=x+(b<<23&4294967295|b>>>9),b=w+(A^x^R)+T[13]+681279174&4294967295,w=A+(b<<4&4294967295|b>>>28),b=R+(w^A^x)+T[0]+3936430074&4294967295,R=w+(b<<11&4294967295|b>>>21),b=x+(R^w^A)+T[3]+3572445317&4294967295,x=R+(b<<16&4294967295|b>>>16),b=A+(x^R^w)+T[6]+76029189&4294967295,A=x+(b<<23&4294967295|b>>>9),b=w+(A^x^R)+T[9]+3654602809&4294967295,w=A+(b<<4&4294967295|b>>>28),b=R+(w^A^x)+T[12]+3873151461&4294967295,R=w+(b<<11&4294967295|b>>>21),b=x+(R^w^A)+T[15]+530742520&4294967295,x=R+(b<<16&4294967295|b>>>16),b=A+(x^R^w)+T[2]+3299628645&4294967295,A=x+(b<<23&4294967295|b>>>9),b=w+(x^(A|~R))+T[0]+4096336452&4294967295,w=A+(b<<6&4294967295|b>>>26),b=R+(A^(w|~x))+T[7]+1126891415&4294967295,R=w+(b<<10&4294967295|b>>>22),b=x+(w^(R|~A))+T[14]+2878612391&4294967295,x=R+(b<<15&4294967295|b>>>17),b=A+(R^(x|~w))+T[5]+4237533241&4294967295,A=x+(b<<21&4294967295|b>>>11),b=w+(x^(A|~R))+T[12]+1700485571&4294967295,w=A+(b<<6&4294967295|b>>>26),b=R+(A^(w|~x))+T[3]+2399980690&4294967295,R=w+(b<<10&4294967295|b>>>22),b=x+(w^(R|~A))+T[10]+4293915773&4294967295,x=R+(b<<15&4294967295|b>>>17),b=A+(R^(x|~w))+T[1]+2240044497&4294967295,A=x+(b<<21&4294967295|b>>>11),b=w+(x^(A|~R))+T[8]+1873313359&4294967295,w=A+(b<<6&4294967295|b>>>26),b=R+(A^(w|~x))+T[15]+4264355552&4294967295,R=w+(b<<10&4294967295|b>>>22),b=x+(w^(R|~A))+T[6]+2734768916&4294967295,x=R+(b<<15&4294967295|b>>>17),b=A+(R^(x|~w))+T[13]+1309151649&4294967295,A=x+(b<<21&4294967295|b>>>11),b=w+(x^(A|~R))+T[4]+4149444226&4294967295,w=A+(b<<6&4294967295|b>>>26),b=R+(A^(w|~x))+T[11]+3174756917&4294967295,R=w+(b<<10&4294967295|b>>>22),b=x+(w^(R|~A))+T[2]+718787259&4294967295,x=R+(b<<15&4294967295|b>>>17),b=A+(R^(x|~w))+T[9]+3951481745&4294967295,k.g[0]=k.g[0]+w&4294967295,k.g[1]=k.g[1]+(x+(b<<21&4294967295|b>>>11))&4294967295,k.g[2]=k.g[2]+x&4294967295,k.g[3]=k.g[3]+R&4294967295}r.prototype.u=function(k,w){w===void 0&&(w=k.length);for(var A=w-this.blockSize,T=this.B,x=this.h,R=0;R<w;){if(x==0)for(;R<=A;)s(this,k,R),R+=this.blockSize;if(typeof k=="string"){for(;R<w;)if(T[x++]=k.charCodeAt(R++),x==this.blockSize){s(this,T),x=0;break}}else for(;R<w;)if(T[x++]=k[R++],x==this.blockSize){s(this,T),x=0;break}}this.h=x,this.o+=w},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var w=1;w<k.length-8;++w)k[w]=0;var A=8*this.o;for(w=k.length-8;w<k.length;++w)k[w]=A&255,A/=256;for(this.u(k),k=Array(16),w=A=0;4>w;++w)for(var T=0;32>T;T+=8)k[A++]=this.g[w]>>>T&255;return k};function i(k,w){var A=u;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=w(k)}function o(k,w){this.h=w;for(var A=[],T=!0,x=k.length-1;0<=x;x--){var R=k[x]|0;T&&R==w||(A[x]=R,T=!1)}this.g=A}var u={};function c(k){return-128<=k&&128>k?i(k,function(w){return new o([w|0],0>w?-1:0)}):new o([k|0],0>k?-1:0)}function d(k){if(isNaN(k)||!isFinite(k))return m;if(0>k)return L(d(-k));for(var w=[],A=1,T=0;k>=A;T++)w[T]=k/A|0,A*=4294967296;return new o(w,0)}function p(k,w){if(k.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k.charAt(0)=="-")return L(p(k.substring(1),w));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=d(Math.pow(w,8)),T=m,x=0;x<k.length;x+=8){var R=Math.min(8,k.length-x),b=parseInt(k.substring(x,x+R),w);8>R?(R=d(Math.pow(w,R)),T=T.j(R).add(d(b))):(T=T.j(A),T=T.add(d(b)))}return T}var m=c(0),g=c(1),S=c(16777216);t=o.prototype,t.m=function(){if(P(this))return-L(this).m();for(var k=0,w=1,A=0;A<this.g.length;A++){var T=this.i(A);k+=(0<=T?T:4294967296+T)*w,w*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(I(this))return"0";if(P(this))return"-"+L(this).toString(k);for(var w=d(Math.pow(k,6)),A=this,T="";;){var x=D(A,w).g;A=E(A,x.j(w));var R=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=x,I(A))return R+T;for(;6>R.length;)R="0"+R;T=R+T}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function I(k){if(k.h!=0)return!1;for(var w=0;w<k.g.length;w++)if(k.g[w]!=0)return!1;return!0}function P(k){return k.h==-1}t.l=function(k){return k=E(this,k),P(k)?-1:I(k)?0:1};function L(k){for(var w=k.g.length,A=[],T=0;T<w;T++)A[T]=~k.g[T];return new o(A,~k.h).add(g)}t.abs=function(){return P(this)?L(this):this},t.add=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],T=0,x=0;x<=w;x++){var R=T+(this.i(x)&65535)+(k.i(x)&65535),b=(R>>>16)+(this.i(x)>>>16)+(k.i(x)>>>16);T=b>>>16,R&=65535,b&=65535,A[x]=b<<16|R}return new o(A,A[A.length-1]&-2147483648?-1:0)};function E(k,w){return k.add(L(w))}t.j=function(k){if(I(this)||I(k))return m;if(P(this))return P(k)?L(this).j(L(k)):L(L(this).j(k));if(P(k))return L(this.j(L(k)));if(0>this.l(S)&&0>k.l(S))return d(this.m()*k.m());for(var w=this.g.length+k.g.length,A=[],T=0;T<2*w;T++)A[T]=0;for(T=0;T<this.g.length;T++)for(var x=0;x<k.g.length;x++){var R=this.i(T)>>>16,b=this.i(T)&65535,Se=k.i(x)>>>16,me=k.i(x)&65535;A[2*T+2*x]+=b*me,_(A,2*T+2*x),A[2*T+2*x+1]+=R*me,_(A,2*T+2*x+1),A[2*T+2*x+1]+=b*Se,_(A,2*T+2*x+1),A[2*T+2*x+2]+=R*Se,_(A,2*T+2*x+2)}for(T=0;T<w;T++)A[T]=A[2*T+1]<<16|A[2*T];for(T=w;T<2*w;T++)A[T]=0;return new o(A,0)};function _(k,w){for(;(k[w]&65535)!=k[w];)k[w+1]+=k[w]>>>16,k[w]&=65535,w++}function C(k,w){this.g=k,this.h=w}function D(k,w){if(I(w))throw Error("division by zero");if(I(k))return new C(m,m);if(P(k))return w=D(L(k),w),new C(L(w.g),L(w.h));if(P(w))return w=D(k,L(w)),new C(L(w.g),w.h);if(30<k.g.length){if(P(k)||P(w))throw Error("slowDivide_ only works with positive integers.");for(var A=g,T=w;0>=T.l(k);)A=F(A),T=F(T);var x=j(A,1),R=j(T,1);for(T=j(T,2),A=j(A,2);!I(T);){var b=R.add(T);0>=b.l(k)&&(x=x.add(A),R=b),T=j(T,1),A=j(A,1)}return w=E(k,x.j(w)),new C(x,w)}for(x=m;0<=k.l(w);){for(A=Math.max(1,Math.floor(k.m()/w.m())),T=Math.ceil(Math.log(A)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),R=d(A),b=R.j(w);P(b)||0<b.l(k);)A-=T,R=d(A),b=R.j(w);I(R)&&(R=g),x=x.add(R),k=E(k,b)}return new C(x,k)}t.A=function(k){return D(this,k).h},t.and=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],T=0;T<w;T++)A[T]=this.i(T)&k.i(T);return new o(A,this.h&k.h)},t.or=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],T=0;T<w;T++)A[T]=this.i(T)|k.i(T);return new o(A,this.h|k.h)},t.xor=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],T=0;T<w;T++)A[T]=this.i(T)^k.i(T);return new o(A,this.h^k.h)};function F(k){for(var w=k.g.length+1,A=[],T=0;T<w;T++)A[T]=k.i(T)<<1|k.i(T-1)>>>31;return new o(A,k.h)}function j(k,w){var A=w>>5;w%=32;for(var T=k.g.length-A,x=[],R=0;R<T;R++)x[R]=0<w?k.i(R+A)>>>w|k.i(R+A+1)<<32-w:k.i(R+A);return new o(x,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,IE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,Ls=o}).apply(typeof ov<"u"?ov:typeof self<"u"?self:typeof window<"u"?window:{});var Bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CE,Oa,AE,cc,cp,bE,kE,xE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,a,h){return l==Array.prototype||l==Object.prototype||(l[a]=h.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bu=="object"&&Bu];for(var a=0;a<l.length;++a){var h=l[a];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(l,a){if(a)e:{var h=r;l=l.split(".");for(var f=0;f<l.length-1;f++){var y=l[f];if(!(y in h))break e;h=h[y]}l=l[l.length-1],f=h[l],a=a(f),a!=f&&a!=null&&e(h,l,{configurable:!0,writable:!0,value:a})}}function i(l,a){l instanceof String&&(l+="");var h=0,f=!1,y={next:function(){if(!f&&h<l.length){var N=h++;return{value:a(N,l[N]),done:!1}}return f=!0,{done:!0,value:void 0}}};return y[Symbol.iterator]=function(){return y},y}s("Array.prototype.values",function(l){return l||function(){return i(this,function(a,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(l){var a=typeof l;return a=a!="object"?a:l?Array.isArray(l)?"array":a:"null",a=="array"||a=="object"&&typeof l.length=="number"}function d(l){var a=typeof l;return a=="object"&&l!=null||a=="function"}function p(l,a,h){return l.call.apply(l.bind,arguments)}function m(l,a,h){if(!l)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(y,f),l.apply(a,y)}}return function(){return l.apply(a,arguments)}}function g(l,a,h){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,g.apply(null,arguments)}function S(l,a){var h=Array.prototype.slice.call(arguments,1);return function(){var f=h.slice();return f.push.apply(f,arguments),l.apply(this,f)}}function I(l,a){function h(){}h.prototype=a.prototype,l.aa=a.prototype,l.prototype=new h,l.prototype.constructor=l,l.Qb=function(f,y,N){for(var O=Array(arguments.length-2),W=2;W<arguments.length;W++)O[W-2]=arguments[W];return a.prototype[y].apply(f,O)}}function P(l){const a=l.length;if(0<a){const h=Array(a);for(let f=0;f<a;f++)h[f]=l[f];return h}return[]}function L(l,a){for(let h=1;h<arguments.length;h++){const f=arguments[h];if(c(f)){const y=l.length||0,N=f.length||0;l.length=y+N;for(let O=0;O<N;O++)l[y+O]=f[O]}else l.push(f)}}class E{constructor(a,h){this.i=a,this.j=h,this.h=0,this.g=null}get(){let a;return 0<this.h?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i(),a}}function _(l){return/^[\s\xa0]*$/.test(l)}function C(){var l=u.navigator;return l&&(l=l.userAgent)?l:""}function D(l){return D[" "](l),l}D[" "]=function(){};var F=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function j(l,a,h){for(const f in l)a.call(h,l[f],f,l)}function k(l,a){for(const h in l)a.call(void 0,l[h],h,l)}function w(l){const a={};for(const h in l)a[h]=l[h];return a}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,a){let h,f;for(let y=1;y<arguments.length;y++){f=arguments[y];for(h in f)l[h]=f[h];for(let N=0;N<A.length;N++)h=A[N],Object.prototype.hasOwnProperty.call(f,h)&&(l[h]=f[h])}}function x(l){var a=1;l=l.split(":");const h=[];for(;0<a&&l.length;)h.push(l.shift()),a--;return l.length&&h.push(l.join(":")),h}function R(l){u.setTimeout(()=>{throw l},0)}function b(){var l=Z;let a=null;return l.g&&(a=l.g,l.g=l.g.next,l.g||(l.h=null),a.next=null),a}class Se{constructor(){this.h=this.g=null}add(a,h){const f=me.get();f.set(a,h),this.h?this.h.next=f:this.g=f,this.h=f}}var me=new E(()=>new ke,l=>l.reset());class ke{constructor(){this.next=this.g=this.h=null}set(a,h){this.h=a,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let qe,H=!1,Z=new Se,se=()=>{const l=u.Promise.resolve(void 0);qe=()=>{l.then(Re)}};var Re=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(h){R(h)}var a=me;a.j(l),100>a.h&&(a.h++,l.next=a.g,a.g=l)}H=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(l,a){this.type=l,this.g=this.target=a,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var Dn=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var l=!1,a=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const h=()=>{};u.addEventListener("test",h,a),u.removeEventListener("test",h,a)}catch{}return l}();function vn(l,a){if(xe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var h=this.type=l.type,f=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=a,a=l.relatedTarget){if(F){e:{try{D(a.nodeName);var y=!0;break e}catch{}y=!1}y||(a=null)}}else h=="mouseover"?a=l.fromElement:h=="mouseout"&&(a=l.toElement);this.relatedTarget=a,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ot[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&vn.aa.h.call(this)}}I(vn,xe);var Ot={2:"touch",3:"pen",4:"mouse"};vn.prototype.h=function(){vn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var nn="closure_listenable_"+(1e6*Math.random()|0),Ys=0;function Ql(l,a,h,f,y){this.listener=l,this.proxy=null,this.src=a,this.type=h,this.capture=!!f,this.ha=y,this.key=++Ys,this.da=this.fa=!1}function _r(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Xs(l){this.src=l,this.g={},this.h=0}Xs.prototype.add=function(l,a,h,f,y){var N=l.toString();l=this.g[N],l||(l=this.g[N]=[],this.h++);var O=Qi(l,a,f,y);return-1<O?(a=l[O],h||(a.fa=!1)):(a=new Ql(a,this.src,N,!!f,y),a.fa=h,l.push(a)),a};function Zr(l,a){var h=a.type;if(h in l.g){var f=l.g[h],y=Array.prototype.indexOf.call(f,a,void 0),N;(N=0<=y)&&Array.prototype.splice.call(f,y,1),N&&(_r(a),l.g[h].length==0&&(delete l.g[h],l.h--))}}function Qi(l,a,h,f){for(var y=0;y<l.length;++y){var N=l[y];if(!N.da&&N.listener==a&&N.capture==!!h&&N.ha==f)return y}return-1}var wr="closure_lm_"+(1e6*Math.random()|0),Er={};function ra(l,a,h,f,y){if(Array.isArray(a)){for(var N=0;N<a.length;N++)ra(l,a[N],h,f,y);return null}return h=Xl(h),l&&l[nn]?l.K(a,h,d(f)?!!f.capture:!1,y):Bh(l,a,h,!1,f,y)}function Bh(l,a,h,f,y,N){if(!a)throw Error("Invalid event type");var O=d(y)?!!y.capture:!!y,W=ia(l);if(W||(l[wr]=W=new Xs(l)),h=W.add(a,h,f,O,N),h.proxy)return h;if(f=Yl(),h.proxy=f,f.src=l,f.listener=h,l.addEventListener)Dn||(y=O),y===void 0&&(y=!1),l.addEventListener(a.toString(),f,y);else if(l.attachEvent)l.attachEvent(sa(a.toString()),f);else if(l.addListener&&l.removeListener)l.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return h}function Yl(){function l(h){return a.call(l.src,l.listener,h)}const a=Lt;return l}function Yi(l,a,h,f,y){if(Array.isArray(a))for(var N=0;N<a.length;N++)Yi(l,a[N],h,f,y);else f=d(f)?!!f.capture:!!f,h=Xl(h),l&&l[nn]?(l=l.i,a=String(a).toString(),a in l.g&&(N=l.g[a],h=Qi(N,h,f,y),-1<h&&(_r(N[h]),Array.prototype.splice.call(N,h,1),N.length==0&&(delete l.g[a],l.h--)))):l&&(l=ia(l))&&(a=l.g[a.toString()],l=-1,a&&(l=Qi(a,h,f,y)),(h=-1<l?a[l]:null)&&es(h))}function es(l){if(typeof l!="number"&&l&&!l.da){var a=l.src;if(a&&a[nn])Zr(a.i,l);else{var h=l.type,f=l.proxy;a.removeEventListener?a.removeEventListener(h,f,l.capture):a.detachEvent?a.detachEvent(sa(h),f):a.addListener&&a.removeListener&&a.removeListener(f),(h=ia(a))?(Zr(h,l),h.h==0&&(h.src=null,a[wr]=null)):_r(l)}}}function sa(l){return l in Er?Er[l]:Er[l]="on"+l}function Lt(l,a){if(l.da)l=!0;else{a=new vn(a,this);var h=l.listener,f=l.ha||l.src;l.fa&&es(l),l=h.call(f,a)}return l}function ia(l){return l=l[wr],l instanceof Xs?l:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xl(l){return typeof l=="function"?l:(l[Et]||(l[Et]=function(a){return l.handleEvent(a)}),l[Et])}function Fe(){le.call(this),this.i=new Xs(this),this.M=this,this.F=null}I(Fe,le),Fe.prototype[nn]=!0,Fe.prototype.removeEventListener=function(l,a,h,f){Yi(this,l,a,h,f)};function ft(l,a){var h,f=l.F;if(f)for(h=[];f;f=f.F)h.push(f);if(l=l.M,f=a.type||a,typeof a=="string")a=new xe(a,l);else if(a instanceof xe)a.target=a.target||l;else{var y=a;a=new xe(f,l),T(a,y)}if(y=!0,h)for(var N=h.length-1;0<=N;N--){var O=a.g=h[N];y=rn(O,f,!0,a)&&y}if(O=a.g=l,y=rn(O,f,!0,a)&&y,y=rn(O,f,!1,a)&&y,h)for(N=0;N<h.length;N++)O=a.g=h[N],y=rn(O,f,!1,a)&&y}Fe.prototype.N=function(){if(Fe.aa.N.call(this),this.i){var l=this.i,a;for(a in l.g){for(var h=l.g[a],f=0;f<h.length;f++)_r(h[f]);delete l.g[a],l.h--}}this.F=null},Fe.prototype.K=function(l,a,h,f){return this.i.add(String(l),a,!1,h,f)},Fe.prototype.L=function(l,a,h,f){return this.i.add(String(l),a,!0,h,f)};function rn(l,a,h,f){if(a=l.i.g[String(a)],!a)return!0;a=a.concat();for(var y=!0,N=0;N<a.length;++N){var O=a[N];if(O&&!O.da&&O.capture==h){var W=O.listener,q=O.ha||O.src;O.fa&&Zr(l.i,O),y=W.call(q,f)!==!1&&y}}return y&&!f.defaultPrevented}function Jl(l,a,h){if(typeof l=="function")h&&(l=g(l,h));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(a)?-1:u.setTimeout(l,a||0)}function Ue(l){l.g=Jl(()=>{l.g=null,l.i&&(l.i=!1,Ue(l))},l.l);const a=l.h;l.h=null,l.m.apply(null,a)}class zh extends le{constructor(a,h){super(),this.m=a,this.l=h,this.h=null,this.i=!1,this.g=null}j(a){this.h=arguments,this.g?this.i=!0:Ue(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function de(l){le.call(this),this.h=l,this.g={}}I(de,le);var Zl=[];function Ee(l){j(l.g,function(a,h){this.g.hasOwnProperty(h)&&es(a)},l),l.g={}}de.prototype.N=function(){de.aa.N.call(this),Ee(this)},de.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oa=u.JSON.stringify,_n=u.JSON.parse,eu=class{stringify(l){return u.JSON.stringify(l,void 0)}parse(l){return u.JSON.parse(l,void 0)}};function sn(){}sn.prototype.h=null;function aa(l){return l.h||(l.h=l.i())}function wn(){}var ts={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tr(){xe.call(this,"d")}I(Tr,xe);function la(){xe.call(this,"c")}I(la,xe);var on={},tu=null;function Mn(){return tu=tu||new Fe}on.La="serverreachability";function nu(l){xe.call(this,on.La,l)}I(nu,xe);function ns(l){const a=Mn();ft(a,new nu(a))}on.STAT_EVENT="statevent";function er(l,a){xe.call(this,on.STAT_EVENT,l),this.stat=a}I(er,xe);function lt(l){const a=Mn();ft(a,new er(a,l))}on.Ma="timingevent";function U(l,a){xe.call(this,on.Ma,l),this.size=a}I(U,xe);function ge(l,a){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){l()},a)}function ie(){this.g=!0}ie.prototype.xa=function(){this.g=!1};function ru(l,a,h,f,y,N){l.info(function(){if(l.g)if(N)for(var O="",W=N.split("&"),q=0;q<W.length;q++){var V=W[q].split("=");if(1<V.length){var B=V[0];V=V[1];var G=B.split("_");O=2<=G.length&&G[1]=="type"?O+(B+"="+V+"&"):O+(B+"=redacted&")}}else O=null;else O=N;return"XMLHTTP REQ ("+f+") [attempt "+y+"]: "+a+`
`+h+`
`+O})}function su(l,a,h,f,y,N,O){l.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+y+"]: "+a+`
`+h+`
`+N+" "+O})}function Sr(l,a,h,f){l.info(function(){return"XMLHTTP TEXT ("+a+"): "+ou(l,h)+(f?" "+f:"")})}function iu(l,a){l.info(function(){return"TIMEOUT: "+a})}ie.prototype.info=function(){};function ou(l,a){if(!l.g)return a;if(!a)return null;try{var h=JSON.parse(a);if(h){for(l=0;l<h.length;l++)if(Array.isArray(h[l])){var f=h[l];if(!(2>f.length)){var y=f[1];if(Array.isArray(y)&&!(1>y.length)){var N=y[0];if(N!="noop"&&N!="stop"&&N!="close")for(var O=1;O<y.length;O++)y[O]=""}}}}return oa(h)}catch{return a}}var On={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},rs;function ss(){}I(ss,sn),ss.prototype.g=function(){return new XMLHttpRequest},ss.prototype.i=function(){return{}},rs=new ss;function an(l,a,h,f){this.j=l,this.i=a,this.l=h,this.R=f||1,this.U=new de(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ln}function ln(){this.i=null,this.g="",this.h=!1}var ua={},zt={};function Js(l,a,h){l.L=1,l.v=ri(un(a)),l.m=h,l.P=!0,Xi(l,null)}function Xi(l,a){l.F=Date.now(),Ir(l),l.A=un(l.v);var h=l.A,f=l.R;Array.isArray(f)||(f=[String(f)]),eo(h.i,"t",f),l.C=0,h=l.j.J,l.h=new ln,l.g=ga(l.j,h?a:null,!l.m),0<l.O&&(l.M=new zh(g(l.Y,l,l.g),l.O)),a=l.U,h=l.g,f=l.ca;var y="readystatechange";Array.isArray(y)||(y&&(Zl[0]=y.toString()),y=Zl);for(var N=0;N<y.length;N++){var O=ra(h,y[N],f||a.handleEvent,!1,a.h||a);if(!O)break;a.g[O.key]=O}a=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),a["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,a)):(l.u="GET",l.g.ea(l.A,l.u,null,a)),ns(),ru(l.i,l.u,l.A,l.l,l.R,l.m)}an.prototype.ca=function(l){l=l.target;const a=this.M;a&&Tn(l)==3?a.j():this.Y(l)},an.prototype.Y=function(l){try{if(l==this.g)e:{const G=Tn(this.g);var a=this.g.Ba();const ne=this.g.Z();if(!(3>G)&&(G!=3||this.g&&(this.h.h||this.g.oa()||Vn(this.g)))){this.J||G!=4||a==7||(a==8||0>=ne?ns(3):ns(2)),Ht(this);var h=this.g.Z();this.X=h;t:if(Ji(this)){var f=Vn(this.g);l="";var y=f.length,N=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wt(this),Cr(this);var O="";break t}this.h.i=new u.TextDecoder}for(a=0;a<y;a++)this.h.h=!0,l+=this.h.i.decode(f[a],{stream:!(N&&a==y-1)});f.length=0,this.h.g+=l,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=h==200,su(this.i,this.u,this.A,this.l,this.R,G,h),this.o){if(this.T&&!this.K){t:{if(this.g){var W,q=this.g;if((W=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(W)){var V=W;break t}}V=null}if(h=V)Sr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pe(this,h);else{this.o=!1,this.s=3,lt(12),Wt(this),Cr(this);break e}}if(this.P){h=!0;let te;for(;!this.J&&this.C<O.length;)if(te=Wh(this,O),te==zt){G==4&&(this.s=4,lt(14),h=!1),Sr(this.i,this.l,null,"[Incomplete Response]");break}else if(te==ua){this.s=4,lt(15),Sr(this.i,this.l,O,"[Invalid Chunk]"),h=!1;break}else Sr(this.i,this.l,te,null),Pe(this,te);if(Ji(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),G!=4||O.length!=0||this.h.h||(this.s=1,lt(16),h=!1),this.o=this.o&&h,!h)Sr(this.i,this.l,O,"[Invalid Chunked Response]"),Wt(this),Cr(this);else if(0<O.length&&!this.W){this.W=!0;var B=this.j;B.g==this&&B.ba&&!B.M&&(B.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Sn(B),B.M=!0,lt(11))}}else Sr(this.i,this.l,O,null),Pe(this,O);G==4&&Wt(this),this.o&&!this.J&&(G==4?yu(this.j,this):(this.o=!1,Ir(this)))}else St(this.g),h==400&&0<O.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),Wt(this),Cr(this)}}}catch{}finally{}};function Ji(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Wh(l,a){var h=l.C,f=a.indexOf(`
`,h);return f==-1?zt:(h=Number(a.substring(h,f)),isNaN(h)?ua:(f+=1,f+h>a.length?zt:(a=a.slice(f,f+h),l.C=f+h,a)))}an.prototype.cancel=function(){this.J=!0,Wt(this)};function Ir(l){l.S=Date.now()+l.I,Ln(l,l.I)}function Ln(l,a){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ge(g(l.ba,l),a)}function Ht(l){l.B&&(u.clearTimeout(l.B),l.B=null)}an.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(iu(this.i,this.A),this.L!=2&&(ns(),lt(17)),Wt(this),this.s=2,Cr(this)):Ln(this,this.S-l)};function Cr(l){l.j.G==0||l.J||yu(l.j,l)}function Wt(l){Ht(l);var a=l.M;a&&typeof a.ma=="function"&&a.ma(),l.M=null,Ee(l.U),l.g&&(a=l.g,l.g=null,a.abort(),a.ma())}function Pe(l,a){try{var h=l.j;if(h.G!=0&&(h.g==l||is(h.h,l))){if(!l.K&&is(h.h,l)&&h.G==3){try{var f=h.Da.g.parse(a)}catch{f=null}if(Array.isArray(f)&&f.length==3){var y=f;if(y[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<l.F)jn(h),fs(h);else break e;Gt(h),lt(18)}}else h.za=y[1],0<h.za-h.T&&37500>y[2]&&h.F&&h.v==0&&!h.C&&(h.C=ge(g(h.Za,h),6e3));if(1>=ca(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Rr(h,11)}else if((l.K||h.g==l)&&jn(h),!_(a))for(y=h.Da.g.parse(a),a=0;a<y.length;a++){let V=y[a];if(h.T=V[0],V=V[1],h.G==2)if(V[0]=="c"){h.K=V[1],h.ia=V[2];const B=V[3];B!=null&&(h.la=B,h.j.info("VER="+h.la));const G=V[4];G!=null&&(h.Aa=G,h.j.info("SVER="+h.Aa));const ne=V[5];ne!=null&&typeof ne=="number"&&0<ne&&(f=1.5*ne,h.L=f,h.j.info("backChannelRequestTimeoutMs_="+f)),f=h;const te=l.g;if(te){const Me=te.g?te.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Me){var N=f.h;N.g||Me.indexOf("spdy")==-1&&Me.indexOf("quic")==-1&&Me.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(En(N,N.h),N.h=null))}if(f.D){const Ge=te.g?te.g.getResponseHeader("X-HTTP-Session-Id"):null;Ge&&(f.ya=Ge,Ae(f.I,f.D,Ge))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-l.F,h.j.info("Handshake RTT: "+h.R+"ms")),f=h;var O=l;if(f.qa=_u(f,f.J?f.ia:null,f.W),O.K){Ar(f.h,O);var W=O,q=f.L;q&&(W.I=q),W.B&&(Ht(W),Ir(W)),f.g=O}else pi(f);0<h.i.length&&Fn(h)}else V[0]!="stop"&&V[0]!="close"||Rr(h,7);else h.G==3&&(V[0]=="stop"||V[0]=="close"?V[0]=="stop"?Rr(h,7):Nr(h):V[0]!="noop"&&h.l&&h.l.ta(V),h.v=0)}}ns(4)}catch{}}var De=class{constructor(l,a){this.g=l,this.map=a}};function Zs(l){this.l=l||10,u.PerformanceNavigationTiming?(l=u.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Kt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ca(l){return l.h?1:l.g?l.g.size:0}function is(l,a){return l.h?l.h==a:l.g?l.g.has(a):!1}function En(l,a){l.g?l.g.add(a):l.h=a}function Ar(l,a){l.h&&l.h==a?l.h=null:l.g&&l.g.has(a)&&l.g.delete(a)}Zs.prototype.cancel=function(){if(this.i=br(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function br(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let a=l.i;for(const h of l.g.values())a=a.concat(h.D);return a}return P(l.i)}function os(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var a=[],h=l.length,f=0;f<h;f++)a.push(l[f]);return a}a=[],h=0;for(f in l)a[h++]=l[f];return a}function as(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var a=[];l=l.length;for(var h=0;h<l;h++)a.push(h);return a}a=[],h=0;for(const f in l)a[h++]=f;return a}}}function ha(l,a){if(l.forEach&&typeof l.forEach=="function")l.forEach(a,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,a,void 0);else for(var h=as(l),f=os(l),y=f.length,N=0;N<y;N++)a.call(void 0,f[N],h&&h[N],l)}var Vt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qt(l,a){if(l){l=l.split("&");for(var h=0;h<l.length;h++){var f=l[h].indexOf("="),y=null;if(0<=f){var N=l[h].substring(0,f);y=l[h].substring(f+1)}else N=l[h];a(N,y?decodeURIComponent(y.replace(/\+/g," ")):"")}}}function pt(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof pt){this.h=l.h,ei(this,l.j),this.o=l.o,this.g=l.g,ti(this,l.s),this.l=l.l;var a=l.i,h=new ii;h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),ni(this,h),this.m=l.m}else l&&(a=String(l).match(Vt))?(this.h=!1,ei(this,a[1]||"",!0),this.o=ls(a[2]||""),this.g=ls(a[3]||"",!0),ti(this,a[4]),this.l=ls(a[5]||"",!0),ni(this,a[6]||"",!0),this.m=ls(a[7]||"")):(this.h=!1,this.i=new ii(null,this.h))}pt.prototype.toString=function(){var l=[],a=this.j;a&&l.push(us(a,si,!0),":");var h=this.g;return(h||a=="file")&&(l.push("//"),(a=this.o)&&l.push(us(a,si,!0),"@"),l.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&l.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&l.push("/"),l.push(us(h,h.charAt(0)=="/"?Kh:lu,!0))),(h=this.i.toString())&&l.push("?",h),(h=this.m)&&l.push("#",us(h,Gh)),l.join("")};function un(l){return new pt(l)}function ei(l,a,h){l.j=h?ls(a,!0):a,l.j&&(l.j=l.j.replace(/:$/,""))}function ti(l,a){if(a){if(a=Number(a),isNaN(a)||0>a)throw Error("Bad port number "+a);l.s=a}else l.s=null}function ni(l,a,h){a instanceof ii?(l.i=a,oi(l.i,l.h)):(h||(a=us(a,qh)),l.i=new ii(a,l.h))}function Ae(l,a,h){l.i.set(a,h)}function ri(l){return Ae(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ls(l,a){return l?a?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function us(l,a,h){return typeof l=="string"?(l=encodeURI(l).replace(a,au),h&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function au(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var si=/[#\/\?@]/g,lu=/[#\?:]/g,Kh=/[#\?]/g,qh=/[#\?@]/g,Gh=/#/g;function ii(l,a){this.h=this.g=null,this.i=l||null,this.j=!!a}function tr(l){l.g||(l.g=new Map,l.h=0,l.i&&qt(l.i,function(a,h){l.add(decodeURIComponent(a.replace(/\+/g," ")),h)}))}t=ii.prototype,t.add=function(l,a){tr(this),this.i=null,l=kr(this,l);var h=this.g.get(l);return h||this.g.set(l,h=[]),h.push(a),this.h+=1,this};function uu(l,a){tr(l),a=kr(l,a),l.g.has(a)&&(l.i=null,l.h-=l.g.get(a).length,l.g.delete(a))}function Zi(l,a){return tr(l),a=kr(l,a),l.g.has(a)}t.forEach=function(l,a){tr(this),this.g.forEach(function(h,f){h.forEach(function(y){l.call(a,y,f,this)},this)},this)},t.na=function(){tr(this);const l=Array.from(this.g.values()),a=Array.from(this.g.keys()),h=[];for(let f=0;f<a.length;f++){const y=l[f];for(let N=0;N<y.length;N++)h.push(a[f])}return h},t.V=function(l){tr(this);let a=[];if(typeof l=="string")Zi(this,l)&&(a=a.concat(this.g.get(kr(this,l))));else{l=Array.from(this.g.values());for(let h=0;h<l.length;h++)a=a.concat(l[h])}return a},t.set=function(l,a){return tr(this),this.i=null,l=kr(this,l),Zi(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[a]),this.h+=1,this},t.get=function(l,a){return l?(l=this.V(l),0<l.length?String(l[0]):a):a};function eo(l,a,h){uu(l,a),0<h.length&&(l.i=null,l.g.set(kr(l,a),P(h)),l.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],a=Array.from(this.g.keys());for(var h=0;h<a.length;h++){var f=a[h];const N=encodeURIComponent(String(f)),O=this.V(f);for(f=0;f<O.length;f++){var y=N;O[f]!==""&&(y+="="+encodeURIComponent(String(O[f]))),l.push(y)}}return this.i=l.join("&")};function kr(l,a){return a=String(a),l.j&&(a=a.toLowerCase()),a}function oi(l,a){a&&!l.j&&(tr(l),l.i=null,l.g.forEach(function(h,f){var y=f.toLowerCase();f!=y&&(uu(this,f),eo(this,y,h))},l)),l.j=a}function Qh(l,a){const h=new ie;if(u.Image){const f=new Image;f.onload=S(Tt,h,"TestLoadImage: loaded",!0,a,f),f.onerror=S(Tt,h,"TestLoadImage: error",!1,a,f),f.onabort=S(Tt,h,"TestLoadImage: abort",!1,a,f),f.ontimeout=S(Tt,h,"TestLoadImage: timeout",!1,a,f),u.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=l}else a(!1)}function Yh(l,a){const h=new ie,f=new AbortController,y=setTimeout(()=>{f.abort(),Tt(h,"TestPingServer: timeout",!1,a)},1e4);fetch(l,{signal:f.signal}).then(N=>{clearTimeout(y),N.ok?Tt(h,"TestPingServer: ok",!0,a):Tt(h,"TestPingServer: server error",!1,a)}).catch(()=>{clearTimeout(y),Tt(h,"TestPingServer: error",!1,a)})}function Tt(l,a,h,f,y){try{y&&(y.onload=null,y.onerror=null,y.onabort=null,y.ontimeout=null),f(h)}catch{}}function cu(){this.g=new eu}function to(l,a,h){const f=h||"";try{ha(l,function(y,N){let O=y;d(y)&&(O=oa(y)),a.push(f+N+"="+encodeURIComponent(O))})}catch(y){throw a.push(f+"type="+encodeURIComponent("_badmap")),y}}function ai(l){this.l=l.Ub||null,this.j=l.eb||!1}I(ai,sn),ai.prototype.g=function(){return new li(this.l,this.j)},ai.prototype.i=function(l){return function(){return l}}({});function li(l,a){Fe.call(this),this.D=l,this.o=a,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(li,Fe),t=li.prototype,t.open=function(l,a){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=a,this.readyState=1,cs(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const a={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(a.body=l),(this.D||u).fetch(new Request(this.A,a)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ui(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,cs(this)),this.g&&(this.readyState=3,cs(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;da(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function da(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var a=l.value?l.value:new Uint8Array(0);(a=this.v.decode(a,{stream:!l.done}))&&(this.response=this.responseText+=a)}l.done?ui(this):cs(this),this.readyState==3&&da(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,ui(this))},t.Qa=function(l){this.g&&(this.response=l,ui(this))},t.ga=function(){this.g&&ui(this)};function ui(l){l.readyState=4,l.l=null,l.j=null,l.v=null,cs(l)}t.setRequestHeader=function(l,a){this.u.append(l,a)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],a=this.h.entries();for(var h=a.next();!h.done;)h=h.value,l.push(h[0]+": "+h[1]),h=a.next();return l.join(`\r
`)};function cs(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function hu(l){let a="";return j(l,function(h,f){a+=f,a+=":",a+=h,a+=`\r
`}),a}function no(l,a,h){e:{for(f in h){var f=!1;break e}f=!0}f||(h=hu(h),typeof l=="string"?h!=null&&encodeURIComponent(String(h)):Ae(l,a,h))}function be(l){Fe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(be,Fe);var du=/^https?$/i,fu=["POST","PUT"];t=be.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,a,h,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);a=a?a.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rs.g(),this.v=this.o?aa(this.o):aa(rs),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(a,String(l),!0),this.B=!1}catch(N){fa(this,N);return}if(l=h||"",h=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var y in f)h.set(y,f[y]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(const N of f.keys())h.set(N,f.get(N));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(h.keys()).find(N=>N.toLowerCase()=="content-type"),y=u.FormData&&l instanceof u.FormData,!(0<=Array.prototype.indexOf.call(fu,a,void 0))||f||y||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,O]of h)this.g.setRequestHeader(N,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pa(this),this.u=!0,this.g.send(l),this.u=!1}catch(N){fa(this,N)}};function fa(l,a){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=a,l.m=5,hs(l),ci(l)}function hs(l){l.A||(l.A=!0,ft(l,"complete"),ft(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ft(this,"complete"),ft(this,"abort"),ci(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ci(this,!0)),be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ds(this):this.bb())},t.bb=function(){ds(this)};function ds(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Tn(l)!=4||l.Z()!=2)){if(l.u&&Tn(l)==4)Jl(l.Ea,0,l);else if(ft(l,"readystatechange"),Tn(l)==4){l.h=!1;try{const O=l.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break e;default:a=!1}var h;if(!(h=a)){var f;if(f=O===0){var y=String(l.D).match(Vt)[1]||null;!y&&u.self&&u.self.location&&(y=u.self.location.protocol.slice(0,-1)),f=!du.test(y?y.toLowerCase():"")}h=f}if(h)ft(l,"complete"),ft(l,"success");else{l.m=6;try{var N=2<Tn(l)?l.g.statusText:""}catch{N=""}l.l=N+" ["+l.Z()+"]",hs(l)}}finally{ci(l)}}}}function ci(l,a){if(l.g){pa(l);const h=l.g,f=l.v[0]?()=>{}:null;l.g=null,l.v=null,a||ft(l,"ready");try{h.onreadystatechange=f}catch{}}}function pa(l){l.I&&(u.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Tn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var a=this.g.responseText;return l&&a.indexOf(l)==0&&(a=a.substring(l.length)),_n(a)}};function Vn(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function St(l){const a={};l=(l.g&&2<=Tn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<l.length;f++){if(_(l[f]))continue;var h=x(l[f]);const y=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const N=a[y]||[];a[y]=N,N.push(h)}k(a,function(f){return f.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xr(l,a,h){return h&&h.internalChannelParams&&h.internalChannelParams[l]||a}function hi(l){this.Aa=0,this.i=[],this.j=new ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xr("baseRetryDelayMs",5e3,l),this.cb=xr("retryDelaySeedMs",1e4,l),this.Wa=xr("forwardChannelMaxRetries",2,l),this.wa=xr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Zs(l&&l.concurrentRequestLimit),this.Da=new cu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hi.prototype,t.la=8,t.G=1,t.connect=function(l,a,h,f){lt(0),this.W=l,this.H=a||{},h&&f!==void 0&&(this.H.OSID=h,this.H.OAID=f),this.F=this.X,this.I=_u(this,null,this.W),Fn(this)};function Nr(l){if(di(l),l.G==3){var a=l.U++,h=un(l.I);if(Ae(h,"SID",l.K),Ae(h,"RID",a),Ae(h,"TYPE","terminate"),fi(l,h),a=new an(l,l.j,a),a.L=2,a.v=ri(un(h)),h=!1,u.navigator&&u.navigator.sendBeacon)try{h=u.navigator.sendBeacon(a.v.toString(),"")}catch{}!h&&u.Image&&(new Image().src=a.v,h=!0),h||(a.g=ga(a.j,null),a.g.ea(a.v)),a.F=Date.now(),Ir(a)}mi(l)}function fs(l){l.g&&(Sn(l),l.g.cancel(),l.g=null)}function di(l){fs(l),l.u&&(u.clearTimeout(l.u),l.u=null),jn(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&u.clearTimeout(l.s),l.s=null)}function Fn(l){if(!Kt(l.h)&&!l.s){l.s=!0;var a=l.Ga;qe||se(),H||(qe(),H=!0),Z.add(a,l),l.B=0}}function pu(l,a){return ca(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=a.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ge(g(l.Ga,l,a),vu(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const y=new an(this,this.j,l);let N=this.o;if(this.S&&(N?(N=w(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(y.H=N,N=null),this.P)e:{for(var a=0,h=0;h<this.i.length;h++){t:{var f=this.i[h];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(a+=f,4096<a){a=h;break e}if(a===4096||h===this.i.length-1){a=h+1;break e}}a=1e3}else a=1e3;a=ma(this,y,a),h=un(this.I),Ae(h,"RID",l),Ae(h,"CVER",22),this.D&&Ae(h,"X-HTTP-Session-Id",this.D),fi(this,h),N&&(this.O?a="headers="+encodeURIComponent(String(hu(N)))+"&"+a:this.m&&no(h,this.m,N)),En(this.h,y),this.Ua&&Ae(h,"TYPE","init"),this.P?(Ae(h,"$req",a),Ae(h,"SID","null"),y.T=!0,Js(y,h,null)):Js(y,h,a),this.G=2}}else this.G==3&&(l?mu(this,l):this.i.length==0||Kt(this.h)||mu(this))};function mu(l,a){var h;a?h=a.l:h=l.U++;const f=un(l.I);Ae(f,"SID",l.K),Ae(f,"RID",h),Ae(f,"AID",l.T),fi(l,f),l.m&&l.o&&no(f,l.m,l.o),h=new an(l,l.j,h,l.B+1),l.m===null&&(h.H=l.o),a&&(l.i=a.D.concat(l.i)),a=ma(l,h,1e3),h.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),En(l.h,h),Js(h,f,a)}function fi(l,a){l.H&&j(l.H,function(h,f){Ae(a,f,h)}),l.l&&ha({},function(h,f){Ae(a,f,h)})}function ma(l,a,h){h=Math.min(l.i.length,h);var f=l.l?g(l.l.Na,l.l,l):null;e:{var y=l.i;let N=-1;for(;;){const O=["count="+h];N==-1?0<h?(N=y[0].g,O.push("ofs="+N)):N=0:O.push("ofs="+N);let W=!0;for(let q=0;q<h;q++){let V=y[q].g;const B=y[q].map;if(V-=N,0>V)N=Math.max(0,y[q].g-100),W=!1;else try{to(B,O,"req"+V+"_")}catch{f&&f(B)}}if(W){f=O.join("&");break e}}}return l=l.i.splice(0,h),a.D=l,f}function pi(l){if(!l.g&&!l.u){l.Y=1;var a=l.Fa;qe||se(),H||(qe(),H=!0),Z.add(a,l),l.v=0}}function Gt(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ge(g(l.Fa,l),vu(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,gu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ge(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),fs(this),gu(this))};function Sn(l){l.A!=null&&(u.clearTimeout(l.A),l.A=null)}function gu(l){l.g=new an(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var a=un(l.qa);Ae(a,"RID","rpc"),Ae(a,"SID",l.K),Ae(a,"AID",l.T),Ae(a,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ae(a,"TO",l.ja),Ae(a,"TYPE","xmlhttp"),fi(l,a),l.m&&l.o&&no(a,l.m,l.o),l.L&&(l.g.I=l.L);var h=l.g;l=l.ia,h.L=1,h.v=ri(un(a)),h.m=null,h.P=!0,Xi(h,l)}t.Za=function(){this.C!=null&&(this.C=null,fs(this),Gt(this),lt(19))};function jn(l){l.C!=null&&(u.clearTimeout(l.C),l.C=null)}function yu(l,a){var h=null;if(l.g==a){jn(l),Sn(l),l.g=null;var f=2}else if(is(l.h,a))h=a.D,Ar(l.h,a),f=1;else return;if(l.G!=0){if(a.o)if(f==1){h=a.m?a.m.length:0,a=Date.now()-a.F;var y=l.B;f=Mn(),ft(f,new U(f,h)),Fn(l)}else pi(l);else if(y=a.s,y==3||y==0&&0<a.X||!(f==1&&pu(l,a)||f==2&&Gt(l)))switch(h&&0<h.length&&(a=l.h,a.i=a.i.concat(h)),y){case 1:Rr(l,5);break;case 4:Rr(l,10);break;case 3:Rr(l,6);break;default:Rr(l,2)}}}function vu(l,a){let h=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(h*=2),h*a}function Rr(l,a){if(l.j.info("Error code "+a),a==2){var h=g(l.fb,l),f=l.Xa;const y=!f;f=new pt(f||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ei(f,"https"),ri(f),y?Qh(f.toString(),h):Yh(f.toString(),h)}else lt(2);l.G=0,l.l&&l.l.sa(a),mi(l),di(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function mi(l){if(l.G=0,l.ka=[],l.l){const a=br(l.h);(a.length!=0||l.i.length!=0)&&(L(l.ka,a),L(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function _u(l,a,h){var f=h instanceof pt?un(h):new pt(h);if(f.g!="")a&&(f.g=a+"."+f.g),ti(f,f.s);else{var y=u.location;f=y.protocol,a=a?a+"."+y.hostname:y.hostname,y=+y.port;var N=new pt(null);f&&ei(N,f),a&&(N.g=a),y&&ti(N,y),h&&(N.l=h),f=N}return h=l.D,a=l.ya,h&&a&&Ae(f,h,a),Ae(f,"VER",l.la),fi(l,f),f}function ga(l,a,h){if(a&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return a=l.Ca&&!l.pa?new be(new ai({eb:h})):new be(l.pa),a.Ha(l.J),a}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ro(){}t=ro.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $n(){}$n.prototype.g=function(l,a){return new Ie(l,a)};function Ie(l,a){Fe.call(this),this.g=new hi(a),this.l=l,this.h=a&&a.messageUrlParams||null,l=a&&a.messageHeaders||null,a&&a.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=a&&a.initMessageHeaders||null,a&&a.messageContentType&&(l?l["X-WebChannel-Content-Type"]=a.messageContentType:l={"X-WebChannel-Content-Type":a.messageContentType}),a&&a.va&&(l?l["X-WebChannel-Client-Profile"]=a.va:l={"X-WebChannel-Client-Profile":a.va}),this.g.S=l,(l=a&&a.Sb)&&!_(l)&&(this.g.m=l),this.v=a&&a.supportsCrossDomainXhr||!1,this.u=a&&a.sendRawJson||!1,(a=a&&a.httpSessionIdParam)&&!_(a)&&(this.g.D=a,l=this.h,l!==null&&a in l&&(l=this.h,a in l&&delete l[a])),this.j=new ps(this)}I(Ie,Fe),Ie.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ie.prototype.close=function(){Nr(this.g)},Ie.prototype.o=function(l){var a=this.g;if(typeof l=="string"){var h={};h.__data__=l,l=h}else this.u&&(h={},h.__data__=oa(l),l=h);a.i.push(new De(a.Ya++,l)),a.G==3&&Fn(a)},Ie.prototype.N=function(){this.g.l=null,delete this.j,Nr(this.g),delete this.g,Ie.aa.N.call(this)};function wu(l){Tr.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var a=l.__sm__;if(a){e:{for(const h in a){l=h;break e}l=void 0}(this.i=l)&&(l=this.i,a=a!==null&&l in a?a[l]:void 0),this.data=a}else this.data=l}I(wu,Tr);function Eu(){la.call(this),this.status=1}I(Eu,la);function ps(l){this.g=l}I(ps,ro),ps.prototype.ua=function(){ft(this.g,"a")},ps.prototype.ta=function(l){ft(this.g,new wu(l))},ps.prototype.sa=function(l){ft(this.g,new Eu)},ps.prototype.ra=function(){ft(this.g,"b")},$n.prototype.createWebChannel=$n.prototype.g,Ie.prototype.send=Ie.prototype.o,Ie.prototype.open=Ie.prototype.m,Ie.prototype.close=Ie.prototype.close,xE=function(){return new $n},kE=function(){return Mn()},bE=on,cp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},On.NO_ERROR=0,On.TIMEOUT=8,On.HTTP_ERROR=6,cc=On,Hh.COMPLETE="complete",AE=Hh,wn.EventType=ts,ts.OPEN="a",ts.CLOSE="b",ts.ERROR="c",ts.MESSAGE="d",Fe.prototype.listen=Fe.prototype.K,Oa=wn,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,CE=be}).apply(typeof Bu<"u"?Bu:typeof self<"u"?self:typeof window<"u"?window:{});const av="@firebase/firestore",lv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new Pm("@firebase/firestore");function ao(){return Ui.logLevel}function Q(t,...e){if(Ui.logLevel<=he.DEBUG){const n=e.map(Lm);Ui.debug(`Firestore (${ea}): ${t}`,...n)}}function Xr(t,...e){if(Ui.logLevel<=he.ERROR){const n=e.map(Lm);Ui.error(`Firestore (${ea}): ${t}`,...n)}}function Bi(t,...e){if(Ui.logLevel<=he.WARN){const n=e.map(Lm);Ui.warn(`Firestore (${ea}): ${t}`,...n)}}function Lm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,NE(t,r,n)}function NE(t,e,n){let r=`FIRESTORE (${ea}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Xr(r),new Error(r)}function We(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||NE(e,s,r)}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xt.UNAUTHENTICATED))}shutdown(){}}class Vk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Fk{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){We(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Mi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Mi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We(typeof r.accessToken=="string",31837,{l:r}),new RE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new xt(e)}}class jk{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $k{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new jk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Uk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Es(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){We(this.o===void 0,3512);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new uv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(We(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new uv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Bk(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function hp(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Ld(s)===Ld(i)?pe(s,i):Ld(s)?1:-1}return pe(t.length,e.length)}const zk=55296,Hk=57343;function Ld(t){const e=t.charCodeAt(0);return e>=zk&&e<=Hk}function zo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="__name__";class or{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&oe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return or.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof or?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=or.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return pe(e.length,n.length)}static compareSegments(e,n){const r=or.isNumericId(e),s=or.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?or.extractNumericId(e).compare(or.extractNumericId(n)):hp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ls.fromString(e.substring(4,e.length-2))}}class ze extends or{construct(e,n,r){return new ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ze(n)}static emptyPath(){return new ze([])}}const Wk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends or{construct(e,n,r){return new Pt(e,n,r)}static isValidIdentifier(e){return Wk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cv}static keyField(){return new Pt([cv])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new X(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new X(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(ze.fromString(e))}static fromName(e){return new J(ze.fromString(e).popFirst(5))}static empty(){return new J(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new ze(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(t,e,n){if(!n)throw new X(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DE(t,e,n,r){if(e===!0&&r===!0)throw new X(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hv(t){if(!J.isDocumentKey(t))throw new X(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Gk(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe(12329,{type:typeof t})}function Xc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gk(t);throw new X(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t,e){const n={typeString:t};return e&&(n.value=e),n}function zl(t,e){if(!qk(t))throw new X(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new X(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=-62135596800,fv=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*fv);return new Je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dv)throw new X(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fv}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zl(e,Je._jsonSchema))return new Je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:nt("string",Je._jsonSchemaVersion),seconds:nt("number"),nanoseconds:nt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Je(0,0))}static max(){return new re(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=-1;function Qk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=re.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new Us(s,J.empty(),e)}function Yk(t){return new Us(t.readTime,t.key,xl)}class Us{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Us(re.min(),J.empty(),xl)}static max(){return new Us(re.max(),J.empty(),xl)}}function Xk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kh(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==Jk)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(p=>{o[d]=p,++u,u===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ex(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ta(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=-1;function Nh(t){return t==null}function dp(t){return t===0&&1/t==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="";function nx(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pv(e)),e=rx(t.get(n),e);return pv(e)}function rx(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case ME:n+="";break;default:n+=i}}return n}function pv(t){return t+ME+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||gt.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gt.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zu(this.root,e,this.comparator,!0)}}class zu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??gt.RED,this.left=s??gt.EMPTY,this.right=i??gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new gt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return gt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw oe(27949);return e+(this.isRed()?0:1)}}gt.EMPTY=null,gt.RED=!0,gt.BLACK=!1;gt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe(57766)}get value(){throw oe(16141)}get color(){throw oe(16727)}get left(){throw oe(29726)}get right(){throw oe(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gv(this.data.getIterator())}getIteratorFrom(e){return new gv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new at(this.comparator);return n.data=e,n}}class gv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new Is([])}unionWith(e){let n=new at(Pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Is(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new OE("Invalid base64 string: "+i):i}}(e);return new dt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const ix=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(t){if(We(!!t,39018),typeof t=="string"){let e=0;const n=ix.exec(t);if(We(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zs(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="server_timestamp",VE="__type__",FE="__previous_value__",jE="__local_write_time__";function Vm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[VE])==null?void 0:r.stringValue)===LE}function Rh(t){const e=t.mapValue.fields[FE];return Vm(e)?Rh(e):e}function Nl(t){const e=Bs(t.mapValue.fields[jE].timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n,r,s,i,o,u,c,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=p}}const Jc="(default)";class Ho{constructor(e,n){this.projectId=e,this.database=n||Jc}static empty(){return new Ho("","")}get isDefaultDatabase(){return this.database===Jc}isEqual(e){return e instanceof Ho&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="__type__",lx="__max__",Hu={mapValue:{}},ux="__vector__",fp="value";function Hs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vm(t)?4:hx(t)?9007199254740991:cx(t)?10:11:oe(28295,{value:t})}function pr(t,e){if(t===e)return!0;const n=Hs(t);if(n!==Hs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nl(t).isEqual(Nl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Bs(s.timestampValue),u=Bs(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return zs(s.bytesValue).isEqual(zs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ye(s.geoPointValue.latitude)===Ye(i.geoPointValue.latitude)&&Ye(s.geoPointValue.longitude)===Ye(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ye(s.integerValue)===Ye(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ye(s.doubleValue),u=Ye(i.doubleValue);return o===u?dp(o)===dp(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return zo(t.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(mv(o)!==mv(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!pr(o[c],u[c])))return!1;return!0}(t,e);default:return oe(52216,{left:t})}}function Rl(t,e){return(t.values||[]).find(n=>pr(n,e))!==void 0}function Wo(t,e){if(t===e)return 0;const n=Hs(t),r=Hs(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Ye(i.integerValue||i.doubleValue),c=Ye(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return yv(t.timestampValue,e.timestampValue);case 4:return yv(Nl(t),Nl(e));case 5:return hp(t.stringValue,e.stringValue);case 6:return function(i,o){const u=zs(i),c=zs(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let d=0;d<u.length&&d<c.length;d++){const p=pe(u[d],c[d]);if(p!==0)return p}return pe(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=pe(Ye(i.latitude),Ye(o.latitude));return u!==0?u:pe(Ye(i.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,S,I,P;const u=i.fields||{},c=o.fields||{},d=(g=u[fp])==null?void 0:g.arrayValue,p=(S=c[fp])==null?void 0:S.arrayValue,m=pe(((I=d==null?void 0:d.values)==null?void 0:I.length)||0,((P=p==null?void 0:p.values)==null?void 0:P.length)||0);return m!==0?m:vv(d,p)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Hu.mapValue&&o===Hu.mapValue)return 0;if(i===Hu.mapValue)return 1;if(o===Hu.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),d=o.fields||{},p=Object.keys(d);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const g=hp(c[m],p[m]);if(g!==0)return g;const S=Wo(u[c[m]],d[p[m]]);if(S!==0)return S}return pe(c.length,p.length)}(t.mapValue,e.mapValue);default:throw oe(23264,{he:n})}}function yv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=Bs(t),r=Bs(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function vv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Wo(n[s],r[s]);if(i)return i}return pe(n.length,r.length)}function Ko(t){return pp(t)}function pp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Bs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=pp(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${pp(n.fields[o])}`;return s+"}"}(t.mapValue):oe(61005,{value:t})}function hc(t){switch(Hs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rh(t);return e?16+hc(e):16;case 5:return 2*t.stringValue.length;case 6:return zs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+hc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Hl(r.fields,(i,o)=>{s+=i.length+hc(o)}),s}(t.mapValue);default:throw oe(13486,{value:t})}}function mp(t){return!!t&&"integerValue"in t}function Fm(t){return!!t&&"arrayValue"in t}function _v(t){return!!t&&"nullValue"in t}function wv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vd(t){return!!t&&"mapValue"in t}function cx(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ax])==null?void 0:r.stringValue)===ux}function el(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Hl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=el(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=el(t.arrayValue.values[n]);return e}return{...t}}function hx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===lx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.value=e}static empty(){return new ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=el(n)}setAll(e){let n=Pt.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=el(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Vd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Vd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Hl(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ur(el(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Rt(e,0,re.min(),re.min(),re.min(),ur.empty(),0)}static newFoundDocument(e,n,r,s){return new Rt(e,1,n,re.min(),r,s,0)}static newNoDocument(e,n){return new Rt(e,2,n,re.min(),re.min(),ur.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,re.min(),re.min(),ur.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n){this.position=e,this.inclusive=n}}function Ev(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Wo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,n="asc"){this.field=e,this.dir=n}}function dx(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{}class it extends $E{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new px(e,n,r):n==="array-contains"?new yx(e,r):n==="in"?new vx(e,r):n==="not-in"?new _x(e,r):n==="array-contains-any"?new wx(e,r):new it(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new mx(e,r):new gx(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wo(n,this.value)):n!==null&&Hs(this.value)===Hs(n)&&this.matchesComparison(Wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mr extends $E{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new mr(e,n)}matches(e){return UE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function UE(t){return t.op==="and"}function BE(t){return fx(t)&&UE(t)}function fx(t){for(const e of t.filters)if(e instanceof mr)return!1;return!0}function gp(t){if(t instanceof it)return t.field.canonicalString()+t.op.toString()+Ko(t.value);if(BE(t))return t.filters.map(e=>gp(e)).join(",");{const e=t.filters.map(n=>gp(n)).join(",");return`${t.op}(${e})`}}function zE(t,e){return t instanceof it?function(r,s){return s instanceof it&&r.op===s.op&&r.field.isEqual(s.field)&&pr(r.value,s.value)}(t,e):t instanceof mr?function(r,s){return s instanceof mr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&zE(o,s.filters[u]),!0):!1}(t,e):void oe(19439)}function HE(t){return t instanceof it?function(n){return`${n.field.canonicalString()} ${n.op} ${Ko(n.value)}`}(t):t instanceof mr?function(n){return n.op.toString()+" {"+n.getFilters().map(HE).join(" ,")+"}"}(t):"Filter"}class px extends it{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class mx extends it{constructor(e,n){super(e,"in",n),this.keys=WE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gx extends it{constructor(e,n){super(e,"not-in",n),this.keys=WE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function WE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class yx extends it{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fm(n)&&Rl(n.arrayValue,this.value)}}class vx extends it{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Rl(this.value.arrayValue,n)}}class _x extends it{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Rl(this.value.arrayValue,n)}}class wx extends it{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Rl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.Te=null}}function Sv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Ex(t,e,n,r,s,i,o)}function jm(t){const e=ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>gp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Nh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ko(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ko(r)).join(",")),e.Te=n}return e.Te}function $m(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dx(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Tv(t.startAt,e.startAt)&&Tv(t.endAt,e.endAt)}function yp(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Tx(t,e,n,r,s,i,o,u){return new Ph(t,e,n,r,s,i,o,u)}function Um(t){return new Ph(t)}function Iv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Sx(t){return t.collectionGroup!==null}function tl(t){const e=ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new at(Pt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new eh(i,r))}),n.has(Pt.keyField().canonicalString())||e.Ie.push(new eh(Pt.keyField(),r))}return e.Ie}function fr(t){const e=ve(t);return e.Ee||(e.Ee=Ix(e,tl(t))),e.Ee}function Ix(t,e){if(t.limitType==="F")return Sv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new eh(s.field,i)});const n=t.endAt?new Zc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zc(t.startAt.position,t.startAt.inclusive):null;return Sv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function vp(t,e,n){return new Ph(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dh(t,e){return $m(fr(t),fr(e))&&t.limitType===e.limitType}function KE(t){return`${jm(fr(t))}|lt:${t.limitType}`}function lo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>HE(s)).join(", ")}]`),Nh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ko(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ko(s)).join(",")),`Target(${r})`}(fr(t))}; limitType=${t.limitType})`}function Mh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of tl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const d=Ev(o,u,c);return o.inclusive?d<=0:d<0}(r.startAt,tl(r),s)||r.endAt&&!function(o,u,c){const d=Ev(o,u,c);return o.inclusive?d>=0:d>0}(r.endAt,tl(r),s))}(t,e)}function Cx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qE(t){return(e,n)=>{let r=!1;for(const s of tl(t)){const i=Ax(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Ax(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),d=u.data.field(i);return c!==null&&d!==null?Wo(c,d):oe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hl(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return sx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=new Ze(J.comparator);function Ws(){return bx}const GE=new Ze(J.comparator);function La(...t){let e=GE;for(const n of t)e=e.insert(n.key,n);return e}function kx(t){let e=GE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function bi(){return nl()}function QE(){return nl()}function nl(){return new Gi(t=>t.toString(),(t,e)=>t.isEqual(e))}const xx=new at(J.comparator);function _e(...t){let e=xx;for(const n of t)e=e.add(n);return e}const Nx=new at(pe);function Rx(){return Nx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dp(e)?"-0":e}}function Dx(t){return{integerValue:""+t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(){this._=void 0}}function Mx(t,e,n){return t instanceof _p?function(s,i){const o={fields:{[VE]:{stringValue:LE},[jE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Vm(i)&&(i=Rh(i)),i&&(o.fields[FE]=i),{mapValue:o}}(n,e):t instanceof th?YE(t,e):t instanceof nh?XE(t,e):function(s,i){const o=Lx(s,i),u=Cv(o)+Cv(s.Ae);return mp(o)&&mp(s.Ae)?Dx(u):Px(s.serializer,u)}(t,e)}function Ox(t,e,n){return t instanceof th?YE(t,e):t instanceof nh?XE(t,e):n}function Lx(t,e){return t instanceof wp?function(r){return mp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class _p extends Oh{}class th extends Oh{constructor(e){super(),this.elements=e}}function YE(t,e){const n=JE(e);for(const r of t.elements)n.some(s=>pr(s,r))||n.push(r);return{arrayValue:{values:n}}}class nh extends Oh{constructor(e){super(),this.elements=e}}function XE(t,e){let n=JE(e);for(const r of t.elements)n=n.filter(s=>!pr(s,r));return{arrayValue:{values:n}}}class wp extends Oh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Cv(t){return Ye(t.integerValue||t.doubleValue)}function JE(t){return Fm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Vx(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof th&&s instanceof th||r instanceof nh&&s instanceof nh?zo(r.elements,s.elements,pr):r instanceof wp&&s instanceof wp?pr(r.Ae,s.Ae):r instanceof _p&&s instanceof _p}(t.transform,e.transform)}class Oi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Oi}static exists(e){return new Oi(void 0,e)}static updateTime(e){return new Oi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bm{}function ZE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jx(t.key,Oi.none()):new zm(t.key,t.data,Oi.none());{const n=t.data,r=ur.empty();let s=new at(Pt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Lh(t.key,r,new Is(s.toArray()),Oi.none())}}function Fx(t,e,n){t instanceof zm?function(s,i,o){const u=s.value.clone(),c=bv(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Lh?function(s,i,o){if(!dc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=bv(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(eT(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function rl(t,e,n,r){return t instanceof zm?function(i,o,u,c){if(!dc(i.precondition,o))return u;const d=i.value.clone(),p=kv(i.fieldTransforms,c,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Lh?function(i,o,u,c){if(!dc(i.precondition,o))return u;const d=kv(i.fieldTransforms,c,o),p=o.data;return p.setAll(eT(i)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,u){return dc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function Av(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zo(r,s,(i,o)=>Vx(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class zm extends Bm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Lh extends Bm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function eT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function bv(t,e,n){const r=new Map;We(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,Ox(o,u,n[s]))}return r}function kv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Mx(i,o,e))}return r}class jx extends Bm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Fx(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=rl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=rl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=QE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=ZE(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,(n,r)=>Av(n,r))&&zo(this.baseMutations,e.baseMutations,(n,r)=>Av(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,ye;function tT(t){if(t===void 0)return Xr("GRPC error has no .code"),K.UNKNOWN;switch(t){case et.OK:return K.OK;case et.CANCELLED:return K.CANCELLED;case et.UNKNOWN:return K.UNKNOWN;case et.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case et.INTERNAL:return K.INTERNAL;case et.UNAVAILABLE:return K.UNAVAILABLE;case et.UNAUTHENTICATED:return K.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case et.NOT_FOUND:return K.NOT_FOUND;case et.ALREADY_EXISTS:return K.ALREADY_EXISTS;case et.PERMISSION_DENIED:return K.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case et.ABORTED:return K.ABORTED;case et.OUT_OF_RANGE:return K.OUT_OF_RANGE;case et.UNIMPLEMENTED:return K.UNIMPLEMENTED;case et.DATA_LOSS:return K.DATA_LOSS;default:return oe(39323,{code:t})}}(ye=et||(et={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=new Ls([4294967295,4294967295],0);function xv(t){const e=zx().encode(t),n=new IE;return n.update(e),new Uint8Array(n.digest())}function Nv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ls([n,r],0),new Ls([s,i],0)]}class Hm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Va(`Invalid padding: ${n}`);if(r<0)throw new Va(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Va(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Va(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ls.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ls.fromNumber(r)));return s.compare(Hx)===1&&(s=new Ls([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=xv(e),[r,s]=Nv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Hm(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.ge===0)return;const n=xv(e),[r,s]=Nv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Wl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vh(re.min(),s,new Ze(pe),Ws(),_e())}}class Wl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Wl(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class nT{constructor(e,n){this.targetId=e,this.Ce=n}}class rT{constructor(e,n,r=dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Rv{constructor(){this.ve=0,this.Fe=Pv(),this.Me=dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_e(),n=_e(),r=_e();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe(38017,{changeType:i})}}),new Wl(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Pv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Wx{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ws(),this.Je=Wu(),this.He=Wu(),this.Ye=new Ze(pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:oe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(yp(i))if(r===0){const o=new J(i.path);this.et(n,o,Rt.newNoDocument(o,re.min()))}else We(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const u=this.ut(e),c=u?this.ct(u,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=zs(r).toUint8Array()}catch(c){if(c instanceof OE)return Bi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Hm(o,s,i)}catch(c){return Bi(c instanceof Va?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const u=this.ot(o);if(u){if(i.current&&yp(u.target)){const c=new J(u.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Rt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=_e();this.He.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Vh(e,n,this.Ye,this.je,r);return this.je=Ws(),this.Je=Wu(),this.He=Wu(),this.Ye=new Ze(pe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Rv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new at(pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new at(pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Rv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Wu(){return new Ze(J.comparator)}function Pv(){return new Ze(J.comparator)}const Kx={asc:"ASCENDING",desc:"DESCENDING"},qx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gx={and:"AND",or:"OR"};class Qx{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ep(t,e){return t.useProto3Json||Nh(e)?e:{value:e}}function Yx(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Do(t){return We(!!t,49232),re.fromTimestamp(function(n){const r=Bs(n);return new Je(r.seconds,r.nanos)}(t))}function Jx(t,e){return Tp(t,e).canonicalString()}function Tp(t,e){const n=function(s){return new ze(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function sT(t){const e=ze.fromString(t);return We(uT(e),10190,{key:e.toString()}),e}function Fd(t,e){const n=sT(e);if(n.get(1)!==t.databaseId.projectId)throw new X(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(oT(n))}function iT(t,e){return Jx(t.databaseId,e)}function Zx(t){const e=sT(t);return e.length===4?ze.emptyPath():oT(e)}function Dv(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oT(t){return We(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function eN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:oe(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(We(p===void 0||typeof p=="string",58123),dt.fromBase64String(p||"")):(We(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),dt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(d){const p=d.code===void 0?K.UNKNOWN:tT(d.code);return new X(p,d.message||"")}(o);n=new rT(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Fd(t,r.document.name),i=Do(r.document.updateTime),o=r.document.createTime?Do(r.document.createTime):re.min(),u=new ur({mapValue:{fields:r.document.fields}}),c=Rt.newFoundDocument(s,i,o,u),d=r.targetIds||[],p=r.removedTargetIds||[];n=new fc(d,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Fd(t,r.document),i=r.readTime?Do(r.readTime):re.min(),o=Rt.newNoDocument(s,i),u=r.removedTargetIds||[];n=new fc([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Fd(t,r.document),i=r.removedTargetIds||[];n=new fc([],i,s,null)}else{if(!("filter"in e))return oe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Bx(s,i),u=r.targetId;n=new nT(u,o)}}return n}function tN(t,e){return{documents:[iT(t,e.path)]}}function nN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=iT(t,s);const i=function(d){if(d.length!==0)return lT(mr.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(p=>function(g){return{field:uo(g.field),direction:iN(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=Ep(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function rN(t){let e=Zx(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){We(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=aT(m);return g instanceof mr&&BE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(I){return new eh(co(I.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(n.orderBy));let u=null;n.limit&&(u=function(m){let g;return g=typeof m=="object"?m.value:m,Nh(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(m){const g=!!m.before,S=m.values||[];return new Zc(S,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,S=m.values||[];return new Zc(S,g)}(n.endAt)),Tx(e,s,o,i,u,"F",c,d)}function sN(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=co(n.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=co(n.unaryFilter.field);return it.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=co(n.unaryFilter.field);return it.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=co(n.unaryFilter.field);return it.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return oe(61313);default:return oe(60726)}}(t):t.fieldFilter!==void 0?function(n){return it.create(co(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return oe(58110);default:return oe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mr.create(n.compositeFilter.filters.map(r=>aT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe(1026)}}(n.compositeFilter.op))}(t):oe(30097,{filter:t})}function iN(t){return Kx[t]}function oN(t){return qx[t]}function aN(t){return Gx[t]}function uo(t){return{fieldPath:t.canonicalString()}}function co(t){return Pt.fromServerFormat(t.fieldPath)}function lT(t){return t instanceof it?function(n){if(n.op==="=="){if(wv(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NAN"}};if(_v(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wv(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NAN"}};if(_v(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uo(n.field),op:oN(n.op),value:n.value}}}(t):t instanceof mr?function(n){const r=n.getFilters().map(s=>lT(s));return r.length===1?r[0]:{compositeFilter:{op:aN(n.op),filters:r}}}(t):oe(54877,{filter:t})}function uT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n,r,s,i=re.min(),o=re.min(),u=dt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.yt=e}}function uN(t){const e=rN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(){this.Cn=new hN}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Us.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Us.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class hN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new at(ze.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new at(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cT=41943040;class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(cT,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new qo(0)}static cr(){return new qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="LruGarbageCollector",dN=1048576;function Lv([t,e],[n,r]){const s=pe(t,n);return s===0?pe(e,r):s}class fN{constructor(e){this.Ir=e,this.buffer=new at(Lv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Lv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class pN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Q(Ov,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ta(n)?Q(Ov,"Ignoring IndexedDB error during garbage collection: ",n):await kh(n)}await this.Vr(3e5)})}}class mN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(xh.ce);const r=new fN(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Mv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,u,c,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,u=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),ao()<=he.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${s} in `+(u-o)+`ms
	Removed ${i} targets in `+(c-u)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-p}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function gN(t,e){return new mN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.changes=new Gi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&rl(r.mutation,s,Is.empty(),Je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){const s=bi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=La();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=bi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=Ws();const o=nl(),u=function(){return nl()}();return n.forEach((c,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof Lh)?i=i.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),rl(p.mutation,d,p.mutation.getFieldMask(),Je.now())):o.set(d.key,Is.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>u.set(d,new vN(p,o.get(d)??null))),u))}recalculateAndSaveOverlays(e,n){const r=nl();let s=new Ze((o,u)=>o-u),i=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let p=r.get(c)||Is.empty();p=u.applyToLocalView(d,p),r.set(c,p);const m=(s.get(u.batchId)||_e()).add(c);s=s.insert(u.batchId,m)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,p=c.value,m=QE();p.forEach(g=>{if(!i.has(g)){const S=ZE(n.get(g),r.get(g));S!==null&&m.set(g,S),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Sx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(bi());let u=xl,c=i;return o.next(d=>$.forEach(d,(p,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),i.get(p)?$.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{c=c.insert(p,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,_e())).next(p=>({batchId:u,changes:kx(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=La();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=La();return this.indexManager.getCollectionParents(e,i).next(u=>$.forEach(u,c=>{const d=function(m,g){return new Ph(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,Rt.newInvalidDocument(p)))});let u=La();return o.forEach((c,d)=>{const p=i.get(c);p!==void 0&&rl(p.mutation,d,Is.empty(),Je.now()),Mh(n,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Do(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:uN(s.bundledQuery),readTime:Do(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(){this.overlays=new Ze(J.comparator),this.qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=bi();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=bi(),i=n.length+1,o=new J(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ze((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=bi(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const u=bi(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,p)=>u.set(d,p)),!(u.size()>=s)););return $.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ux(n,r));let i=this.qr.get(n);i===void 0&&(i=_e(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(){this.Qr=new at(ut.$r),this.Ur=new at(ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ut(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new ut(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new J(new ze([])),r=new ut(n,e),s=new ut(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new J(new ze([])),r=new ut(n,e),s=new ut(n,e+1);let i=_e();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ut(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ut{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return J.comparator(e.key,n.key)||pe(e.Yr,n.Yr)}static Kr(e,n){return pe(e.Yr,n.Yr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new at(ut.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $x(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.Zr=this.Zr.add(new ut(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?tx:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ut(n,0),s=new ut(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const u=this.Xr(o.Yr);i.push(u)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(pe);return n.forEach(s=>{const i=new ut(s,0),o=new ut(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],u=>{r=r.add(u.Yr)})}),$.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new ut(new J(i),0);let u=new at(pe);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(u=u.add(c.Yr)),!0)},o),$.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){We(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return $.forEach(n.mutations,s=>{const i=new ut(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new ut(n,0),s=this.Zr.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.ri=e,this.docs=function(){return new Ze(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=Ws();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Rt.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ws();const o=n.path,u=new J(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Xk(Yk(p),r)<=0||(s.has(p.key)||Mh(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){oe(9500)}ii(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new CN(this)}getSize(e){return $.resolve(this.size)}}class CN extends yN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.persistence=e,this.si=new Gi(n=>jm(n),$m),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.oi=0,this._i=new Wm,this.targetCount=0,this.ai=qo.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),$.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new qo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Pr(n),$.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n){this.ui={},this.overlays={},this.ci=new xh(0),this.li=!1,this.li=!0,this.hi=new TN,this.referenceDelegate=e(this),this.Pi=new AN(this),this.indexManager=new cN,this.remoteDocumentCache=function(s){return new IN(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new lN(n),this.Ii=new wN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new EN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new SN(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new bN(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return $.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class bN extends Zk{constructor(e){super(),this.currentSequenceNumber=e}}class Km{constructor(e){this.persistence=e,this.Ri=new Wm,this.Vi=null}static mi(e){return new Km(e)}get fi(){if(this.Vi)return this.Vi;throw oe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,r=>{const s=J.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class rh{constructor(e,n){this.persistence=e,this.pi=new Gi(r=>nx(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=gN(this,n)}static mi(e,n){return new rh(e,n)}Ei(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return $.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?$.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(u=>{u||(r++,i.removeEntry(o,re.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=hc(e.data.value)),n}br(e,n,r){return $.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return $.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=_e(),s=_e();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new qm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return MA()?8:ex(Jn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new kN;return this.Ss(e,n,o).next(u=>{if(i.result=u,this.Vs)return this.bs(e,n,o,u.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ao()<=he.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(ao()<=he.DEBUG&&Q("QueryEngine","Query:",lo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ao()<=he.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fr(n))):$.resolve())}ys(e,n){if(Iv(n))return $.resolve(null);let r=fr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=vp(n,null,"F"),r=fr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=_e(...i);return this.ps.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,u);return this.Cs(n,d,o,c.readTime)?this.ys(e,vp(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,s){return Iv(n)||s.isEqual(re.min())?$.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?$.resolve(null):(ao()<=he.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),lo(n)),this.vs(e,o,n,Qk(s,xl)).next(u=>u))})}Ds(e,n){let r=new at(qE(e));return n.forEach((s,i)=>{Mh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ao()<=he.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",lo(n)),this.ps.getDocumentsMatchingQuery(e,n,Us.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="LocalStore",NN=3e8;class RN{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ze(pe),this.xs=new Gi(i=>jm(i),$m),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _N(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function PN(t,e,n,r){return new RN(t,e,n,r)}async function dT(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=_e();for(const d of s){o.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}for(const d of i){u.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:u}))})})}function fT(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function DN(t,e){const n=ve(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const u=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;u.push(n.Pi.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,p.addedDocuments,m)));let S=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?S=S.withResumeToken(dt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,r)),s=s.insert(m,S),function(P,L,E){return P.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=NN?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,S,p)&&u.push(n.Pi.updateTargetData(i,S))});let c=Ws(),d=_e();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),u.push(MN(i,o,e.documentUpdates).next(p=>{c=p.ks,d=p.qs})),!r.isEqual(re.min())){const p=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(p)}return $.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=s,i))}function MN(t,e,n){let r=_e(),s=_e();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ws();return n.forEach((u,c)=>{const d=i.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(re.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):Q(Gm,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:s}})}function ON(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Cs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Sp(t,e,n){const r=ve(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ta(o))throw o;Q(Gm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Vv(t,e,n){const r=ve(t);let s=re.min(),i=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,p){const m=ve(c),g=m.xs.get(p);return g!==void 0?$.resolve(m.Ms.get(g)):m.Pi.getTargetData(d,p)}(r,o,fr(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:re.min(),n?i:_e())).next(u=>(LN(r,Cx(e),u),{documents:u,Qs:i})))}function LN(t,e,n){let r=t.Os.get(e)||re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Fv{constructor(){this.activeTargetIds=Rx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VN{constructor(){this.Mo=new Fv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Fv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="ConnectivityMonitor";class $v{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Q(jv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Q(jv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ku=null;function Ip(){return Ku===null?Ku=function(){return 268435456+Math.round(2147483648*Math.random())}():Ku++,"0x"+Ku.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="RestConnection",jN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $N{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Jc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Ip(),u=this.zo(e,n.toUriEncodedString());Q(jd,`Sending RPC '${e}' ${o}:`,u,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:d}=new URL(u),p=jl(d);return this.Jo(e,u,c,r,p).then(m=>(Q(jd,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Bi(jd,`RPC '${e}' ${o} failed with error: `,m,"url: ",u,"request:",r),m})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ea}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=jN[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt="WebChannelConnection";class BN extends $N{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Ip();return new Promise((u,c)=>{const d=new CE;d.setWithCredentials(!0),d.listenOnce(AE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case cc.NO_ERROR:const m=d.getResponseJson();Q(kt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),u(m);break;case cc.TIMEOUT:Q(kt,`RPC '${e}' ${o} timed out`),c(new X(K.DEADLINE_EXCEEDED,"Request time out"));break;case cc.HTTP_ERROR:const g=d.getStatus();if(Q(kt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let S=d.getResponseJson();Array.isArray(S)&&(S=S[0]);const I=S==null?void 0:S.error;if(I&&I.status&&I.message){const P=function(E){const _=E.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(_)>=0?_:K.UNKNOWN}(I.status);c(new X(P,I.message))}else c(new X(K.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new X(K.UNAVAILABLE,"Connection failed."));break;default:oe(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Q(kt,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(s);Q(kt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",p,r,15)})}T_(e,n,r){const s=Ip(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xE(),u=kE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");Q(kt,`Creating RPC '${e}' stream ${s}: ${p}`,c);const m=o.createWebChannel(p,c);this.I_(m);let g=!1,S=!1;const I=new UN({Yo:L=>{S?Q(kt,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(g||(Q(kt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Q(kt,`RPC '${e}' stream ${s} sending:`,L),m.send(L))},Zo:()=>m.close()}),P=(L,E,_)=>{L.listen(E,C=>{try{_(C)}catch(D){setTimeout(()=>{throw D},0)}})};return P(m,Oa.EventType.OPEN,()=>{S||(Q(kt,`RPC '${e}' stream ${s} transport opened.`),I.o_())}),P(m,Oa.EventType.CLOSE,()=>{S||(S=!0,Q(kt,`RPC '${e}' stream ${s} transport closed`),I.a_(),this.E_(m))}),P(m,Oa.EventType.ERROR,L=>{S||(S=!0,Bi(kt,`RPC '${e}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),I.a_(new X(K.UNAVAILABLE,"The operation could not be completed")))}),P(m,Oa.EventType.MESSAGE,L=>{var E;if(!S){const _=L.data[0];We(!!_,16349);const C=_,D=(C==null?void 0:C.error)||((E=C[0])==null?void 0:E.error);if(D){Q(kt,`RPC '${e}' stream ${s} received error:`,D);const F=D.status;let j=function(A){const T=et[A];if(T!==void 0)return tT(T)}(F),k=D.message;j===void 0&&(j=K.INTERNAL,k="Unknown error status: "+F+" with message "+D.message),S=!0,I.a_(new X(j,k)),m.close()}else Q(kt,`RPC '${e}' stream ${s} received:`,_),I.u_(_)}}),P(u,bE.STAT_EVENT,L=>{L.stat===cp.PROXY?Q(kt,`RPC '${e}' stream ${s} detected buffering proxy`):L.stat===cp.NOPROXY&&Q(kt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function $d(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(t){return new Qx(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="PersistentStream";class zN{constructor(e,n,r,s,i,o,u,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new mT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Xr(n.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new X(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Q(Uv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Q(Uv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HN extends zN{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=eN(this.serializer,e),r=function(i){if(!("targetChange"in i))return re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?Do(o.readTime):re.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Dv(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=yp(c)?{documents:tN(i,c)}:{query:nN(i,c).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=Xx(i,o.resumeToken);const d=Ep(i,o.expectedCount);d!==null&&(u.expectedCount=d)}else if(o.snapshotVersion.compareTo(re.min())>0){u.readTime=Yx(i,o.snapshotVersion.toTimestamp());const d=Ep(i,o.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=sN(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Dv(this.serializer),n.removeTarget=e,this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{}class KN extends WN{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new X(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Tp(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(K.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Ho(e,Tp(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(K.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class qN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xr(n),this.aa=!1):Q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="RemoteStore";class GN{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ql(this)&&(Q(Go,"Restarting streams for network reachability change."),await async function(c){const d=ve(c);d.Ea.add(4),await Kl(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Fh(d)}(this))})}),this.Ra=new qN(r,s)}}async function Fh(t){if(ql(t))for(const e of t.da)await e(!0)}async function Kl(t){for(const e of t.da)await e(!1)}function gT(t,e){const n=ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Jm(n)?Xm(n):na(n).O_()&&Ym(n,e))}function Qm(t,e){const n=ve(t),r=na(n);n.Ia.delete(e),r.O_()&&yT(n,e),n.Ia.size===0&&(r.O_()?r.L_():ql(n)&&n.Ra.set("Unknown"))}function Ym(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}na(t).Y_(e)}function yT(t,e){t.Va.Ue(e),na(t).Z_(e)}function Xm(t){t.Va=new Wx({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),na(t).start(),t.Ra.ua()}function Jm(t){return ql(t)&&!na(t).x_()&&t.Ia.size>0}function ql(t){return ve(t).Ea.size===0}function vT(t){t.Va=void 0}async function QN(t){t.Ra.set("Online")}async function YN(t){t.Ia.forEach((e,n)=>{Ym(t,e)})}async function XN(t,e){vT(t),Jm(t)?(t.Ra.ha(e),Xm(t)):t.Ra.set("Unknown")}async function JN(t,e,n){if(t.Ra.set("Online"),e instanceof rT&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.Ia.delete(u),s.Va.removeTarget(u))}(t,e)}catch(r){Q(Go,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bv(t,r)}else if(e instanceof fc?t.Va.Ze(e):e instanceof nT?t.Va.st(e):t.Va.tt(e),!n.isEqual(re.min()))try{const r=await fT(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Va.Tt(o);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.Ia.get(d);p&&i.Ia.set(d,p.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,d)=>{const p=i.Ia.get(c);if(!p)return;i.Ia.set(c,p.withResumeToken(dt.EMPTY_BYTE_STRING,p.snapshotVersion)),yT(i,c);const m=new Cs(p.target,c,d,p.sequenceNumber);Ym(i,m)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){Q(Go,"Failed to raise snapshot:",r),await Bv(t,r)}}async function Bv(t,e,n){if(!ta(e))throw e;t.Ea.add(1),await Kl(t),t.Ra.set("Offline"),n||(n=()=>fT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(Go,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Fh(t)})}async function zv(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),Q(Go,"RemoteStore received new credentials");const r=ql(n);n.Ea.add(3),await Kl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Fh(n)}async function ZN(t,e){const n=ve(t);e?(n.Ea.delete(2),await Fh(n)):e||(n.Ea.add(2),await Kl(n),n.Ra.set("Unknown"))}function na(t){return t.ma||(t.ma=function(n,r,s){const i=ve(n);return i.sa(),new HN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:QN.bind(null,t),t_:YN.bind(null,t),r_:XN.bind(null,t),H_:JN.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Jm(t)?Xm(t):t.Ra.set("Unknown")):(await t.ma.stop(),vT(t))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new Zm(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _T(t,e){if(Xr("AsyncQueue",`${e}: ${t}`),ta(t))return new X(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=La(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Mo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.ga=new Ze(J.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):oe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qo{constructor(e,n,r,s,i,o,u,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Qo(e,n,Mo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class tR{constructor(){this.queries=Wv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ve(n),i=s.queries;s.queries=Wv(),i.forEach((o,u)=>{for(const c of u.Sa)c.onError(r)})})(this,new X(K.ABORTED,"Firestore shutting down"))}}function Wv(){return new Gi(t=>KE(t),Dh)}async function nR(t,e){const n=ve(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new eR,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=_T(o,`Initialization of query '${lo(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&eg(n)}async function rR(t,e){const n=ve(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function sR(t,e){const n=ve(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.Sa)u.Fa(s)&&(r=!0);o.wa=s}}r&&eg(n)}function iR(t,e,n){const r=ve(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function eg(t){t.Ca.forEach(e=>{e.next()})}var Cp,Kv;(Kv=Cp||(Cp={})).Ma="default",Kv.Cache="cache";class oR{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.key=e}}class ET{constructor(e){this.key=e}}class aR{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_e(),this.mutatedKeys=_e(),this.eu=qE(e),this.tu=new Mo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Hv,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),S=Mh(this.query,m)?m:null,I=!!g&&this.mutatedKeys.has(g.key),P=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let L=!1;g&&S?g.data.isEqual(S.data)?I!==P&&(r.track({type:3,doc:S}),L=!0):this.su(g,S)||(r.track({type:2,doc:S}),L=!0,(c&&this.eu(S,c)>0||d&&this.eu(S,d)<0)&&(u=!0)):!g&&S?(r.track({type:0,doc:S}),L=!0):g&&!S&&(r.track({type:1,doc:g}),L=!0,(c||d)&&(u=!0)),L&&(S?(o=o.add(S),i=P?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Cs:u,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((p,m)=>function(S,I){const P=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe(20277,{Rt:L})}};return P(S)-P(I)}(p.type,m.type)||this.eu(p.doc,m.doc)),this.ou(r),s=s??!1;const u=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new Qo(this.query,e.tu,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_e(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new ET(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new wT(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=_e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Qo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const tg="SyncEngine";class lR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class uR{constructor(e){this.key=e,this.hu=!1}}class cR{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Gi(u=>KE(u),Dh),this.Iu=new Map,this.Eu=new Set,this.du=new Ze(J.comparator),this.Au=new Map,this.Ru=new Wm,this.Vu={},this.mu=new Map,this.fu=qo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hR(t,e,n=!0){const r=AT(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await TT(r,e,n,!0),s}async function dR(t,e){const n=AT(t);await TT(n,e,!0,!1)}async function TT(t,e,n,r){const s=await ON(t.localStore,fr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await fR(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&gT(t.remoteStore,s),u}async function fR(t,e,n,r,s){t.pu=(m,g,S)=>async function(P,L,E,_){let C=L.view.ru(E);C.Cs&&(C=await Vv(P.localStore,L.query,!1).then(({documents:k})=>L.view.ru(k,C)));const D=_&&_.targetChanges.get(L.targetId),F=_&&_.targetMismatches.get(L.targetId)!=null,j=L.view.applyChanges(C,P.isPrimaryClient,D,F);return Gv(P,L.targetId,j.au),j.snapshot}(t,m,g,S);const i=await Vv(t.localStore,e,!0),o=new aR(e,i.Qs),u=o.ru(i.documents),c=Wl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(u,t.isPrimaryClient,c);Gv(t,n,d.au);const p=new lR(e,n,o);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function pR(t,e,n){const r=ve(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Dh(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Sp(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Qm(r.remoteStore,s.targetId),Ap(r,s.targetId)}).catch(kh)):(Ap(r,s.targetId),await Sp(r.localStore,s.targetId,!0))}async function mR(t,e){const n=ve(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qm(n.remoteStore,r.targetId))}async function ST(t,e){const n=ve(t);try{const r=await DN(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(We(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?We(o.hu,14607):s.removedDocuments.size>0&&(We(o.hu,42227),o.hu=!1))}),await CT(n,r,e)}catch(r){await kh(r)}}function qv(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const u=o.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=ve(o);c.onlineState=u;let d=!1;c.queries.forEach((p,m)=>{for(const g of m.Sa)g.va(u)&&(d=!0)}),d&&eg(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gR(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ze(J.comparator);o=o.insert(i,Rt.newNoDocument(i,re.min()));const u=_e().add(i),c=new Vh(re.min(),new Map,new Ze(pe),o,u);await ST(r,c),r.du=r.du.remove(i),r.Au.delete(e),ng(r)}else await Sp(r.localStore,e,!1).then(()=>Ap(r,e,n)).catch(kh)}function Ap(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||IT(t,r)})}function IT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Qm(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ng(t))}function Gv(t,e,n){for(const r of n)r instanceof wT?(t.Ru.addReference(r.key,e),yR(t,r)):r instanceof ET?(Q(tg,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||IT(t,r.key)):oe(19791,{wu:r})}function yR(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Q(tg,"New document in limbo: "+n),t.Eu.add(r),ng(t))}function ng(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new J(ze.fromString(e)),r=t.fu.next();t.Au.set(r,new uR(n)),t.du=t.du.insert(n,r),gT(t.remoteStore,new Cs(fr(Um(n.path)),r,"TargetPurposeLimboResolution",xh.ce))}}async function CT(t,e,n){const r=ve(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((u,c)=>{o.push(r.pu(c,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){s.push(d);const m=qm.As(c.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,d){const p=ve(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>$.forEach(d,g=>$.forEach(g.Es,S=>p.persistence.referenceDelegate.addReference(m,g.targetId,S)).next(()=>$.forEach(g.ds,S=>p.persistence.referenceDelegate.removeReference(m,g.targetId,S)))))}catch(m){if(!ta(m))throw m;Q(Gm,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const S=p.Ms.get(g),I=S.snapshotVersion,P=S.withLastLimboFreeSnapshotVersion(I);p.Ms=p.Ms.insert(g,P)}}}(r.localStore,i))}async function vR(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){Q(tg,"User change. New user:",e.toKey());const r=await dT(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(u=>{u.forEach(c=>{c.reject(new X(K.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await CT(n,r.Ls)}}function _R(t,e){const n=ve(t),r=n.Au.get(e);if(r&&r.hu)return _e().add(r.key);{let s=_e();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const u=n.Tu.get(o);s=s.unionWith(u.view.nu)}return s}}function AT(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ST.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_R.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gR.bind(null,e),e.Pu.H_=sR.bind(null,e.eventManager),e.Pu.yu=iR.bind(null,e.eventManager),e}class sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pT(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return PN(this.persistence,new xN,e.initialUser,this.serializer)}Cu(e){return new hT(Km.mi,this.serializer)}Du(e){return new VN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sh.provider={build:()=>new sh};class wR extends sh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){We(this.persistence.referenceDelegate instanceof rh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new pN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new hT(r=>rh.mi(r,n),this.serializer)}}class bp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vR.bind(null,this.syncEngine),await ZN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tR}()}createDatastore(e){const n=pT(e.databaseInfo.databaseId),r=function(i){return new BN(i)}(e.databaseInfo);return function(i,o,u,c){return new KN(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new GN(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>qv(this.syncEngine,n,0),function(){return $v.v()?new $v:new FN}())}createSyncEngine(e,n){return function(s,i,o,u,c,d,p){const m=new cR(s,i,o,u,c,d);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ve(s);Q(Go,"RemoteStore shutting down."),i.Ea.add(5),await Kl(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}bp.provider={build:()=>new bp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="FirestoreClient";class TR{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=xt.UNAUTHENTICATED,this.clientId=bh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Q(Ks,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q(Ks,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_T(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ud(t,e){t.asyncQueue.verifyOperationInProgress(),Q(Ks,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await dT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Qv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await SR(t);Q(Ks,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>zv(e.remoteStore,s)),t._onlineComponents=e}async function SR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(Ks,"Using user provided OfflineComponentProvider");try{await Ud(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Bi("Error using user provided cache. Falling back to memory cache: "+n),await Ud(t,new sh)}}else Q(Ks,"Using default OfflineComponentProvider"),await Ud(t,new wR(void 0));return t._offlineComponents}async function IR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(Ks,"Using user provided OnlineComponentProvider"),await Qv(t,t._uninitializedComponentsProvider._online)):(Q(Ks,"Using default OnlineComponentProvider"),await Qv(t,new bp))),t._onlineComponents}async function CR(t){const e=await IR(t),n=e.eventManager;return n.onListen=hR.bind(null,e.syncEngine),n.onUnlisten=pR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mR.bind(null,e.syncEngine),n}function AR(t,e,n={}){const r=new Mi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const p=new ER({next:g=>{p.Nu(),o.enqueueAndForget(()=>rR(i,m));const S=g.docs.has(u);!S&&g.fromCache?d.reject(new X(K.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&g.fromCache&&c&&c.source==="server"?d.reject(new X(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new oR(Um(u.path),p,{includeMetadataChanges:!0,qa:!0});return nR(i,m)}(await CR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="firestore.googleapis.com",Xv=!0;class Jv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kT,this.ssl=Xv}else this.host=e.host,this.ssl=e.ssl??Xv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dN)throw new X(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bT(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rg{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new PE;switch(r.type){case"firstParty":return new $k(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Yv.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Yv.delete(n),r.terminate())}(this),Promise.resolve()}}function xT(t,e,n,r={}){var d;t=Xc(t,rg);const s=jl(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;s&&(IA(`https://${u}`),kA("Firestore",!0)),i.host!==kT&&i.host!==u&&Bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:u,ssl:s,emulatorOptions:r};if(!Kc(c,o)&&(t._setSettings(c),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=xt.MOCK_USER;else{p=CA(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new X(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new xt(g)}t._authCredentials=new Vk(new RE(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jh(this.firestore,e,this._query)}}class Dt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}toJSON(){return{type:Dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(zl(n,Dt._jsonSchema))return new Dt(e,r||null,new J(ze.fromString(n.referencePath)))}}Dt._jsonSchemaVersion="firestore/documentReference/1.0",Dt._jsonSchema={type:nt("string",Dt._jsonSchemaVersion),referencePath:nt("string")};class Yo extends jh{constructor(e,n,r){super(e,n,Um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new J(e))}withConverter(e){return new Yo(this.firestore,e,this._path)}}function bR(t,e,...n){if(t=$l(t),arguments.length===1&&(e=bh.newId()),Kk("doc","path",e),t instanceof rg){const r=ze.fromString(e,...n);return hv(r),new Dt(t,null,new J(r))}{if(!(t instanceof Dt||t instanceof Yo))throw new X(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return hv(r),new Dt(t.firestore,t instanceof Yo?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="AsyncQueue";class e_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new mT(this,"async_queue_retry"),this._c=()=>{const r=$d();r&&Q(Zv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=$d();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=$d();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Mi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ta(e))throw e;Q(Zv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Xr("INTERNAL UNHANDLED ERROR: ",t_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Zm.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&oe(47125,{Pc:t_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function t_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class sg extends rg{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new e_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e_(e),this._firestoreClient=void 0,await e}}}function kR(t,e){const n=typeof t=="object"?t:Bb(),r=typeof t=="string"?t:Jc,s=Mm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=EA("firestore");i&&xT(s,...i)}return s}function NT(t){if(t._terminated)throw new X(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||xR(t),t._firestoreClient}function xR(t){var r,s,i;const e=t._freezeSettings(),n=function(u,c,d,p){return new ox(u,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,bT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new TR(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(dt.fromBase64String(e))}catch(n){throw new X(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kn(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zl(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:nt("string",Kn._jsonSchemaVersion),bytes:nt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zr._jsonSchemaVersion}}static fromJSON(e){if(zl(e,zr._jsonSchema))return new zr(e.latitude,e.longitude)}}zr._jsonSchemaVersion="firestore/geoPoint/1.0",zr._jsonSchema={type:nt("string",zr._jsonSchemaVersion),latitude:nt("number"),longitude:nt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zl(e,Hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Hr(e.vectorValues);throw new X(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hr._jsonSchemaVersion="firestore/vectorValue/1.0",Hr._jsonSchema={type:nt("string",Hr._jsonSchemaVersion),vectorValues:nt("object")};const NR=new RegExp("[~\\*/\\[\\]]");function RR(t,e,n){if(e.search(NR)>=0)throw n_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new ig(...e.split("."))._internalPath}catch{throw n_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function n_(t,e,n,r,s){let i=`Function ${e}() called with invalid data`;i+=". ";let o="";return new X(K.INVALID_ARGUMENT,i+t+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(PT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class PR extends RT{data(){return super.data()}}function PT(t,e){return typeof e=="string"?RR(t,e):e instanceof ig?e._internalPath:e._delegate._internalPath}class DT{convertValue(e,n="none"){switch(Hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hl(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[fp].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ye(o.doubleValue));return new Hr(n)}convertGeoPoint(e){return new zr(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Rh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Nl(e));default:return null}}convertTimestamp(e){const n=Bs(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ze.fromString(e);We(uT(r),9688,{name:e});const s=new Ho(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||Xr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}class Io{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vs extends RT{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(PT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Vs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Vs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vs._jsonSchema={type:nt("string",Vs._jsonSchemaVersion),bundleSource:nt("string","DocumentSnapshot"),bundleName:nt("string"),bundle:nt("string")};class sl extends Vs{data(e={}){return super.data(e)}}class Oo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Io(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sl(this._firestore,this._userDataWriter,r.key,r,new Io(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new sl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Io(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new sl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Io(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return u.type!==0&&(d=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),p=o.indexOf(u.doc.key)),{type:DR(u.type),doc:c,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function DR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t){t=Xc(t,Dt);const e=Xc(t.firestore,sg);return AR(NT(e),t._key).then(n=>LR(e,t,n))}Oo._jsonSchemaVersion="firestore/querySnapshot/1.0",Oo._jsonSchema={type:nt("string",Oo._jsonSchemaVersion),bundleSource:nt("string","QuerySnapshot"),bundleName:nt("string"),bundle:nt("string")};class OR extends DT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,n)}}function LR(t,e,n){const r=n.docs.get(e._key),s=new OR(t);return new Vs(t,s,e._key,r,new Io(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ea=s})(Ul),Zn(new Pn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new sg(new Fk(r.getProvider("auth-internal")),new Uk(o,r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new X(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ho(d.options.projectId,p)}(o,s),o);return i={useFetchStreams:n,...i},u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),tn(av,lv,e),tn(av,lv,"esm2020")})();const r_=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:DT,Bytes:Kn,CollectionReference:Yo,DocumentReference:Dt,DocumentSnapshot:Vs,FieldPath:ig,Firestore:sg,FirestoreError:X,GeoPoint:zr,Query:jh,QueryDocumentSnapshot:sl,QuerySnapshot:Oo,SnapshotMetadata:Io,Timestamp:Je,VectorValue:Hr,_AutoId:bh,_ByteString:dt,_DatabaseId:Ho,_DocumentKey:J,_EmptyAuthCredentialsProvider:PE,_FieldPath:Pt,_cast:Xc,_logWarn:Bi,_validateIsNotUsedTogether:DE,connectFirestoreEmulator:xT,doc:bR,ensureFirestoreConfigured:NT,getDoc:MR,getFirestore:kR},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="firebasestorage.googleapis.com",VR="storageBucket",FR=2*60*1e3,jR=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends yr{constructor(e,n,r=0){super(Bd(e),`Firebase Storage: ${n} (${Bd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Bd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gr||(gr={}));function Bd(t){return"storage/"+t}function $R(){const t="An unknown error occurred, please check the error payload for server response.";return new vr(gr.UNKNOWN,t)}function UR(){return new vr(gr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BR(){return new vr(gr.CANCELED,"User canceled the upload/download.")}function zR(t){return new vr(gr.INVALID_URL,"Invalid URL '"+t+"'.")}function HR(t){return new vr(gr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function s_(t){return new vr(gr.INVALID_ARGUMENT,t)}function OT(){return new vr(gr.APP_DELETED,"The Firebase app was deleted.")}function WR(t){return new vr(gr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qn.makeFromUrl(e,n)}catch{return new qn(e,"")}if(r.path==="")return r;throw HR(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",u=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function d(D){D.path_=decodeURIComponent(D.path)}const p="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",S=new RegExp(`^https?://${m}/${p}/b/${s}/o${g}`,"i"),I={bucket:1,path:3},P=n===MT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,L="([^?#]*)",E=new RegExp(`^https?://${P}/${s}/${L}`,"i"),C=[{regex:u,indices:c,postModify:i},{regex:S,indices:I,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let D=0;D<C.length;D++){const F=C[D],j=F.regex.exec(e);if(j){const k=j[F.indices.bucket];let w=j[F.indices.path];w||(w=""),r=new qn(k,w),F.postModify(r);break}}if(r==null)throw zR(e);return r}}class KR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t,e,n){let r=1,s=null,i=null,o=!1,u=0;function c(){return u===2}let d=!1;function p(...L){d||(d=!0,e.apply(null,L))}function m(L){s=setTimeout(()=>{s=null,t(S,c())},L)}function g(){i&&clearTimeout(i)}function S(L,...E){if(d){g();return}if(L){g(),p.call(null,L,...E);return}if(c()||o){g(),p.call(null,L,...E);return}r<64&&(r*=2);let C;u===1?(u=2,C=0):C=(r+Math.random())*1e3,m(C)}let I=!1;function P(L){I||(I=!0,g(),!d&&(s!==null?(L||(u=2),clearTimeout(s),m(0)):L||(u=1)))}return m(0),i=setTimeout(()=>{o=!0,P(!0)},n),P}function GR(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t){return t!==void 0}function i_(t,e,n,r){if(r<e)throw s_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw s_(`Invalid value for '${t}'. Expected ${n} or less.`)}function YR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ih;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ih||(ih={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n,r,s,i,o,u,c,d,p,m,g=!0,S=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=m,this.retry=g,this.isUsingEmulator=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,P)=>{this.resolve_=I,this.reject_=P,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new qu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=u=>{const c=u.loaded,d=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const u=i.getErrorCode()===ih.NO_ERROR,c=i.getStatus();if(!u||XR(c,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===ih.ABORT;r(!1,new qu(!1,null,p));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new qu(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());QR(c)?i(c):i()}catch(c){o(c)}else if(u!==null){const c=$R();c.serverResponse=u.getErrorText(),this.errorCallback_?o(this.errorCallback_(u,c)):o(c)}else if(s.canceled){const c=this.appDelete_?OT():BR();o(c)}else{const c=UR();o(c)}};this.canceled_?n(!1,new qu(!1,null,!0)):this.backoffId_=qR(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&GR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function ZR(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function e2(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function t2(t,e){e&&(t["X-Firebase-GMPID"]=e)}function n2(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function r2(t,e,n,r,s,i,o=!0,u=!1){const c=YR(t.urlParams),d=t.url+c,p=Object.assign({},t.headers);return t2(p,e),ZR(p,n),e2(p,i),n2(p,r),new JR(d,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function i2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n){this._service=e,n instanceof qn?this._location=n:this._location=qn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new oh(e,n)}get root(){const e=new qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return i2(this._location.path)}get storage(){return this._service}get parent(){const e=s2(this._location.path);if(e===null)return null;const n=new qn(this._location.bucket,e);return new oh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw WR(e)}}function o_(t,e){const n=e==null?void 0:e[VR];return n==null?null:qn.makeFromBucketSpec(n,t)}class o2{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=MT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FR,this._maxUploadRetryTime=jR,this._requests=new Set,s!=null?this._bucket=qn.makeFromBucketSpec(s,this._host):this._bucket=o_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qn.makeFromBucketSpec(this._url,e):this._bucket=o_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){i_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){i_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Es(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oh(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new KR(OT());{const o=r2(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const a_="@firebase/storage",l_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="storage";function l2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new o2(n,r,s,e,Ul)}function u2(){Zn(new Pn(a2,l2,"PUBLIC").setMultipleInstances(!0)),tn(a_,l_,""),tn(a_,l_,"esm2020")}u2();const c2=(t,e)=>e.some(n=>t instanceof n);let u_,c_;function h2(){return u_||(u_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d2(){return c_||(c_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LT=new WeakMap,kp=new WeakMap,VT=new WeakMap,zd=new WeakMap,og=new WeakMap;function f2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Fs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&LT.set(n,t)}).catch(()=>{}),og.set(e,t),e}function p2(t){if(kp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});kp.set(t,e)}let xp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||VT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function m2(t){xp=t(xp)}function g2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Hd(this),e,...n);return VT.set(r,e.sort?e.sort():[e]),Fs(r)}:d2().includes(t)?function(...e){return t.apply(Hd(this),e),Fs(LT.get(this))}:function(...e){return Fs(t.apply(Hd(this),e))}}function y2(t){return typeof t=="function"?g2(t):(t instanceof IDBTransaction&&p2(t),c2(t,h2())?new Proxy(t,xp):t)}function Fs(t){if(t instanceof IDBRequest)return f2(t);if(zd.has(t))return zd.get(t);const e=y2(t);return e!==t&&(zd.set(t,e),og.set(e,t)),e}const Hd=t=>og.get(t);function v2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=Fs(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Fs(o.result),c.oldVersion,c.newVersion,Fs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const _2=["get","getKey","getAll","getAllKeys","count"],w2=["put","add","delete","clear"],Wd=new Map;function h_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wd.get(e))return Wd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=w2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||_2.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),s&&c.done]))[0]};return Wd.set(e,i),i}m2(t=>({...t,get:(e,n,r)=>h_(e,n)||t.get(e,n,r),has:(e,n)=>!!h_(e,n)||t.has(e,n)}));const FT="@firebase/installations",ag="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=1e4,$T=`w:${ag}`,UT="FIS_v2",E2="https://firebaseinstallations.googleapis.com/v1",T2=60*60*1e3,S2="installations",I2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},zi=new qi(S2,I2,C2);function BT(t){return t instanceof yr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT({projectId:t}){return`${E2}/projects/${t}/installations`}function HT(t){return{token:t.token,requestStatus:2,expiresIn:b2(t.expiresIn),creationTime:Date.now()}}async function WT(t,e){const r=(await e.json()).error;return zi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function KT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function A2(t,{refreshToken:e}){const n=KT(t);return n.append("Authorization",k2(e)),n}async function qT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function b2(t){return Number(t.replace("s","000"))}function k2(t){return`${UT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=zT(t),s=KT(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:UT,appId:t.appId,sdkVersion:$T},u={method:"POST",headers:s,body:JSON.stringify(o)},c=await qT(()=>fetch(r,u));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:HT(d.authToken)}}else throw await WT("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=/^[cdef][\w-]{21}$/,Np="";function P2(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=D2(t);return R2.test(n)?n:Np}catch{return Np}}function D2(t){return N2(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=new Map;function YT(t,e){const n=$h(t);XT(n,e),M2(n,e)}function XT(t,e){const n=QT.get(t);if(n)for(const r of n)r(e)}function M2(t,e){const n=O2();n&&n.postMessage({key:t,fid:e}),L2()}let ki=null;function O2(){return!ki&&"BroadcastChannel"in self&&(ki=new BroadcastChannel("[Firebase] FID Change"),ki.onmessage=t=>{XT(t.data.key,t.data.fid)}),ki}function L2(){QT.size===0&&ki&&(ki.close(),ki=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="firebase-installations-database",F2=1,Hi="firebase-installations-store";let Kd=null;function lg(){return Kd||(Kd=v2(V2,F2,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Hi)}}})),Kd}async function ah(t,e){const n=$h(t),s=(await lg()).transaction(Hi,"readwrite"),i=s.objectStore(Hi),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&YT(t,e.fid),e}async function JT(t){const e=$h(t),r=(await lg()).transaction(Hi,"readwrite");await r.objectStore(Hi).delete(e),await r.done}async function Uh(t,e){const n=$h(t),s=(await lg()).transaction(Hi,"readwrite"),i=s.objectStore(Hi),o=await i.get(n),u=e(o);return u===void 0?await i.delete(n):await i.put(u,n),await s.done,u&&(!o||o.fid!==u.fid)&&YT(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ug(t){let e;const n=await Uh(t.appConfig,r=>{const s=j2(r),i=$2(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Np?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function j2(t){const e=t||{fid:P2(),registrationStatus:0};return ZT(e)}function $2(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(zi.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=U2(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:B2(t)}:{installationEntry:e}}async function U2(t,e){try{const n=await x2(t,e);return ah(t.appConfig,n)}catch(n){throw BT(n)&&n.customData.serverCode===409?await JT(t.appConfig):await ah(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function B2(t){let e=await d_(t.appConfig);for(;e.registrationStatus===1;)await GT(100),e=await d_(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await ug(t);return r||n}return e}function d_(t){return Uh(t,e=>{if(!e)throw zi.create("installation-not-found");return ZT(e)})}function ZT(t){return z2(t)?{fid:t.fid,registrationStatus:0}:t}function z2(t){return t.registrationStatus===1&&t.registrationTime+jT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H2({appConfig:t,heartbeatServiceProvider:e},n){const r=W2(t,n),s=A2(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:$T,appId:t.appId}},u={method:"POST",headers:s,body:JSON.stringify(o)},c=await qT(()=>fetch(r,u));if(c.ok){const d=await c.json();return HT(d)}else throw await WT("Generate Auth Token",c)}function W2(t,{fid:e}){return`${zT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cg(t,e=!1){let n;const r=await Uh(t.appConfig,i=>{if(!eS(i))throw zi.create("not-registered");const o=i.authToken;if(!e&&G2(o))return i;if(o.requestStatus===1)return n=K2(t,e),i;{if(!navigator.onLine)throw zi.create("app-offline");const u=Y2(i);return n=q2(t,u),u}});return n?await n:r.authToken}async function K2(t,e){let n=await f_(t.appConfig);for(;n.authToken.requestStatus===1;)await GT(100),n=await f_(t.appConfig);const r=n.authToken;return r.requestStatus===0?cg(t,e):r}function f_(t){return Uh(t,e=>{if(!eS(e))throw zi.create("not-registered");const n=e.authToken;return X2(n)?{...e,authToken:{requestStatus:0}}:e})}async function q2(t,e){try{const n=await H2(t,e),r={...e,authToken:n};return await ah(t.appConfig,r),n}catch(n){if(BT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await JT(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await ah(t.appConfig,r)}throw n}}function eS(t){return t!==void 0&&t.registrationStatus===2}function G2(t){return t.requestStatus===2&&!Q2(t)}function Q2(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+T2}function Y2(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function X2(t){return t.requestStatus===1&&t.requestTime+jT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J2(t){const e=t,{installationEntry:n,registrationPromise:r}=await ug(e);return r?r.catch(console.error):cg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(t,e=!1){const n=t;return await eP(n),(await cg(n,e)).token}async function eP(t){const{registrationPromise:e}=await ug(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(t){if(!t||!t.options)throw qd("App Configuration");if(!t.name)throw qd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw qd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function qd(t){return zi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="installations",nP="installations-internal",rP=t=>{const e=t.getProvider("app").getImmediate(),n=tP(e),r=Mm(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},sP=t=>{const e=t.getProvider("app").getImmediate(),n=Mm(e,tS).getImmediate();return{getId:()=>J2(n),getToken:s=>Z2(n,s)}};function iP(){Zn(new Pn(tS,rP,"PUBLIC")),Zn(new Pn(nP,sP,"PRIVATE"))}iP();tn(FT,ag);tn(FT,ag,"esm2020");const oP=(t,e)=>e.some(n=>t instanceof n);let p_,m_;function aP(){return p_||(p_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lP(){return m_||(m_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nS=new WeakMap,Rp=new WeakMap,rS=new WeakMap,Gd=new WeakMap,hg=new WeakMap;function uP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Wr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nS.set(n,t)}).catch(()=>{}),hg.set(e,t),e}function cP(t){if(Rp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Rp.set(t,e)}let Pp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hP(t){Pp=t(Pp)}function dP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qd(this),e,...n);return rS.set(r,e.sort?e.sort():[e]),Wr(r)}:lP().includes(t)?function(...e){return t.apply(Qd(this),e),Wr(nS.get(this))}:function(...e){return Wr(t.apply(Qd(this),e))}}function fP(t){return typeof t=="function"?dP(t):(t instanceof IDBTransaction&&cP(t),oP(t,aP())?new Proxy(t,Pp):t)}function Wr(t){if(t instanceof IDBRequest)return uP(t);if(Gd.has(t))return Gd.get(t);const e=fP(t);return e!==t&&(Gd.set(t,e),hg.set(e,t)),e}const Qd=t=>hg.get(t);function sS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=Wr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Wr(o.result),c.oldVersion,c.newVersion,Wr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}function Yd(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Wr(n).then(()=>{})}const pP=["get","getKey","getAll","getAllKeys","count"],mP=["put","add","delete","clear"],Xd=new Map;function g_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xd.get(e))return Xd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=mP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||pP.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),s&&c.done]))[0]};return Xd.set(e,i),i}hP(t=>({...t,get:(e,n,r)=>g_(e,n)||t.get(e,n,r),has:(e,n)=>!!g_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="/firebase-messaging-sw.js",yP="/firebase-cloud-messaging-push-scope",iS="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",vP="https://fcmregistrations.googleapis.com/v1",oS="google.c.a.c_id",_P="google.c.a.c_l",wP="google.c.a.ts",EP="google.c.a.e",y_=1e4;var v_;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(v_||(v_={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Pl;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Pl||(Pl={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function TP(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="fcm_token_details_db",SP=5,__="fcm_token_object_Store";async function IP(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(Jd))return null;let e=null;return(await sS(Jd,SP,{upgrade:async(r,s,i,o)=>{if(s<2||!r.objectStoreNames.contains(__))return;const u=o.objectStore(__),c=await u.index("fcmSenderId").get(t);if(await u.clear(),!!c){if(s===2){const d=c;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:d.createTime??Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Mr(d.vapidKey)}}}else if(s===3){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Mr(d.auth),p256dh:Mr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Mr(d.vapidKey)}}}else if(s===4){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Mr(d.auth),p256dh:Mr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Mr(d.vapidKey)}}}}}})).close(),await Yd(Jd),await Yd("fcm_vapid_details_db"),await Yd("undefined"),CP(e)?e:null}function CP(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="firebase-messaging-database",bP=1,Dl="firebase-messaging-store";let Zd=null;function aS(){return Zd||(Zd=sS(AP,bP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Dl)}}})),Zd}async function kP(t){const e=lS(t),r=await(await aS()).transaction(Dl).objectStore(Dl).get(e);if(r)return r;{const s=await IP(t.appConfig.senderId);if(s)return await dg(t,s),s}}async function dg(t,e){const n=lS(t),s=(await aS()).transaction(Dl,"readwrite");return await s.objectStore(Dl).put(e,n),await s.done,e}function lS({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},pn=new qi("messaging","Messaging",xP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP(t,e){const n=await pg(t),r=uS(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(fg(t.appConfig),s)).json()}catch(o){throw pn.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw pn.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw pn.create("token-subscribe-no-token");return i.token}async function RP(t,e){const n=await pg(t),r=uS(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${fg(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw pn.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw pn.create("token-update-failed",{errorInfo:o})}if(!i.token)throw pn.create("token-update-no-token");return i.token}async function PP(t,e){const r={method:"DELETE",headers:await pg(t)};try{const i=await(await fetch(`${fg(t.appConfig)}/${e}`,r)).json();if(i.error){const o=i.error.message;throw pn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw pn.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function fg({projectId:t}){return`${vP}/projects/${t}/registrations`}async function pg({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function uS({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==iS&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=7*24*60*60*1e3;async function MP(t){const e=await LP(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Mr(e.getKey("auth")),p256dh:Mr(e.getKey("p256dh"))},r=await kP(t.firebaseDependencies);if(r){if(VP(r.subscriptionOptions,n))return Date.now()>=r.createTime+DP?OP(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await PP(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return w_(t.firebaseDependencies,n)}else return w_(t.firebaseDependencies,n)}async function OP(t,e){try{const n=await RP(t.firebaseDependencies,e),r={...e,token:n,createTime:Date.now()};return await dg(t.firebaseDependencies,r),n}catch(n){throw n}}async function w_(t,e){const r={token:await NP(t,e),createTime:Date.now(),subscriptionOptions:e};return await dg(t,r),r.token}async function LP(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:TP(e)})}function VP(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return FP(e,t),jP(e,t),$P(e,t),e}function FP(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function jP(t,e){e.data&&(t.data=e.data)}function $P(t,e){var s,i,o,u;if(!e.fcmOptions&&!((s=e.notification)!=null&&s.click_action))return;t.fcmOptions={};const n=((i=e.fcmOptions)==null?void 0:i.link)??((o=e.notification)==null?void 0:o.click_action);n&&(t.fcmOptions.link=n);const r=(u=e.fcmOptions)==null?void 0:u.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t){return typeof t=="object"&&!!t&&oS in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(t){if(!t||!t.options)throw ef("App Configuration Object");if(!t.name)throw ef("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw ef(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function ef(t){return pn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=BP(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HP(t){try{t.swRegistration=await navigator.serviceWorker.register(gP,{scope:yP}),t.swRegistration.update().catch(()=>{}),await WP(t.swRegistration)}catch(e){throw pn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function WP(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${y_} ms`)),y_),s=t.installing||t.waiting;t.active?(clearTimeout(r),e()):s?s.onstatechange=i=>{var o;((o=i.target)==null?void 0:o.state)==="activated"&&(s.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KP(t,e){if(!e&&!t.swRegistration&&await HP(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw pn.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qP(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=iS)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP(t,e){if(!navigator)throw pn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw pn.create("permission-blocked");return await qP(t,e==null?void 0:e.vapidKey),await KP(t,e==null?void 0:e.serviceWorkerRegistration),MP(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP(t,e,n){const r=YP(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[oS],message_name:n[_P],message_time:n[wP],message_device_time:Math.floor(Date.now()/1e3)})}function YP(t){switch(t){case Pl.NOTIFICATION_CLICKED:return"notification_open";case Pl.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XP(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Pl.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(E_(n)):t.onMessageHandler.next(E_(n)));const r=n.data;UP(r)&&r[EP]==="1"&&await QP(t,n.messageType,r)}const T_="@firebase/messaging",S_="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=t=>{const e=new zP(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>XP(e,n)),e},ZP=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>GP(e,r)}};function eD(){Zn(new Pn("messaging",JP,"PUBLIC")),Zn(new Pn("messaging-internal",ZP,"PRIVATE")),tn(T_,S_),tn(T_,S_,"esm2020")}eD();function tD(t,e=250){const[n,r]=M.useState(t);return M.useEffect(()=>{const s=setTimeout(()=>r(t),e);return()=>clearTimeout(s)},[t,e]),n}function Dp(t){if(!t)return null;if(t instanceof Date)return t;if(typeof t=="string"){const e=new Date(t);return Number.isNaN(e.valueOf())?null:e}if(typeof t=="number")return new Date(t);if(typeof t=="object"&&"toDate"in t)try{const e=t.toDate;if(typeof e=="function"){const n=e.call(t);return n instanceof Date?n:null}}catch{return null}return null}const nD="Club",rD=new Set(["club","any","any club","tbd","n/a"]),Gl=t=>{const e=new Set;return t.forEach(n=>{if(typeof n!="string")return;const r=n.trim();r&&e.add(r)}),Array.from(e)},il=t=>{if(typeof t!="string")return;const e=t.trim();if(!e)return;const n=e.toLowerCase().replace(/\s+/g," ");if(!rD.has(n))return e},pc=(t,e)=>{const n=typeof(t==null?void 0:t.clubId)=="string"?t.clubId:"";if(n&&e){const r=il(e[n]);if(r)return r}return il(t==null?void 0:t.clubName)},mc=t=>{const e=t,n=[e==null?void 0:e.title,e==null?void 0:e.name,e==null?void 0:e.matchTitle,e==null?void 0:e.matchName,e==null?void 0:e.eventTitle,e==null?void 0:e.displayName];for(const r of n)if(typeof r=="string"&&r.trim())return r.trim();return typeof(e==null?void 0:e.id)=="string"&&e.id.trim()?e.id.trim():"Untitled"},ba=t=>{const e=t;if(Array.isArray(e==null?void 0:e.disciplines)){for(const n of e.disciplines)if(typeof n=="string"&&n.trim())return n.trim()}if(typeof(e==null?void 0:e.discipline)=="string"&&e.discipline.trim())return e.discipline.trim();if(typeof(e==null?void 0:e.type)=="string"){const n=e.type.trim();if(n&&n!=="M")return n}return""},gc=t=>{const e=new Set,n=t,r=s=>{if(typeof s!="string")return;const i=s.trim();!i||i==="M"||e.add(i)};return Array.isArray(n==null?void 0:n.disciplines)&&n.disciplines.forEach(r),r(n==null?void 0:n.discipline),r(n==null?void 0:n.type),Array.from(e)},Ei=t=>{const e=new Set,n=t,r=s=>{if(Array.isArray(s)){s.forEach(i=>{typeof i=="string"&&i.split(",").map(o=>o.trim()).filter(Boolean).forEach(o=>e.add(o))});return}typeof s=="string"&&s.split(",").map(i=>i.trim()).filter(Boolean).forEach(i=>e.add(i))};return r(n==null?void 0:n.subDiscipline),r(n==null?void 0:n.subDisciplines),Array.from(e)},Or=t=>{const e=new Set,n=t,r=i=>{typeof i=="string"&&i.split(",").map(o=>o.trim()).filter(Boolean).forEach(o=>e.add(o))},s=i=>{Array.isArray(i)?i.forEach(r):r(i)};return s(n==null?void 0:n.seriesIds),r(n==null?void 0:n.seriesId),r(n==null?void 0:n.seriesKey),r(n==null?void 0:n.seriesSlug),r(n==null?void 0:n.seriesName),r(n==null?void 0:n.seriesShortName),s(n==null?void 0:n.seriesNames),s(n==null?void 0:n.seriesLabels),Array.isArray(n==null?void 0:n.series)?n.series.forEach(i=>{if(typeof i=="string"){r(i);return}r(i==null?void 0:i.id),r(i==null?void 0:i.seriesId),r(i==null?void 0:i.slug),r(i==null?void 0:i.shortName),r(i==null?void 0:i.name)}):r(n==null?void 0:n.series),Array.from(e)},tf=t=>Ei(t).sort((n,r)=>n.localeCompare(r))[0]||"",I_=t=>Or(t).sort((n,r)=>n.localeCompare(r))[0]||"",yc=t=>{const e=new Set,n=r=>{Array.isArray(r)?r.forEach(s=>typeof s=="string"&&e.add(s.trim())):typeof r=="string"&&e.add(r.trim())};return n(t==null?void 0:t.tiers),n(t==null?void 0:t.matchTier),n(t==null?void 0:t.customTier),Array.from(e)},vc=t=>{const e=typeof(t==null?void 0:t.status)=="string"?t.status.trim():"";return e||(t!=null&&t.soldOut?"Full":"Open")},sD=t=>{var r,s,i;const e=(t==null?void 0:t.date)??(t==null?void 0:t.start)??null,n=Dp(e);if(n)return n.toISOString().slice(0,10);if(!e){const o=Array.isArray((r=t.schedule)==null?void 0:r.days)?(i=(s=t.schedule)==null?void 0:s.days[0])==null?void 0:i.date:void 0,u=Dp(o);if(u)return u.toISOString().slice(0,10)}return typeof e=="string"&&e.length>=10?e.slice(0,10):null},iD=t=>{var r,s;const n=(Array.isArray((r=t.schedule)==null?void 0:r.days)?(s=t.schedule)==null?void 0:s.days:[]).map(i=>Dp(i==null?void 0:i.date)).filter(i=>i instanceof Date).map(i=>i.toISOString().slice(0,10));if(n.length)return n.reduce((i,o)=>o>i?o:i)},xi=t=>{if(typeof t!="string")return;const e=t.trim();if(e)return e.replace(/\s+/g," ")},oD=t=>{const e=(t==null?void 0:t.location)??{},n=(e==null?void 0:e.address)??{};return{addressLine:xi((e==null?void 0:e.fullAddress)??(e==null?void 0:e.formattedAddress)),city:xi(n==null?void 0:n.city),region:xi(n==null?void 0:n.region),postalCode:xi(n==null?void 0:n.postalCode)}},aD=t=>{const e=xi(t==null?void 0:t.city),n=xi(t==null?void 0:t.region);if(e&&n)return`${e}, ${n}`;if(e)return e;if(n)return n;const r=xi(t==null?void 0:t.addressLine);if(!r)return;if(r.length<=44)return r;const s=r.split(",").map(i=>i.trim()).filter(Boolean);if(s.length>=2){const i=`${s[0]}, ${s[1]}`;if(i.length<=44)return i}},lD=(t,e,n)=>{const r=new Date,s=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,i=new Map,o=typeof n.minEvents=="number"?Math.max(0,n.minEvents):0;t.forEach(c=>{var T,x;const d=Number.isFinite(c==null?void 0:c.lat)?Number(c.lat):Number((T=c.location)==null?void 0:T.lat),p=Number.isFinite(c==null?void 0:c.lng)?Number(c.lng):Number((x=c.location)==null?void 0:x.lng);if(!Number.isFinite(d)||!Number.isFinite(p))return;const m=sD(c);if(!m||n.from&&m<n.from||n.to&&m>n.to)return;const g=gc(c);if(n.disciplines.length&&!n.disciplines.some(R=>g.includes(R)))return;const S=Ei(c);if(n.subDisciplines.length&&!n.subDisciplines.some(R=>S.includes(R)))return;const I=Or(c);if(n.series.length&&!(n.seriesMode==="and"?n.series.every(b=>I.includes(b)):n.series.some(b=>I.includes(b))))return;const P=yc(c);if(n.tiers.length&&!n.tiers.some(R=>P.includes(R)))return;const L=vc(c);if(n.statuses.length&&!n.statuses.includes(L))return;const E=c.clubId?String(c.clubId):`geo:${d.toFixed(4)}:${p.toFixed(4)}`,_=oD(c),C=pc(c,e),D=C||(typeof c.title=="string"&&c.title.trim()?c.title.trim():nD);let F=i.get(E);F||(F={id:E,name:D,lat:d,lng:p,addressLine:_.addressLine,city:_.city,region:_.region,postalCode:_.postalCode,events:[],eventIds:new Set,disciplines:new Set,subDisciplines:new Set,tiers:new Set},i.set(E,F)),!F.addressLine&&_.addressLine&&(F.addressLine=_.addressLine),!F.city&&_.city&&(F.city=_.city),!F.region&&_.region&&(F.region=_.region),!F.postalCode&&_.postalCode&&(F.postalCode=_.postalCode);const j=String((c==null?void 0:c.id)??`${D}:${m}`);if(F.eventIds.has(j))return;F.eventIds.add(j);const k=iD(c),w=g.length?g:void 0,A=S.length?S:void 0;F.events.push({id:j,title:mc(c),date:m,endDate:k,disciplines:w,subDiscipline:A,seriesIds:I.length?I:void 0,matchTier:c==null?void 0:c.matchTier,customTier:c==null?void 0:c.customTier,status:L}),g.forEach(R=>F==null?void 0:F.disciplines.add(R)),S.forEach(R=>F==null?void 0:F.subDisciplines.add(R)),P.forEach(R=>F==null?void 0:F.tiers.add(R))});const u=[];return i.forEach(c=>{const d=c.events.sort((m,g)=>m.date.localeCompare(g.date));if(o&&d.length<o)return;const p=d.filter(m=>m.date>=s);u.push({id:c.id,name:c.name,lat:c.lat,lng:c.lng,addressLine:c.addressLine,city:c.city,region:c.region,postalCode:c.postalCode,events:d,upcomingCount:p.length,nextEventDate:p.length?p[0].date:void 0,disciplines:Array.from(c.disciplines),subDisciplines:Array.from(c.subDisciplines),tiers:Array.from(c.tiers)})}),u},uD=t=>[...t].sort((e,n)=>e.nextEventDate&&n.nextEventDate?e.nextEventDate.localeCompare(n.nextEventDate):e.nextEventDate?-1:n.nextEventDate?1:e.name.localeCompare(n.name)),ka=(t,e,n)=>{const r=t.map(u=>n(u)),s=new Map;r.forEach(u=>{new Set(u).forEach(d=>{d&&s.set(d,(s.get(d)||0)+1)})});const i=t.length,o=[];return s.forEach((u,c)=>{c&&(e.length===0&&i>0&&r.reduce((p,m)=>m.includes(c)?p+1:p,0)===i||o.push({value:c,count:u}))}),e.forEach(u=>{u&&(o.some(c=>c.value===u)||o.push({value:u,count:0}))}),o.sort((u,c)=>u.value.localeCompare(c.value))},C_=t=>{const e=typeof t=="number"?t:Number(t);return Number.isFinite(e)?e:null},A_=({lat:t,lng:e,address:n})=>{const r=C_(t),s=C_(e);return r!=null&&s!=null?`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${r},${s}`)}`:typeof n=="string"&&n.trim()?`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(n.trim())}`:null},cD=t=>{var n;const e=[];return Array.isArray(t.disciplines)&&e.push(...t.disciplines),(n=t.events)==null||n.forEach(r=>{Array.isArray(r.disciplines)&&e.push(...r.disciplines)}),Gl(e)},hD=t=>{var n;const e=[];return Array.isArray(t.subDisciplines)&&e.push(...t.subDisciplines),(n=t.events)==null||n.forEach(r=>{const s=Array.isArray(r.subDiscipline)?r.subDiscipline:[];e.push(...s)}),Gl(e)},dD=t=>{var n;const e=[];return Array.isArray(t.tiers)&&e.push(...t.tiers),(n=t.events)==null||n.forEach(r=>{r.matchTier&&e.push(r.matchTier),r.customTier&&e.push(r.customTier)}),Gl(e)},fD=t=>{var n;const e=[];return(n=t.events)==null||n.forEach(r=>{Array.isArray(r.seriesIds)&&e.push(...r.seriesIds)}),Gl(e)},pD=t=>{var n;const e=[];return(n=t.events)==null||n.forEach(r=>{typeof r.status=="string"&&r.status.trim()&&e.push(r.status.trim())}),Gl(e)},yi={PR:"Precision Rifle",PS:"Practical Shooting",SG:"Shot Gun",CW:"Cowboy Western",BR:"Benchrest",SPC:"Specialty events/other",ARCH:"Archery",MTS:"Mounted Shooting"},oo={RF:"Rimfire",CF:"Centerfire",AG:"Airgun","1G":"1 Gun","2G":"2 Gun","3G":"3 Gun"},Gu=Jf,mD=hC,gD="#dc2626",yD="#16a34a",vD="#2563eb",_D="#16a34a",wD="#dc2626",ED="#f59e0b",ol="#f59e0b",b_=["#f59e0b","#22c55e","#3b82f6","#ef4444","#a855f7","#14b8a6","#f97316","#eab308","#06b6d4","#84cc16"],k_="https://shootershub.fortneyengineering.com",TD="shootershub.fortneyengineering.com",nf=t=>t.replace(/-/g,""),x_=t=>{const e=new Set;return t.forEach(n=>{if(typeof n!="string")return;const r=n.trim();r&&e.add(r)}),Array.from(e)},sr=t=>{const e=typeof t=="string"?t.trim():"";if(!e)return ol;let n=0;for(let r=0;r<e.length;r+=1)n=(n*31+e.charCodeAt(r))%2147483647;return b_[Math.abs(n)%b_.length]||ol},N_=t=>typeof t!="number"||t<=0?"No upcoming matches":`${t} upcoming`,SD=t=>!t||typeof t!="object"?[]:Array.isArray(t.items)?t.items:Array.isArray(t.series)?t.series:Array.isArray(t.data)?t.data:[],ID=t=>{const e={};return SD(t).forEach(r=>{if(!r||typeof r!="object")return;const s=typeof r.id=="string"?r.id.trim():"",i=typeof r.slug=="string"?r.slug.trim():"",o=r.shortName||r.abbreviation||r.name||r.title||s||i,u=typeof o=="string"?o.trim():"";u&&(s&&(e[s]=u),i&&(e[i]=u))}),e},xa=(t,e)=>{const n=t.trim().replace("#",""),r=n.length===3?n.split("").map(c=>c+c).join(""):n;if(!/^[0-9a-fA-F]{6}$/.test(r))return`rgba(245, 158, 11, ${e})`;const s=Number.parseInt(r,16),i=s>>16&255,o=s>>8&255,u=s&255;return`rgba(${i}, ${o}, ${u}, ${Math.max(0,Math.min(1,e))})`};function CD({mode:t="matches",allowedViews:e,defaultView:n,lockedClubId:r,defaultCenter:s,defaultRadius:i,hideDistanceFilters:o=!1,siteBaseUrlOverride:u,initialFilters:c}={}){const d=t,p=M.useMemo(()=>d==="matches"?["map","list","calendar","chart"]:["map","list"],[d]),m=M.useMemo(()=>{if(!Array.isArray(e)||e.length===0)return p;const h=Array.from(new Set(e)).filter(f=>p.includes(f));return h.length?h:p},[p,e]),g=(()=>{const a=(n&&m.includes(n)?n:m[0])??"map";if(typeof window>"u")return a;const h=new URLSearchParams(window.location.search).get("view");return h&&m.includes(h)?h:a})(),S=typeof r=="string"&&r.trim()?r.trim():"",I=M.useMemo(()=>({lat:Number.isFinite(s==null?void 0:s.lat)?Number(s==null?void 0:s.lat):Gu.lat,lng:Number.isFinite(s==null?void 0:s.lng)?Number(s==null?void 0:s.lng):Gu.lng}),[s]),P=M.useMemo(()=>{const a=Number(i);return Number.isFinite(a)?Math.max(0,Math.min(500,a)):100},[i]),L=M.useMemo(()=>{const a={...mD,...c||{}};return a.types=Array.isArray(a.types)?a.types:[],a.subDisciplines=Array.isArray(a.subDisciplines)?a.subDisciplines:[],a.tiers=Array.isArray(a.tiers)?a.tiers:[],a.statuses=Array.isArray(a.statuses)?a.statuses:[],a.series=Array.isArray(a.series)?a.series:[],a.seriesMode=a.seriesMode==="and"?"and":"or",a.sort||(a.sort="dateAsc"),a},[c]),E=M.useMemo(()=>S?{...L,lat:I.lat,lng:I.lng,radius:P}:L,[S,I.lat,I.lng,P,L]),_=iA(),{filterStorageKey:C,viewStorageKey:D}=M.useMemo(()=>{const a=fC(d);return S?{filterStorageKey:`${a.filterStorageKey}:club:${S}`,viewStorageKey:`${a.viewStorageKey}:club:${S}`}:a},[d,S]),[F,j]=M.useState(""),[k,w]=M.useState([]),[A,T]=M.useState([]),[x,R]=M.useState({}),b=M.useRef({}),Se=M.useRef(null),[me,ke]=M.useState({}),qe=M.useRef({}),[H,Z]=M.useState(g),se=M.useMemo(()=>m.map(h=>({id:h,label:h==="map"?"Map":h==="list"?"List":h==="calendar"?"Calendar":"Chart"})),[m]),Re=M.useCallback(a=>{m.includes(a)&&Z(a)},[m]);M.useEffect(()=>{m.includes(H)||Z(m[0]??"map")},[H,m]);const[le,xe]=M.useState(new Date),[Dn,vn]=M.useState(null),[Ot,nn]=M.useState(()=>{const a=new Date,h=new Date;return h.setMonth(a.getMonth()+6),{from:hn(a),to:hn(h)}}),[Ys,Ql]=M.useState({}),[_r,Xs]=M.useState({}),[Zr,Qi]=M.useState({}),[wr,Er]=M.useState(""),[ra,Bh]=M.useState(null),[Yl,Yi]=M.useState(!1),[es,sa]=M.useState(!1),[Lt,ia]=M.useState(["club","time"]),[Et,Xl]=M.useState("club"),[Fe,ft]=M.useState("asc"),[rn,Jl]=M.useState(!0),[Ue,zh]=M.useState("alternate"),[de,Zl]=M.useState("inherit"),[Ee,oa]=M.useState("discipline"),[_n,eu]=M.useState(gD),[sn,aa]=M.useState(yD),[wn,ts]=M.useState(vD),[Tr,la]=M.useState(_D),[on,tu]=M.useState(wD),[Mn,nu]=M.useState(ED),ns=M.useMemo(()=>["club","time","discipline","subDiscipline","series","tier","status"],[]),er=M.useMemo(()=>({club:"Club",series:"Series",time:"Time",discipline:"Discipline",subDiscipline:"Sub-discipline",tier:"Tier",status:"Status"}),[]),lt=M.useCallback((a,h)=>{const{from:f,to:y}=Kw(a,h,"to");if(!f&&!y)return;const N=V=>Xn(V);nn(V=>{const B={from:f??V.from,to:y??V.to},G=Ad(B.from,B.to,V,"to");return G.from===V.from&&G.to===V.to?V:G});const O=N(f),W=N(y),q=O??W;q&&xe(V=>V.getFullYear()===q.getFullYear()&&V.getMonth()===q.getMonth()?V:new Date(q.getFullYear(),q.getMonth(),1))},[]),[U,ge]=M.useState(E),ie=tD(U,250),[ru,su]=M.useState(E),[Sr,iu]=M.useState({}),ou=M.useRef(""),On=M.useRef(""),Hh=M.useRef(""),rs=M.useRef(()=>{}),ss=M.useRef(!1),an=M.useRef(null),[ln,ua]=M.useState(()=>(typeof u=="string"?u.trim():"")||k_),zt=M.useCallback(a=>{const h=a.startsWith("/")?a:`/${a}`,f=(ln||"").trim().replace(/\/$/,"");return!f||/^https?:\/\//i.test(h)?h:`${f}${h}`},[ln]),[Js,Xi]=M.useState(!1),Ji=M.useRef(null),{handlePrint:Wh}=wC(),Ir=M.useCallback(()=>typeof window>"u"?{}:cC(window.location.search),[]),Ln=M.useCallback((a,h)=>a.includes(h)?a.filter(f=>f!==h):[...a,h],[]),Ht=M.useCallback((a,h,f,y,N,O)=>v.jsx(eC,{sectionId:a,options:h,isSelected:f,onToggle:y,getLabel:N,getTitle:O}),[]),Cr=M.useCallback(()=>{const a=Math.max(420,Math.floor(window.innerHeight-132));Bh(h=>h===a?h:a)},[]),Wt=M.useCallback(()=>{switch(m.includes(H)?H:m[0]??"map"){case"map":case"list":case"chart":return Qa(Ot.from,Ot.to);case"calendar":{const h=le.getFullYear(),f=le.getMonth(),y=new Date(h,f,1),N=new Date(h,f+1,0);return{from:hn(y),to:hn(N)}}default:return Qa(Ot.from,Ot.to)}},[H,m,Ot,le]),Pe=M.useMemo(()=>Wt(),[Wt]),De=M.useMemo(()=>m.includes(H)?H:m[0]??"map",[m,H]);M.useEffect(()=>{if(De!=="map")return;Cr();const a=()=>Cr();return window.addEventListener("resize",a),window.addEventListener("orientationchange",a),()=>{window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a)}},[De,Cr,es,F]);const Zs=M.useMemo(()=>{const a=JSON.stringify({f:U,r:Pe}),h=JSON.stringify({f:ru,r:Sr});return a!==h},[U,ru,Sr,Pe]);M.useEffect(()=>{S&&ge(a=>({...a,lat:I.lat,lng:I.lng,radius:P}))},[S,I.lat,I.lng,P]),M.useEffect(()=>{const a=Ir(),h=My(a);ge(N=>{const O={...E,...h};return S&&(O.lat=I.lat,O.lng=I.lng,O.radius=P),JSON.stringify(N)===JSON.stringify(O)?N:O}),lt(h.from,h.to);const f=String((a==null?void 0:a.view)||"");f&&m.includes(f)&&Z(N=>N===f?N:f);const y=uC(a);Yi(y&&!ss.current)},[Ir,m,lt,E,S,I.lat,I.lng,P]);const Kt=M.useMemo(()=>Wt(),[Wt]),ca=M.useCallback(async a=>{var f;j("");let h="";try{const y=a??ie,N=S?I.lat:y.lat??Gu.lat,O=S?I.lng:y.lng??Gu.lng,W={...y,lat:N,lng:O};S&&(W.radius=P),(y.lat==null||y.lng==null)&&ge(ee=>({...ee,lat:N,lng:O,...S?{radius:P}:{}}));const q=mC(Kt.from,Kt.to),V=S?P:y.radius??100;if(h=JSON.stringify({lat:N,lng:O,radius:V,months:q,club:S||void 0}),h===ou.current){su(W),iu(Kt);return}if(On.current===h)return;if(On.current&&On.current!==h)try{(f=an.current)==null||f.abort()}catch{}const B=new AbortController;an.current=B,On.current=h;const G=await sA({center:{lat:N,lng:O},radiusMi:V,months:q,signal:B.signal}),ne=S?G.filter(ee=>String((ee==null?void 0:ee.clubId)??"").trim()===S):G;w(ne);const te=new Set,Me={},Ge=qe.current;ne.forEach(ee=>{const ae=ee.clubId?String(ee.clubId):"";if(!ae)return;const fe=il(ee.clubName)||"";if(fe){Me[ae]=fe;return}il(Ge[ae])||te.add(ae)}),Object.keys(Me).length&&ke(ee=>({...ee,...Me}));try{if(te.size){const{getDb:ee}=await Ma(async()=>{const{getDb:je}=await import("./assets/client-BJxpwh5_.js");return{getDb:je}},[]),{doc:ae,getDoc:fe}=await Ma(async()=>{const{doc:je,getDoc:Oe}=await Promise.resolve().then(()=>r_);return{doc:je,getDoc:Oe}},void 0),Pr=ee();if(Pr){const je=await Promise.all(Array.from(te).slice(0,100).map(async In=>{var ue;try{const rt=await fe(ae(Pr,"clubs",In));if(!rt.exists())return null;const Un=il((ue=rt.data())==null?void 0:ue.name);return Un?[In,Un]:null}catch{return null}})),Oe={};je.filter(Boolean).forEach(In=>{Oe[In[0]]=In[1]}),Object.keys(Oe).length&&ke(In=>({...In,...Oe}))}}}catch{}if(su(W),iu(Kt),ou.current=h,!ne.length){j(S?"No matches found for this club in the selected date range.":`No ${d==="clubs"?"clubs":"matches"} found. Try adjusting filters.`);const ee=!1}const It=new Set,Ft=new Set,Ct=new Set;ne.forEach(ee=>{const ae=ba(ee);ae&&It.add(ae),Ei(ee).forEach(fe=>fe&&Ft.add(fe)),Or(ee).forEach(fe=>fe&&Ct.add(fe))}),Ql(ee=>{const ae={...ee};return Array.from(It).forEach(fe=>{ae[fe]||(ae[fe]=sr(`discipline:${fe}`))}),ae}),Xs(ee=>{const ae={...ee};return Array.from(Ft).forEach(fe=>{ae[fe]||(ae[fe]=sr(`sub:${fe}`))}),ae}),Qi(ee=>{const ae={...ee};return Array.from(Ct).forEach(fe=>{ae[fe]||(ae[fe]=sr(`series:${fe}`))}),ae})}catch(y){if((y==null?void 0:y.name)==="AbortError"||(y==null?void 0:y.message)==="The user aborted a request.")return;console.error(y);const N=typeof(y==null?void 0:y.message)=="string"&&y.message.trim()?` ${y.message.trim()}`:"";j(`Failed to load matches.${N}`)}finally{On.current===h&&(On.current="")}},[ie,Kt,d,S,I.lat,I.lng,P]);M.useEffect(()=>{rs.current=ca},[ca]),M.useEffect(()=>{qe.current=me},[me]),M.useEffect(()=>()=>{var a;try{(a=an.current)==null||a.abort()}catch{}an.current=null},[]),M.useEffect(()=>{Yl&&(U.lat==null||U.lng==null||(rs.current(U),Yi(!1),ss.current=!0))},[Yl,Kt.from,Kt.to,U]),M.useEffect(()=>{if(!(Object.keys(Ir()||{}).length>0)){try{const h=typeof window<"u"?window.localStorage.getItem(C):null,f=typeof window<"u"?window.localStorage.getItem(D):null;if(h){const y=JSON.parse(h),N=My(y),O={...E,...N};S&&(O.lat=I.lat,O.lng=I.lng,O.radius=P),ge(()=>O)}f&&m.includes(f)&&Z(f)}catch{}Yi(!0)}},[Ir,C,D,m,E,S,I.lat,I.lng,P]),M.useEffect(()=>{try{if(typeof window>"u")return;const a={...Ww(ie)};delete a.from,delete a.to,delete a.view,delete a.limit,window.localStorage.setItem(C,JSON.stringify(a)),window.localStorage.setItem(D,De)}catch{}},[ie,De,C,D]);const is=M.useMemo(()=>({...pC(ie,Kt,De)}),[ie,Kt,De]);M.useEffect(()=>{if(typeof window>"u")return;const h=Dy(is).toString(),f=window.location.search.replace(/^\?/,"");if(h===f)return;const y=window.location.hash||"",N=`${window.location.pathname}${h?`?${h}`:""}${y}`;window.history.replaceState(window.history.state,"",N)},[is]),M.useEffect(()=>{ss.current&&rs.current()},[ie,Kt.from,Kt.to]);const En=M.useMemo(()=>{const{from:a,to:h}=Wt(),f=a?new Date(a+"T00:00:00").getTime():Number.NEGATIVE_INFINITY,y=h?new Date(h+"T23:59:59").getTime():Number.POSITIVE_INFINITY,N=Math.min(f,y),O=Math.max(f,y);return k.filter(W=>{const q=typeof W.date=="string"?W.date:be(W.date);if(!q)return!1;const V=new Date(q+"T00:00:00").getTime();return V>=N&&V<=O})},[k,Wt]),Ar=M.useMemo(()=>ie.types.length===0?En:En.filter(a=>{const h=gc(a);return ie.types.some(f=>h.includes(f))}),[En,ie.types]),br=M.useMemo(()=>ie.subDisciplines.length===0?Ar:Ar.filter(a=>{const h=Ei(a).map(y=>y.toLowerCase());return ie.subDisciplines.map(y=>y.toLowerCase()).some(y=>h.includes(y))}),[Ar,ie.subDisciplines]),os=M.useMemo(()=>ie.series.length===0?br:br.filter(a=>{const h=Or(a);return ie.seriesMode==="and"?ie.series.every(f=>h.includes(f)):h.some(f=>ie.series.includes(f))}),[br,ie.series,ie.seriesMode]),as=M.useMemo(()=>ie.tiers.length===0?os:os.filter(a=>{const h=yc(a);return ie.tiers.some(f=>h.includes(f))}),[os,ie.tiers]),ha=M.useMemo(()=>ie.statuses.length===0?as:as.filter(a=>ie.statuses.includes(vc(a))),[as,ie.statuses]),Vt=M.useMemo(()=>{const a=[...ha];switch(ie.sort){case"dateDesc":a.sort((h,f)=>String(f.date||"").localeCompare(String(h.date||"")));break;case"nameAsc":a.sort((h,f)=>String(h.title).localeCompare(String(f.title)));break;case"nameDesc":a.sort((h,f)=>String(f.title).localeCompare(String(h.title)));break;default:a.sort((h,f)=>String(h.date||"").localeCompare(String(f.date||"")))}return a},[ha,ie.sort]);M.useEffect(()=>{T(Vt)},[Vt]);const qt=M.useMemo(()=>{if(d!=="clubs")return[];const a=lD(En,me,{from:Pe.from,to:Pe.to,disciplines:U.types,subDisciplines:U.subDisciplines,series:U.series,seriesMode:U.seriesMode,tiers:U.tiers,statuses:U.statuses,minEvents:U.minEvents});return uD(a)},[d,En,me,Pe.from,Pe.to,U.types,U.subDisciplines,U.series,U.seriesMode,U.tiers,U.statuses,U.minEvents]),pt=M.useMemo(()=>{if(d!=="clubs")return[];const a=[...qt];switch(U.sort){case"nameDesc":return a.sort((h,f)=>f.name.localeCompare(h.name));case"nameAsc":return a.sort((h,f)=>h.name.localeCompare(f.name));case"dateDesc":return a.sort((h,f)=>{const y=h.nextEventDate||"";return(f.nextEventDate||"").localeCompare(y)});case"dateAsc":default:return a.sort((h,f)=>{const y=h.nextEventDate||"",N=f.nextEventDate||"";return y.localeCompare(N)})}},[qt,d,U.sort]),un=M.useMemo(()=>d==="clubs"?pt.map(a=>!Number.isFinite(a.lat)||!Number.isFinite(a.lng)?null:{lat:a.lat,lng:a.lng,title:a.name,subtitle:N_(a.upcomingCount),href:a.id&&!a.id.startsWith("geo:")?zt(`/clubs/${a.id}`):void 0}).filter(a=>!!a):Vt.map(a=>{var W,q;const h=Number(((W=a==null?void 0:a.location)==null?void 0:W.lat)??(a==null?void 0:a.lat)),f=Number(((q=a==null?void 0:a.location)==null?void 0:q.lng)??(a==null?void 0:a.lng));if(!Number.isFinite(h)||!Number.isFinite(f))return null;const N=Or(a).find(V=>x[V]),O=N?x[N]:pc(a,me);return{lat:h,lng:f,title:mc(a),subtitle:O||void 0,href:zt(`/matches/${a.id}`)}}).filter(a=>!!a),[d,pt,Vt,x,me,zt]),ei=M.useMemo(()=>d!=="matches"?[]:hs(En,ie.types,a=>gc(a),En.length),[En,ie.types,d]),ti=M.useMemo(()=>d!=="matches"?[]:hs(Ar,ie.subDisciplines,a=>Ei(a),Ar.length),[Ar,ie.subDisciplines,d]),ni=M.useMemo(()=>d!=="matches"?[]:hs(br,ie.series,a=>Or(a),br.length),[br,ie.series,d]),Ae=M.useMemo(()=>d!=="matches"?[]:hs(os,ie.tiers,a=>yc(a),os.length),[os,ie.tiers,d]),ri=M.useMemo(()=>d!=="matches"?[]:hs(as,ie.statuses,a=>vc(a),as.length),[as,ie.statuses,d]),ls=M.useMemo(()=>d!=="clubs"?[]:ka(qt,U.types,cD),[qt,U.types,d]),us=M.useMemo(()=>d!=="clubs"?[]:ka(qt,U.subDisciplines,hD),[qt,U.subDisciplines,d]),au=M.useMemo(()=>d!=="clubs"?[]:ka(qt,U.tiers,dD),[qt,U.tiers,d]),si=M.useMemo(()=>d!=="clubs"?[]:ka(qt,U.series,fD),[qt,U.series,d]),lu=M.useMemo(()=>d!=="clubs"?[]:ka(qt,U.statuses,pD),[qt,U.statuses,d]),{firstOfMonth:Kh,weekdays:qh,days:Gh}=M.useMemo(()=>{const a=le.getFullYear(),h=le.getMonth(),f=new Date(a,h,1),y=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],N=[],O=new Date(f);O.setDate(O.getDate()-O.getDay());for(let W=0;W<42;W++){const q=new Date(O);q.setDate(O.getDate()+W),N.push(q)}return{firstOfMonth:f,weekdays:y,days:N}},[le]);M.useEffect(()=>{const a=Array.from(new Set([...ni,...si].map(h=>h.value).filter(Boolean)));a.length&&(async()=>{try{let h=b.current;Object.keys(h).length||(Se.current||(Se.current=(async()=>{try{const V=await nE("/bundles/v2/series/index.json",{headers:{Accept:"application/json"}});if(!V.ok)return{};const B=await V.json().catch(()=>null);return ID(B)}catch{return{}}})()),h=await Se.current,b.current=h);const f={};a.forEach(V=>{const B=h[V];B&&(f[V]=B)}),Object.keys(f).length&&R(V=>({...V,...f}));const y=a.filter(V=>!h[V]);if(!y.length)return;const{getDb:N}=await Ma(async()=>{const{getDb:V}=await import("./assets/client-BJxpwh5_.js");return{getDb:V}},[]),{doc:O,getDoc:W}=await Ma(async()=>{const{doc:V,getDoc:B}=await Promise.resolve().then(()=>r_);return{doc:V,getDoc:B}},void 0),q=N();if(q){const V=await Promise.all(y.slice(0,100).map(async G=>{try{const ne=await W(O(q,"series",G));if(!ne.exists())return null;const te=ne.data(),Me=te.shortName||te.abbreviation||te.name||G;return[G,Me]}catch{return null}})),B={};V.filter(Boolean).forEach(G=>{B[G[0]]=G[1]}),Object.keys(B).length&&R(G=>({...G,...B}))}}catch(h){console.warn("Failed to prefetch series names",h)}})()},[ni,si]),M.useEffect(()=>{var h;const a=typeof u=="string"?u.trim():"";if(a){ua(a);return}typeof window<"u"&&((h=window.location)!=null&&h.origin)&&ua(window.location.origin)},[u]),M.useEffect(()=>{if(!Js)return;const a=h=>{Ji.current&&(Ji.current.contains(h.target)||Xi(!1))};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[Js]);const ii=M.useCallback(async()=>{try{const a=new URL(typeof window<"u"?window.location.href:"https://shootershub.fortneyengineering.com/match-finder");if(a.search=Dy(is).toString(),navigator.share)await navigator.share({title:"The Shooters Hub  Match Finder",url:a.toString()}),Er("Shared");else if(navigator.clipboard)await navigator.clipboard.writeText(a.toString()),Er("Link copied");else{const h=document.createElement("textarea");h.value=a.toString(),document.body.appendChild(h),h.select(),document.execCommand("copy"),document.body.removeChild(h),Er("Link copied")}}catch(a){console.error(a),Er("Share failed")}finally{setTimeout(()=>Er(""),2e3)}},[is]),tr=M.useCallback(()=>{rs.current(U)},[U]),uu=M.useCallback(()=>{navigator.geolocation.getCurrentPosition(async a=>{var y;const{latitude:h,longitude:f}=a.coords;ge(N=>({...N,lat:h,lng:f}));try{const O=(y=(await hA({mode:"coords",lat:h,lng:f})).address)==null?void 0:y.postalCode;O&&ge(W=>({...W,zip:O}))}catch{}})},[]),Zi=M.useCallback(async a=>{if(!a){ge(h=>({...h,zip:void 0}));return}try{const h=await oA(a,"US");if(!h)return;ge(f=>({...f,zip:a,lat:h.center.lat,lng:h.center.lng}))}catch(h){console.error(h)}},[]),[eo,kr]=M.useState(""),oi=M.useRef(null);M.useEffect(()=>{kr(U.zip??"")},[U.zip]),M.useEffect(()=>(oi.current&&clearTimeout(oi.current),oi.current=setTimeout(()=>{const a=eo.trim();if(a===""){Zi("");return}/^\d{5}$/.test(a)&&Zi(a)},400),()=>{oi.current&&clearTimeout(oi.current)}),[eo,Zi]);function Qh(a){const h=["th","st","nd","rd"],f=a%100;return a+(h[(f-20)%10]||h[f]||h[0])}function Yh(a){if(!a)return"";const h=new Date(a+"T00:00:00");if(isNaN(h.getTime()))return String(a);const f=h.toLocaleDateString(void 0,{weekday:"long"}),y=h.toLocaleDateString(void 0,{month:"long"}),N=Qh(h.getDate()),O=h.getFullYear();return`${f} ${y} ${N} ${O}`}const Tt=M.useCallback(a=>{const f=(Array.isArray(a.seriesIds)?a.seriesIds:[]).find(O=>x[O]),y=f?x[f]:pc(a,me)||"",N=mc(a);return{owner:y,title:N}},[x,me]),cu=M.useCallback(a=>{var Ge,It,Ft,Ct,ee,ae,fe,Pr,je,Oe,In,ue,rt,Un,nr;const{owner:h,title:f}=Tt(a),y=be(a.date),N=Xn(y);if(!y||!N)return null;const O=new Date(N);O.setDate(O.getDate()+1);const q=`${ln.replace(/\/$/,"")}/matches/${a.id}`,B=x_([(Ge=a==null?void 0:a.location)==null?void 0:Ge.name,(It=a==null?void 0:a.location)==null?void 0:It.fullAddress,(Ft=a==null?void 0:a.location)==null?void 0:Ft.formattedAddress,(ee=(Ct=a==null?void 0:a.location)==null?void 0:Ct.address)==null?void 0:ee.line1,(fe=(ae=a==null?void 0:a.location)==null?void 0:ae.address)==null?void 0:fe.line2,(je=(Pr=a==null?void 0:a.location)==null?void 0:Pr.address)==null?void 0:je.city,(In=(Oe=a==null?void 0:a.location)==null?void 0:Oe.address)==null?void 0:In.region,(rt=(ue=a==null?void 0:a.location)==null?void 0:ue.address)==null?void 0:rt.postalCode,(nr=(Un=a==null?void 0:a.location)==null?void 0:Un.address)==null?void 0:nr.country]).join(", "),G=typeof a.type=="string"?a.type.trim():"",ne=typeof(a.matchTier??a.customTier)=="string"?String(a.matchTier??a.customTier).trim():"",te=x_([h?`Hosted by ${h}`:void 0,G?`Discipline: ${G}`:void 0,ne?`Tier: ${ne}`:void 0]),Me=`${te.join(`
`)}${te.length?`

`:""}Match details: ${q}`;return{title:f,start:nf(y),endExclusive:nf(hn(O)),location:B,description:Me,matchUrl:q,uid:`${String((a==null?void 0:a.id)||"match")}-${nf(y)}@${TD}`}},[Tt,ln]),to=M.useCallback(a=>{const h=a.map(y=>cu(y)).filter(Boolean),f=new Date().toISOString().slice(0,10);vC(h,`match-finder-results-${f}.ics`)},[cu]),ai=M.useCallback(a=>{to(a),window.open("https://calendar.google.com/calendar/u/0/r/settings/export","_blank","noopener,noreferrer")},[to]),li=M.useCallback(()=>{const a=ln.replace(/\/$/,""),h=[["Date","Title","Organizer","Discipline","Sub-Disciplines","Tier","Status","Series","Address","City","Region","Postal Code","Latitude","Longitude","Match URL"]];Vt.forEach(y=>{const{owner:N,title:O}=Tt(y),W=(Array.isArray(y.seriesIds)?y.seriesIds:[]).map(G=>x[G]||G).join(", "),q=(y==null?void 0:y.location)??{},V=(q==null?void 0:q.address)??{},B=(q==null?void 0:q.fullAddress)||(q==null?void 0:q.formattedAddress)||(q==null?void 0:q.name)||"";h.push([typeof y.date=="string"?y.date:be(y.date)||"",O,N,y.type||y.discipline||"",Array.isArray(y.subDiscipline)?y.subDiscipline.join(", "):"",y.matchTier??y.customTier??"",y.status??(y.soldOut?"Full":"Open"),W,B,V.city||"",V.region||"",V.postalCode||"",String((q==null?void 0:q.lat)??(y==null?void 0:y.lat)??""),String((q==null?void 0:q.lng)??(y==null?void 0:y.lng)??""),`${a}/matches/${y.id}`])});const f=new Date().toISOString().replace(/[:.]/g,"-");Oy(h,`match-finder-results-${f}.csv`)},[Tt,x,ln,Vt]),da=M.useCallback(()=>{const a=ln.replace(/\/$/,""),h=[["Club","Next Event Date","Upcoming Events","Disciplines","Sub-Disciplines","Tiers","Latitude","Longitude","Website","Phone","Club URL"]];pt.forEach(y=>{h.push([y.name,y.nextEventDate||"",String(y.upcomingCount??0),Array.isArray(y.disciplines)?y.disciplines.join(", "):"",Array.isArray(y.subDisciplines)?y.subDisciplines.join(", "):"",Array.isArray(y.tiers)?y.tiers.join(", "):"",String(y.lat??""),String(y.lng??""),y.website||"",y.phone||"",y.id&&!y.id.startsWith("geo:")?`${a}/clubs/${y.id}`:""])});const f=new Date().toISOString().replace(/[:.]/g,"-");Oy(h,`club-finder-results-${f}.csv`)},[ln,pt]),ui=a=>{const h=typeof a=="string"?a.trim():"";if(!h)return"TBD";const f=h.toLowerCase().replace(/\s+/g,"");return f==="tbd"||f==="tba"||f==="00:00"||f==="0:00"||f==="0000"||f==="12:00am"?"TBD":h},cs=a=>{var V,B,G,ne;const{owner:h,title:f}=Tt(a),y=a.matchTier??a.customTier??"",N=a.status??(a.soldOut?"Full":"Open"),O=A_({lat:((V=a==null?void 0:a.location)==null?void 0:V.lat)??(a==null?void 0:a.lat),lng:((B=a==null?void 0:a.location)==null?void 0:B.lng)??(a==null?void 0:a.lng),address:((G=a==null?void 0:a.location)==null?void 0:G.fullAddress)??((ne=a==null?void 0:a.location)==null?void 0:ne.formattedAddress)}),W=a.scoringTemplateRef?`Scoring: ${String(a.scoringTemplateRef.id)} v${String(a.scoringTemplateRef.version||"")}`:a.scoringExternalLink?"Scoring: External":void 0,q={id:String(a.id),title:f,matchHref:zt(`/matches/${a.id}`),ownerName:h||void 0,ownerHref:a.clubId?zt(`/clubs/${a.clubId}`):void 0,date:typeof a.date=="string"?a.date:"",tier:y||void 0,status:N||void 0,startTime:ui(a.startTime),disciplines:gc(a),subDisciplines:Ei(a),series:Or(a),scoringLabel:W,directionsHref:O,extraBadges:[typeof a.likeCount=="number"&&Number.isFinite(a.likeCount)?`${Math.max(0,Math.trunc(a.likeCount))} likes`:""].filter(Boolean)};return v.jsx(Ny,{item:q},q.id)},hu=a=>{const h=A_({lat:a.lat,lng:a.lng}),f=typeof a.id=="string"&&!a.id.startsWith("geo:"),y=Array.isArray(a.disciplines)&&a.disciplines.length?a.disciplines[0]:"",N=N_(a.upcomingCount),O=aD(a),W={id:String(a.id),title:a.name,matchHref:f?zt(`/clubs/${a.id}`):void 0,ownerName:"Club",date:a.nextEventDate||void 0,status:N||void 0,directionsHref:h,extraBadges:[y?yi[y]||y:"",Array.isArray(a.events)?`${a.events.length} events`:"",O||""].filter(Boolean)};return v.jsx(Ny,{item:W},W.id)};function no(a){const h=a.replace("#","").trim(),f=h.length===3?h.split("").map(N=>N+N).join(""):h;if(!/^([0-9a-fA-F]{6})$/.test(f))return null;const y=parseInt(f,16);return{r:y>>16&255,g:y>>8&255,b:y&255}}function be(a){if(a){if(typeof a=="string"){if(/^\d{4}-\d{2}-\d{2}$/.test(a))return a;const h=new Date(a);return isNaN(h.getTime())?void 0:hn(h)}if(typeof a=="object"&&typeof a.toDate=="function"){const h=a.toDate();return hn(h)}}}function du(a){var W;if(!a)return;const f=String(a).trim().match(/^(\d{1,2})(?::(\d{2}))?\s*(am|pm)?$/i);if(!f)return;let y=parseInt(f[1],10);const N=f[2]?parseInt(f[2],10):0,O=(W=f[3])==null?void 0:W.toLowerCase();if(O==="pm"&&y<12&&(y+=12),O==="am"&&y===12&&(y=0),!(y<0||y>23||N<0||N>59))return y*60+N}function fu(a){const h=typeof a=="string"?a.trim():"";if(!h)return!0;const f=h.toLowerCase().replace(/\s+/g,"");return f==="tbd"||f==="tba"||f==="00:00"||f==="0:00"||f==="0000"||f==="12:00am"}function fa(a){if(a==null)return;let h=Math.floor(a/60);const f=a%60;let y="";h>=12?(y="PM",h>12&&(h-=12)):(y="",h===0&&(h=12));const N=String(f).padStart(2,"0");return`${h}:${N}${y}`}function hs(a,h,f,y){const N=new Map;a.forEach(W=>{(Array.isArray(f(W))?f(W):[f(W)]).filter(Boolean).forEach(V=>{N.set(V,(N.get(V)||0)+1)})});const O=[];return N.forEach((W,q)=>{const V=a.filter(B=>(Array.isArray(f(B))?f(B):[f(B)]).includes(q)).length;h.length===0&&V===y||O.push({value:q,count:W})}),O.sort((W,q)=>W.value.localeCompare(q.value))}const ds=M.useMemo(()=>Lt.map(a=>({key:a,label:er[a]})),[Lt,er]),ci=M.useMemo(()=>{const a=new Set;return A.forEach(h=>{const f=ba(h);f&&a.add(f)}),Array.from(a).sort((h,f)=>h.localeCompare(f)).map(h=>({key:h,label:yi[h]||h,color:Ys[h]||sr(`discipline:${h}`)}))},[A,Ys]),pa=M.useMemo(()=>{const a=new Set;return A.forEach(h=>{Ei(h).forEach(f=>f&&a.add(f))}),Array.from(a).sort((h,f)=>h.localeCompare(f)).map(h=>({key:h,label:oo[h]||h,color:_r[h]||sr(`sub:${h}`)}))},[A,_r]),Tn=M.useMemo(()=>{const a=new Set;return A.forEach(h=>{Or(h).forEach(f=>f&&a.add(f))}),Array.from(a).sort((h,f)=>h.localeCompare(f)).map(h=>({key:h,label:x[h]||h,color:Zr[h]||sr(`series:${h}`)}))},[Zr,A,x]),Vn=M.useCallback(a=>a==="subDiscipline"?pa:a==="series"?Tn:ci,[ci,Tn,pa]),St=M.useCallback(a=>a==="subDiscipline"?"Sub-discipline":a==="series"?"Series":"Discipline",[]),xr=M.useCallback(a=>a==="alternate"?"Alternating rows":`Dominant ${St(a).toLowerCase()} tint`,[St]),hi=M.useCallback(a=>a==="inherit"?"Use row color":a==="weekday"?"Weekday/Sat/Sun tint":`Dominant ${St(a).toLowerCase()} tint`,[St]),Nr=M.useCallback(a=>a==="weekday"?"Weekday/Sat/Sun color":a==="status"?"Match status color":`${St(a)} color`,[St]),fs=M.useCallback((a,h,f)=>{if(a==="subDiscipline"){Xs(y=>({...y,[h]:f}));return}if(a==="series"){Qi(y=>({...y,[h]:f}));return}Ql(y=>({...y,[h]:f}))},[]),di=M.useCallback((a,h)=>h==="subDiscipline"?typeof a.subDiscipline=="string"?a.subDiscipline.trim():"":h==="series"?typeof a.seriesId=="string"?a.seriesId.trim():"":typeof a.type=="string"?a.type.trim():"",[]),Fn=M.useCallback((a,h)=>{const f=typeof h=="string"?h.trim():"";return f?a==="subDiscipline"?_r[f]||sr(`sub:${f}`):a==="series"?Zr[f]||sr(`series:${f}`):Ys[f]||sr(`discipline:${f}`):ol},[Zr,Ys,_r]),pu=M.useMemo(()=>{const a=[],h=y=>Vn(y).map(N=>({key:N.key,label:N.label,color:N.color})),f=(y,N)=>({key:`${N}-${y}-fallback`,label:`${St(y)} fallback`,color:ol});if(Ue!=="alternate"){const y=h(Ue);a.push({id:`row-colors-${Ue}`,title:`Rows (${xr(Ue)})`,items:y.length?y:[f(Ue,"row")]})}if(de==="discipline"||de==="subDiscipline"||de==="series"){const y=h(de);a.push({id:`cell-colors-${de}`,title:`Cells (${hi(de)})`,items:y.length?y:[f(de,"cell")]})}else de==="weekday"&&a.push({id:"cell-colors-weekday",title:`Cells (${hi(de)})`,items:[{key:"cell-weekday",label:"Weekday",color:_n},{key:"cell-saturday",label:"Saturday",color:sn},{key:"cell-sunday",label:"Sunday",color:wn}]});if(Ee==="discipline"||Ee==="subDiscipline"||Ee==="series"){const y=h(Ee);a.push({id:`badge-colors-${Ee}`,title:`Badges (${Nr(Ee)})`,items:y.length?y:[f(Ee,"badge")]})}else Ee==="weekday"?a.push({id:"badge-colors-weekday",title:`Badges (${Nr(Ee)})`,items:[{key:"badge-weekday",label:"Weekday",color:_n},{key:"badge-saturday",label:"Saturday",color:sn},{key:"badge-sunday",label:"Sunday",color:wn}]}):a.push({id:"badge-colors-status",title:`Badges (${Nr(Ee)})`,items:[{key:"badge-open",label:"Open",color:Tr},{key:"badge-full",label:"Full/Sold out",color:on},{key:"badge-other",label:"Other",color:Mn}]});return a},[Ee,de,Ue,sn,on,Tr,Mn,wn,_n,Nr,hi,St,xr,Vn]);function mu(a,h,f){const y=N=>N.toString(16).padStart(2,"0");return`#${y(a)}${y(h)}${y(f)}`}function fi(a,h){const f=no(a);if(!f)return a;const y=N=>Math.max(0,Math.min(255,N));return mu(y(f.r+h),y(f.g+h),y(f.b+h))}function ma(a){const h=no(a);return h?(.2126*h.r+.7152*h.g+.0722*h.b)/255>.6?"#111":"#fff":"#111"}const pi=M.useMemo(()=>{if(!Pe.from||!Pe.to)return[];const a=by(Pe.from.slice(0,7)),h=tC(Pe.to.slice(0,7));if(!a||!h)return[];const f=new Date(a.getFullYear(),a.getMonth(),1),y=new Date(h.getFullYear(),h.getMonth(),1);if(isNaN(f.getTime())||isNaN(y.getTime()))return[];if(f.getTime()>y.getTime())return[];const N=[],O=new Date(f);for(;O.getTime()<=y.getTime();)N.push({key:`${O.getFullYear()}-${String(O.getMonth()+1).padStart(2,"0")}`,shortLabel:O.toLocaleString("default",{month:"short"}),longLabel:O.toLocaleString("default",{month:"long",year:"numeric"})}),O.setMonth(O.getMonth()+1,1);return N},[Pe.from,Pe.to]),Gt=M.useMemo(()=>{if(!pi.length)return{months:[],rows:[]};const a=new Map,h=Lt,f=ln.replace(/\/$/,""),y=V=>{var Ge;const B=typeof V.date=="string"?V.date:be(V.date),G=((Ge=V.schedule)==null?void 0:Ge.days)||[],ne=[];if(Array.isArray(G)){const It=B?G.find(Ct=>be(Ct.date)===B):void 0;(It?[It]:G).forEach(Ct=>{(Ct.slots||[]).forEach(ee=>{if(fu(ee==null?void 0:ee.time))return;const ae=du(ee==null?void 0:ee.time);ae!=null&&ne.push(ae)})})}if(ne.length)return fa(Math.min(...ne));const te=V.startTime;if(fu(te))return;const Me=du(te);return Me!=null?fa(Me):void 0},N={club:V=>{const B=V.clubId?String(V.clubId):"",G=B?pc(V,me)||"Club":"Individual",ne=B?zt(`/clubs/${B}`):void 0,te=ne?`${f}${ne}`:void 0;return{id:B,label:G,href:ne,fullUrl:te}},series:V=>{const B=Or(V).sort(),G=B.join("+"),ne=B.length?B.map(te=>x[te]||te).join(" + "):"No series";return{id:G,label:ne}},time:V=>{const B=y(V)||"";return{id:B||"TBD",label:B||"TBD"}},discipline:V=>{const B=ba(V)||"",G=B?yi[B]||B:"Unspecified";return{id:B,label:G}},subDiscipline:V=>{const B=tf(V)||"",G=B?oo[B]||B:"Unspecified";return{id:B,label:G}},tier:V=>{const B=yc(V).sort(),G=B.join("+"),ne=B.length?B.map(te=>`${te.charAt(0).toUpperCase()}${te.slice(1)}`).join(" + "):"Unspecified";return{id:G,label:ne}},status:V=>{const B=vc(V)||"",G=B?`${B.charAt(0).toUpperCase()}${B.slice(1)}`:"Unspecified";return{id:B,label:G}}};A.forEach(V=>{const B=[],G={};h.forEach(Me=>{const Ge=N[Me](V);B.push(`${Me}:${Ge.id??""}`),G[Me]=Ge});const ne=B.join("|")||"all",te=a.get(ne);te?te.items.push(V):a.set(ne,{key:ne,values:G,items:[V]})});const O=Array.from(a.values()),W=pi.map(V=>V.key),q=O.map(V=>{const B={},G={},ne=new Map,te=new Map,Me=new Map;let Ge,It;W.forEach(je=>{const Oe=V.items.filter(ue=>{var rt;return(rt=ue.date)==null?void 0:rt.startsWith(je)});if(!Oe.length)return;G[je]=Oe.map(ue=>typeof(ue==null?void 0:ue.date)=="string"?ue.date:"").filter(Boolean).sort((ue,rt)=>ue.localeCompare(rt))[0];const In=[...Oe].sort((ue,rt)=>String(ue.title||ue.name||"").localeCompare(String(rt.title||rt.name||"")));B[je]=In.map(ue=>{const{owner:rt,title:Un}=Tt(ue),nr=typeof ue.date=="string"?ue.date:void 0,gi=nr?new Date(`${nr}T00:00:00`).getDate():void 0,mg=zt(`/matches/${ue.id}`);return{id:String(ue.id),title:Un,owner:rt,day:gi,date:nr,href:mg,fullUrl:`${f}${mg}`,type:ba(ue)||null,subDiscipline:tf(ue)||null,seriesId:I_(ue)||null,status:typeof ue.status=="string"?ue.status:ue.soldOut?"Full":void 0}}),Oe.forEach(ue=>{const rt=ba(ue);rt&&ne.set(rt,(ne.get(rt)||0)+1);const Un=tf(ue);Un&&te.set(Un,(te.get(Un)||0)+1);const nr=I_(ue);nr&&Me.set(nr,(Me.get(nr)||0)+1);const gi=typeof(ue==null?void 0:ue.date)=="string"?ue.date:void 0;gi&&((!Ge||gi<Ge)&&(Ge=gi),(!It||gi>It)&&(It=gi))})});let Ft,Ct=-1;ne.forEach((je,Oe)=>{if(je>Ct){Ft=Oe,Ct=je;return}je===Ct&&Ft&&Oe.localeCompare(Ft)<0&&(Ft=Oe)});let ee,ae=-1;te.forEach((je,Oe)=>{if(je>ae){ee=Oe,ae=je;return}je===ae&&ee&&Oe.localeCompare(ee)<0&&(ee=Oe)});let fe,Pr=-1;return Me.forEach((je,Oe)=>{if(je>Pr){fe=Oe,Pr=je;return}je===Pr&&fe&&Oe.localeCompare(fe)<0&&(fe=Oe)}),{key:V.key,values:V.values,itemsByMonth:B,monthSortDates:G,matchCount:V.items.length,earliestDate:Ge,latestDate:It,dominantType:Ft,dominantSubDiscipline:ee,dominantSeries:fe}});return q.sort((V,B)=>{var Ge,It,Ft,Ct;const G=Fe==="desc"?-1:1,ne=(ee,ae)=>ee.localeCompare(ae);let te=0;if(Et.startsWith("month:")){const ee=Et.slice(6),ae=V.monthSortDates[ee],fe=B.monthSortDates[ee];if(ae&&!fe)return-1;if(!ae&&fe)return 1;te=(ae||"").localeCompare(fe||"")}else switch(Et){case"matchCount":te=V.matchCount-B.matchCount;break;case"earliestDate":te=(V.earliestDate||"").localeCompare(B.earliestDate||"");break;case"latestDate":te=(V.latestDate||"").localeCompare(B.latestDate||"");break;case"series":case"time":case"club":default:te=ne(((Ge=V.values[Et])==null?void 0:Ge.label)??"",((It=B.values[Et])==null?void 0:It.label)??"")}if(te!==0)return te*G;const Me=Lt.length?Lt:["club","time","discipline","subDiscipline","series","tier","status"];for(const ee of Me){const ae=ne(((Ft=V.values[ee])==null?void 0:Ft.label)??"",((Ct=B.values[ee])==null?void 0:Ct.label)??"");if(ae!==0)return ae}return(V.earliestDate||"").localeCompare(B.earliestDate||"")}),{months:pi,rows:q}},[pi,Lt,Fe,Et,me,A,Tt,x,ln]),Sn=M.useMemo(()=>rn?Gt.months.filter(a=>Gt.rows.some(h=>{var f;return(((f=h.itemsByMonth[a.key])==null?void 0:f.length)??0)>0})):Gt.months,[rn,Gt.months,Gt.rows]),gu=M.useMemo(()=>{const f={club:110,series:100,time:72,discipline:120,subDiscipline:140,tier:90,status:90},y={club:520,series:360,time:140,discipline:260,subDiscipline:300,tier:180,status:180},N={...f};return ds.forEach(O=>{const W=Gt.rows.reduce((V,B)=>{var ne;const G=((ne=B.values[O.key])==null?void 0:ne.label)??"";return Math.max(V,G.length)},O.label.length),q=Math.ceil(W*7.4+28);N[O.key]=Math.max(f[O.key],Math.min(y[O.key],q))}),N},[ds,Gt.rows]),jn=M.useCallback(a=>{if(!a)return"any";const h=new Date(`${a}T00:00:00`);if(Number.isNaN(h.getTime()))return"any";const f=h.getDay();return f>=1&&f<=5?"weekday":f===6?"saturday":f===0?"sunday":"any"},[]),yu=M.useCallback((a,h)=>{if(Ue!=="alternate"){const f=Ue==="subDiscipline"?a.dominantSubDiscipline:Ue==="series"?a.dominantSeries:a.dominantType,y=Fn(Ue,f);if(y)return xa(y,.18)}return h%2===0?"rgba(15, 23, 42, 0.85)":"rgba(31, 41, 55, 0.7)"},[Ue,Fn]),vu=M.useCallback((a,h)=>{if(!a.length||de==="inherit")return h;if(de==="discipline"||de==="subDiscipline"||de==="series"){const W=new Map;a.forEach(B=>{const G=di(B,de);G&&W.set(G,(W.get(G)||0)+1)});let q,V=-1;return W.forEach((B,G)=>{B>V&&(q=G,V=B)}),q?xa(Fn(de,q),.24):h}const f=a.filter(W=>jn(W.date)==="weekday").length,y=a.filter(W=>jn(W.date)==="saturday").length,N=a.filter(W=>jn(W.date)==="sunday").length,O=f+y+N;return O&&f===O?xa(_n,.22):O&&y===O?xa(sn,.22):O&&N===O?xa(wn,.22):"rgba(161, 98, 7, 0.22)"},[de,sn,wn,_n,Fn,jn,di]),Rr=M.useCallback(a=>{if(Ee==="weekday"){const f=jn(a.date);return f==="weekday"?_n:f==="saturday"?sn:f==="sunday"?wn:_n}if(Ee==="status"){const f=(a.status||"").toLowerCase();return f?f.includes("open")?Tr:f.includes("full")||f.includes("sold")?on:Mn:Mn}const h=di(a,Ee);return Fn(Ee,h)},[Ee,on,Tr,Mn,sn,wn,_n,Fn,jn,di]),mi=M.useMemo(()=>{const a=[];if(Sn.length){const f=Sn[0],y=Sn[Sn.length-1];a.push(f.key===y.key?`Month: ${f.longLabel}`:`Months: ${f.longLabel}  ${y.longLabel}`)}De==="chart"&&a.push(`Hide empty months: ${rn?"Yes":"No"}`);const h=U.radius??100;if(a.push(`Radius: ${h} miles`),U.zip?a.push(`Location: ZIP ${U.zip}`):U.lat!=null&&U.lng!=null&&a.push(`Location: ${U.lat.toFixed(2)}, ${U.lng.toFixed(2)}`),U.types.length){const f=U.types.map(y=>yi[y]||y);a.push(`Discipline: ${f.join(", ")}`)}if(U.subDisciplines.length){const f=U.subDisciplines.map(y=>oo[y]||y);a.push(`Sub-Discipline: ${f.join(", ")}`)}if(U.series.length){const f=U.series.map(N=>x[N]||N),y=U.seriesMode==="and"?"All selected":"Any selected";a.push(`Series (${y}): ${f.join(", ")}`)}if(U.tiers.length&&a.push(`Tier: ${U.tiers.map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(", ")}`),U.statuses.length&&a.push(`Status: ${U.statuses.map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(", ")}`),Lt.length){const f=Lt.map(y=>y==="time"?"Start Time":er[y]);a.push(`Grouped by: ${f.join(", ")}`)}return De==="chart"&&a.push(`Chart sort: ${Et} (${Fe})`),{lines:a,inline:a.length?a.join(" | "):"No filters applied"}},[Lt,er,rn,Fe,Et,U,De,x,Sn]),_u=M.useMemo(()=>{const a=[],h=Pe==null?void 0:Pe.from,f=Pe==null?void 0:Pe.to;if((h||f)&&a.push(`Date range: ${h||""} to ${f||""}`),a.push(`View: ${De.charAt(0).toUpperCase()}${De.slice(1)}`),a.push(`Radius: ${U.radius??100} miles`),U.zip&&a.push(`ZIP: ${U.zip}`),U.lat!=null&&U.lng!=null&&a.push(`Center: ${U.lat.toFixed(4)}, ${U.lng.toFixed(4)}`),U.types.length&&a.push(`Disciplines: ${U.types.map(y=>yi[y]||y).join(", ")}`),U.subDisciplines.length&&a.push(`Sub-disciplines: ${U.subDisciplines.map(y=>oo[y]||y).join(", ")}`),U.series.length){const y=U.seriesMode==="and"?"all":"any";a.push(`Series (${y}): ${U.series.map(N=>x[N]||N).join(", ")}`)}return U.tiers.length&&a.push(`Tiers: ${U.tiers.join(", ")}`),U.statuses.length&&a.push(`Status: ${U.statuses.join(", ")}`),De==="chart"&&(a.push(`Chart columns: ${Lt.map(y=>er[y]).join(", ")}`),a.push(`Hide empty months: ${rn?"Yes":"No"}`),a.push(`Chart sort: ${Et} (${Fe})`)),a},[Lt,er,rn,Fe,Et,U,De,x,Pe]),ga=M.useCallback(async a=>{await _C({format:a,chartLeftCols:ds,visibleChartMonths:Sn,rows:Gt.rows,filterLines:mi.lines,siteBaseUrl:k_})},[ds,mi.lines,Gt.rows,Sn]),ro=M.useCallback(a=>{ga(a).catch(h=>{console.error("Failed to export chart",h)})},[ga]),$n=M.useCallback(a=>{switch(Xi(!1),a){case"matchesCsv":li();break;case"matchesIcs":to(Vt);break;case"matchesGoogle":ai(Vt);break;case"clubsCsv":da();break;case"chartCsv":ro("csv");break;case"chartXlsx":ro("xlsx");break}},[to,da,ai,li,ro,Vt]),Ie=[],wu=()=>Ie.push({id:"distance",title:"Distance",defaultOpen:!0,contentClassName:"space-y-2",content:v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"text-xs font-semibold uppercase tracking-wide text-gray-300",children:["Radius: ",Math.round(U.radius??100)," mi"]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("button",{type:"button","aria-label":"Decrease radius",onClick:()=>ge(a=>({...a,radius:Math.max(0,(a.radius??100)-10)})),className:"rounded bg-gray-700 px-2 py-1",children:"10"}),v.jsx("input",{type:"range",min:0,max:500,value:U.radius??100,onChange:a=>ge(h=>({...h,radius:Number(a.target.value)})),className:"w-full accent-accent"}),v.jsx("button",{type:"button","aria-label":"Increase radius",onClick:()=>ge(a=>({...a,radius:Math.min(500,(a.radius??100)+10)})),className:"rounded bg-gray-700 px-2 py-1",children:"+10"})]}),v.jsx("input",{type:"text",placeholder:"ZIP code",value:eo,onChange:a=>kr(a.target.value),className:"w-full rounded bg-gray-900 px-2 py-1"}),v.jsx("button",{onClick:uu,className:"w-full rounded bg-accent py-1 text-accenttext",children:" My location"})]})}),Eu=()=>Ie.push({id:"dates",title:d==="matches"&&De==="calendar"?"Month":"Date Range",defaultOpen:!0,contentClassName:"space-y-2",content:v.jsx(v.Fragment,{children:d==="matches"&&De==="calendar"?v.jsxs(v.Fragment,{children:[v.jsx("label",{className:"text-sm",children:"Calendar month"}),v.jsx(nC,{value:`${le.getFullYear()}-${String(le.getMonth()+1).padStart(2,"0")}`,onChange:a=>{const h=by(a);Number.isNaN(h.getTime())||xe(h)}}),v.jsxs("div",{className:"text-sm text-gray-300",children:["Showing matches for ",le.toLocaleString("default",{month:"long",year:"numeric"}),"."]})]}):v.jsxs(v.Fragment,{children:[v.jsx("label",{className:"text-sm",children:"From"}),v.jsx(xy,{value:Pe.from??"",onChange:a=>{a&&nn(h=>Ad(a,h.to,h,"from"))}}),v.jsx("label",{className:"text-sm",children:"To"}),v.jsx(xy,{value:Pe.to??"",onChange:a=>{a&&nn(h=>Ad(h.from,a,h,"to"))}})]})})});o||wu(),De!=="calendar"&&Eu(),d==="matches"&&ei.length>0&&Ie.push({id:"discipline",title:"Disciplines",defaultOpen:!0,content:Ht("discipline",ei,a=>U.types.includes(a),a=>ge(h=>({...h,types:Ln(h.types,a)})),a=>`${yi[a.value]||a.value} (${a.count})`)}),d==="matches"&&ni.length>0&&Ie.push({id:"series",title:"Series",defaultOpen:!0,content:v.jsxs(v.Fragment,{children:[Ht("series",ni,a=>U.series.includes(a),a=>ge(h=>({...h,series:h.series.includes(a)?h.series.filter(f=>f!==a):[...h.series,a]})),a=>`${x[a.value]||a.value} (${a.count})`,a=>x[a.value]||a.value),U.series.length>1&&v.jsxs("div",{className:"pt-3 text-xs text-gray-300",children:[v.jsx("span",{className:"mr-2 opacity-75",children:"Match"}),v.jsxs("div",{className:"inline-flex overflow-hidden rounded border border-gray-700",children:[v.jsx("button",{type:"button",className:`px-2 py-1 ${U.seriesMode==="or"?"bg-accent text-accenttext":"bg-gray-900 text-gray-200"}`,onClick:()=>ge(a=>({...a,seriesMode:"or"})),children:"Any selected"}),v.jsx("button",{type:"button",className:`px-2 py-1 ${U.seriesMode==="and"?"bg-accent text-accenttext":"bg-gray-900 text-gray-200"}`,onClick:()=>ge(a=>({...a,seriesMode:"and"})),children:"All selected"})]})]})]})}),d==="matches"&&ti.length>0&&Ie.push({id:"subdiscipline",title:"Sub-disciplines",defaultOpen:!0,content:Ht("subdiscipline",ti,a=>U.subDisciplines.includes(a),a=>ge(h=>({...h,subDisciplines:Ln(h.subDisciplines,a)})),a=>`${oo[a.value]||a.value} (${a.count})`)}),d==="matches"&&Ae.length>0&&Ie.push({id:"tier",title:"Tier",defaultOpen:!0,content:Ht("tier",Ae,a=>U.tiers.includes(a),a=>ge(h=>({...h,tiers:Ln(h.tiers,a)})),a=>`${a.value.charAt(0).toUpperCase()+a.value.slice(1)} (${a.count})`)}),d==="matches"&&ri.length>0&&Ie.push({id:"status",title:"Status",defaultOpen:!0,content:Ht("status",ri,a=>U.statuses.includes(a),a=>ge(h=>({...h,statuses:Ln(h.statuses,a)})),a=>`${a.value} (${a.count})`)}),d==="clubs"&&(ls.length>0&&Ie.push({id:"club-disciplines",title:"Disciplines",defaultOpen:!0,content:Ht("club-disciplines",ls,a=>U.types.includes(a),a=>ge(h=>({...h,types:Ln(h.types,a)})),a=>`${yi[a.value]||a.value} (${a.count})`)}),us.length>0&&Ie.push({id:"club-subdiscipline",title:"Sub-disciplines",defaultOpen:!0,content:Ht("club-subdiscipline",us,a=>U.subDisciplines.includes(a),a=>ge(h=>({...h,subDisciplines:Ln(h.subDisciplines,a)})),a=>`${oo[a.value]||a.value} (${a.count})`)}),au.length>0&&Ie.push({id:"club-tier",title:"Tiers",defaultOpen:!0,content:Ht("club-tier",au,a=>U.tiers.includes(a),a=>ge(h=>({...h,tiers:Ln(h.tiers,a)})),a=>`${a.value.charAt(0).toUpperCase()+a.value.slice(1)} (${a.count})`)}),si.length>0&&Ie.push({id:"club-series",title:"Series",defaultOpen:!0,content:v.jsxs(v.Fragment,{children:[Ht("club-series",si,a=>U.series.includes(a),a=>ge(h=>({...h,series:h.series.includes(a)?h.series.filter(f=>f!==a):[...h.series,a]})),a=>`${x[a.value]||a.value} (${a.count})`,a=>x[a.value]||a.value),U.series.length>1&&v.jsxs("div",{className:"pt-3 text-xs text-gray-300",children:[v.jsx("span",{className:"mr-2 opacity-75",children:"Match"}),v.jsxs("div",{className:"inline-flex overflow-hidden rounded border border-gray-700",children:[v.jsx("button",{type:"button",className:`px-2 py-1 ${U.seriesMode==="or"?"bg-accent text-accenttext":"bg-gray-900 text-gray-200"}`,onClick:()=>ge(a=>({...a,seriesMode:"or"})),children:"Any selected"}),v.jsx("button",{type:"button",className:`px-2 py-1 ${U.seriesMode==="and"?"bg-accent text-accenttext":"bg-gray-900 text-gray-200"}`,onClick:()=>ge(a=>({...a,seriesMode:"and"})),children:"All selected"})]})]})]})}),lu.length>0&&Ie.push({id:"club-status",title:"Status",defaultOpen:!0,content:Ht("club-status",lu,a=>U.statuses.includes(a),a=>ge(h=>({...h,statuses:Ln(h.statuses,a)})),a=>`${a.value} (${a.count})`)}),Ie.push({id:"club-min-events",title:"Minimum events",defaultOpen:!0,content:v.jsx("input",{type:"number",min:0,value:U.minEvents??"",placeholder:"e.g. 2",onChange:a=>{const h=a.target.value;ge(f=>({...f,minEvents:h?Number(h):void 0}))},className:"w-full rounded bg-gray-900 px-2 py-1"})})),d==="matches"&&De==="chart"&&(Ie.push({id:"chart-columns",title:"Chart columns",defaultOpen:!0,contentClassName:"space-y-2",content:v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"flex flex-wrap gap-1",children:v.jsxs("label",{className:`cursor-pointer rounded border px-2 py-1 text-sm ${rn?"bg-accent text-accenttext":"bg-gray-700 text-gray-100"}`,children:[v.jsx("input",{type:"checkbox",checked:rn,onChange:a=>Jl(a.target.checked),className:"sr-only"}),v.jsx("span",{children:"Hide empty months"})]})}),v.jsx("div",{className:"flex flex-wrap gap-1",children:ns.map(a=>v.jsxs("label",{className:`cursor-pointer rounded border px-2 py-1 text-sm ${Lt.includes(a)?"bg-accent text-accenttext":"bg-gray-700"}`,children:[v.jsx("input",{type:"checkbox",checked:Lt.includes(a),onChange:()=>{ia(h=>{const f=h.includes(a)?h.filter(O=>O!==a):[...h,a],y=Array.from(new Set(f)),N=ns.filter(O=>y.includes(O));return N.length?N:["club"]})},className:"sr-only"}),v.jsx("span",{children:er[a]})]},a))})]})}),Ie.push({id:"chart-colors",title:"Chart colors",defaultOpen:!0,contentClassName:"space-y-2",content:v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"rounded border border-white/10 bg-white/5 p-2 space-y-1.5",children:[v.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-gray-200",children:"Rows"}),v.jsx("label",{className:"text-sm",children:"Row fill mode"}),v.jsxs("select",{value:Ue,onChange:a=>zh(a.target.value),className:"w-full rounded bg-gray-900 px-2 py-1",children:[v.jsx("option",{value:"alternate",children:"Alternating rows"}),v.jsx("option",{value:"discipline",children:"Dominant discipline tint"}),v.jsx("option",{value:"subDiscipline",children:"Dominant sub-discipline tint"}),v.jsx("option",{value:"series",children:"Dominant series tint"})]}),v.jsx("p",{className:"text-[11px] text-gray-400",children:"Controls the background color of each chart row."}),Ue!=="alternate"&&v.jsxs("div",{className:"rounded border border-white/10 bg-black/20 p-2 space-y-1.5",children:[v.jsxs("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-300",children:[St(Ue)," colors"]}),v.jsxs("p",{className:"text-[11px] text-gray-400",children:["Used by row backgrounds when row mode is ",xr(Ue).toLowerCase(),"."]}),v.jsxs("div",{className:"space-y-1",children:[Vn(Ue).map(a=>v.jsxs("label",{className:"flex items-center justify-between gap-2 text-xs text-gray-200",children:[v.jsx("span",{className:"truncate",children:a.label}),v.jsx("input",{type:"color",value:a.color,onChange:h=>fs(Ue,a.key,h.target.value),className:"h-7 w-10 rounded border border-gray-700 bg-gray-900 p-0.5"})]},`row-palette-${Ue}-${a.key}`)),Vn(Ue).length===0&&v.jsxs("div",{className:"text-xs text-gray-400",children:["No ",St(Ue).toLowerCase()," values in current chart range."]})]})]})]}),v.jsxs("div",{className:"rounded border border-white/10 bg-white/5 p-2 space-y-1.5",children:[v.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-gray-200",children:"Cells"}),v.jsx("label",{className:"text-sm",children:"Cell box fill mode"}),v.jsxs("select",{value:de,onChange:a=>Zl(a.target.value),className:"w-full rounded bg-gray-900 px-2 py-1",children:[v.jsx("option",{value:"inherit",children:"Use row color"}),v.jsx("option",{value:"discipline",children:"Dominant discipline tint"}),v.jsx("option",{value:"subDiscipline",children:"Dominant sub-discipline tint"}),v.jsx("option",{value:"series",children:"Dominant series tint"}),v.jsx("option",{value:"weekday",children:"Weekday/Sat/Sun tint"})]}),v.jsx("p",{className:"text-[11px] text-gray-400",children:"Controls the color of month cells in each row."}),(de==="discipline"||de==="subDiscipline"||de==="series")&&v.jsxs("div",{className:"rounded border border-white/10 bg-black/20 p-2 space-y-1.5",children:[v.jsxs("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-300",children:[St(de)," colors"]}),v.jsxs("p",{className:"text-[11px] text-gray-400",children:["Used by cells when cell mode is ",hi(de).toLowerCase(),"."]}),v.jsxs("div",{className:"space-y-1",children:[Vn(de).map(a=>v.jsxs("label",{className:"flex items-center justify-between gap-2 text-xs text-gray-200",children:[v.jsx("span",{className:"truncate",children:a.label}),v.jsx("input",{type:"color",value:a.color,onChange:h=>fs(de,a.key,h.target.value),className:"h-7 w-10 rounded border border-gray-700 bg-gray-900 p-0.5"})]},`cell-palette-${de}-${a.key}`)),Vn(de).length===0&&v.jsxs("div",{className:"text-xs text-gray-400",children:["No ",St(de).toLowerCase()," values in current chart range."]})]})]}),de==="weekday"&&v.jsxs("div",{className:"rounded border border-white/10 bg-black/20 p-2 space-y-2",children:[v.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-300",children:"Weekday colors"}),v.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[v.jsxs("label",{className:"text-xs text-gray-300",children:["Weekday",v.jsx("input",{type:"color",value:_n,onChange:a=>eu(a.target.value),className:"mt-1 block h-8 w-full rounded border border-gray-700 bg-gray-900 p-1"})]}),v.jsxs("label",{className:"text-xs text-gray-300",children:["Saturday",v.jsx("input",{type:"color",value:sn,onChange:a=>aa(a.target.value),className:"mt-1 block h-8 w-full rounded border border-gray-700 bg-gray-900 p-1"})]}),v.jsxs("label",{className:"text-xs text-gray-300",children:["Sunday",v.jsx("input",{type:"color",value:wn,onChange:a=>ts(a.target.value),className:"mt-1 block h-8 w-full rounded border border-gray-700 bg-gray-900 p-1"})]})]})]})]}),v.jsxs("div",{className:"rounded border border-white/10 bg-white/5 p-2 space-y-1.5",children:[v.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-gray-200",children:"Badges"}),v.jsx("label",{className:"text-sm",children:"Badge color mode"}),v.jsxs("select",{value:Ee,onChange:a=>oa(a.target.value),className:"w-full rounded bg-gray-900 px-2 py-1",children:[v.jsx("option",{value:"discipline",children:"Discipline color"}),v.jsx("option",{value:"subDiscipline",children:"Sub-discipline color"}),v.jsx("option",{value:"series",children:"Series color"}),v.jsx("option",{value:"weekday",children:"Weekday/Sat/Sun color"}),v.jsx("option",{value:"status",children:"Match status color"})]}),v.jsx("p",{className:"text-[11px] text-gray-400",children:"Controls the small event badges shown inside each cell."}),(Ee==="discipline"||Ee==="subDiscipline"||Ee==="series")&&v.jsxs("div",{className:"rounded border border-white/10 bg-black/20 p-2 space-y-1.5",children:[v.jsxs("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-300",children:[St(Ee)," colors"]}),v.jsxs("p",{className:"text-[11px] text-gray-400",children:["Used by badges when badge mode is ",Nr(Ee).toLowerCase(),"."]}),v.jsxs("div",{className:"space-y-1",children:[Vn(Ee).map(a=>v.jsxs("label",{className:"flex items-center justify-between gap-2 text-xs text-gray-200",children:[v.jsx("span",{className:"truncate",children:a.label}),v.jsx("input",{type:"color",value:a.color,onChange:h=>fs(Ee,a.key,h.target.value),className:"h-7 w-10 rounded border border-gray-700 bg-gray-900 p-0.5"})]},`badge-palette-${Ee}-${a.key}`)),Vn(Ee).length===0&&v.jsxs("div",{className:"text-xs text-gray-400",children:["No ",St(Ee).toLowerCase()," values in current chart range."]})]})]}),Ee==="weekday"&&v.jsxs("div",{className:"rounded border border-white/10 bg-black/20 p-2 space-y-2",children:[v.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-300",children:"Weekday colors"}),v.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[v.jsxs("label",{className:"text-xs text-gray-300",children:["Weekday",v.jsx("input",{type:"color",value:_n,onChange:a=>eu(a.target.value),className:"mt-1 block h-8 w-full rounded border border-gray-700 bg-gray-900 p-1"})]}),v.jsxs("label",{className:"text-xs text-gray-300",children:["Saturday",v.jsx("input",{type:"color",value:sn,onChange:a=>aa(a.target.value),className:"mt-1 block h-8 w-full rounded border border-gray-700 bg-gray-900 p-1"})]}),v.jsxs("label",{className:"text-xs text-gray-300",children:["Sunday",v.jsx("input",{type:"color",value:wn,onChange:a=>ts(a.target.value),className:"mt-1 block h-8 w-full rounded border border-gray-700 bg-gray-900 p-1"})]})]})]}),Ee==="status"&&v.jsxs("div",{className:"rounded border border-white/10 bg-black/20 p-2 space-y-2",children:[v.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-300",children:"Status colors"}),v.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[v.jsxs("label",{className:"text-xs text-gray-300",children:["Open",v.jsx("input",{type:"color",value:Tr,onChange:a=>la(a.target.value),className:"mt-1 block h-8 w-full rounded border border-gray-700 bg-gray-900 p-1"})]}),v.jsxs("label",{className:"text-xs text-gray-300",children:["Full/Sold out",v.jsx("input",{type:"color",value:on,onChange:a=>tu(a.target.value),className:"mt-1 block h-8 w-full rounded border border-gray-700 bg-gray-900 p-1"})]}),v.jsxs("label",{className:"text-xs text-gray-300",children:["Other",v.jsx("input",{type:"color",value:Mn,onChange:a=>nu(a.target.value),className:"mt-1 block h-8 w-full rounded border border-gray-700 bg-gray-900 p-1"})]})]})]})]})]})}));const ps=v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("h3",{className:"text-lg font-semibold tracking-wide text-white",children:"Filters"}),v.jsx("span",{className:"inline-flex min-w-[5.75rem] justify-end",children:v.jsx("button",{type:"button",onClick:tr,disabled:!Zs,className:`rounded-full px-4 py-1.5 text-xs font-bold uppercase tracking-wide ${Zs?"bg-gradient-to-r from-accent to-accent/80 text-accenttext shadow-lg shadow-accent/30":"invisible pointer-events-none"}`,children:"Update"})})]}),l=v.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[v.jsx("button",{type:"button",onClick:ii,className:"rounded-full border border-white/10 bg-white/5 px-3 py-1.5 text-xs font-semibold uppercase tracking-wide text-gray-100 transition hover:border-accent/40 hover:bg-accent/10 hover:text-white",title:"Share current view and filters",children:" Share"}),v.jsxs("div",{className:"relative",ref:Ji,children:[v.jsx("button",{type:"button",onClick:()=>Xi(a=>!a),className:"rounded-full border border-white/10 bg-white/5 px-3 py-1.5 text-xs font-semibold uppercase tracking-wide text-gray-100 transition hover:border-accent/40 hover:bg-accent/10 hover:text-white",title:"Export filtered results",children:"Export"}),Js&&v.jsxs("div",{className:"absolute left-0 z-20 mt-2 w-60 max-w-[min(22rem,calc(100vw-2rem))] rounded border border-gray-700 bg-surface py-1 shadow-lg",children:[d==="matches"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{type:"button",className:"block w-full px-3 py-1 text-left text-sm hover:bg-gray-700",onClick:()=>$n("matchesCsv"),children:"Results CSV (filtered)"}),v.jsx("button",{type:"button",className:"block w-full px-3 py-1 text-left text-sm hover:bg-gray-700",onClick:()=>$n("matchesIcs"),children:"Calendar (.ics, filtered)"}),v.jsx("button",{type:"button",className:"block w-full px-3 py-1 text-left text-sm hover:bg-gray-700",onClick:()=>$n("matchesGoogle"),children:"Google Calendar (import .ics)"})]}),d==="clubs"&&v.jsx("button",{type:"button",className:"block w-full px-3 py-1 text-left text-sm hover:bg-gray-700",onClick:()=>$n("clubsCsv"),children:"Clubs CSV (filtered)"}),d==="matches"&&De==="chart"&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"my-1 border-t border-white/10"}),v.jsx("button",{type:"button",className:"block w-full px-3 py-1 text-left text-sm hover:bg-gray-700",onClick:()=>$n("chartCsv"),children:"Gar Chart CSV"}),v.jsx("button",{type:"button",className:"block w-full px-3 py-1 text-left text-sm hover:bg-gray-700",onClick:()=>$n("chartXlsx"),children:"Gar Chart Excel (.xls)"})]})]})]}),v.jsx("button",{type:"button",onClick:Wh,className:"rounded-full border border-white/10 bg-white/5 px-3 py-1.5 text-xs font-semibold uppercase tracking-wide text-gray-100 transition hover:border-accent/40 hover:bg-accent/10 hover:text-white",title:"Print current view",children:"Print"})]});return v.jsxs(v.Fragment,{children:[v.jsxs($I,{children:[v.jsx("title",{children:"The Shooters Hub  Match Finder"}),v.jsx("meta",{name:"viewport",content:"width=device-width,initial-scale=1"})]}),v.jsxs(zI,{rootClassName:"match-finder-root",view:De,viewOptions:se,onViewChange:Re,mobileFiltersOpen:es,onToggleMobileFilters:()=>sa(a=>!a),onCloseMobileFilters:()=>sa(!1),mobileSummary:`${d==="clubs"?pt.length:A.length} ${d==="clubs"?"club":"match"}${(d==="clubs"?pt.length:A.length)===1?"":"es"}${o?"":`  radius ${U.radius??100} mi`}`,mobileBanner:Zs&&!es||wr?v.jsxs("div",{className:"space-y-2",children:[Zs&&!es?v.jsx("div",{className:"rounded-full border border-accent/40 bg-accent/10 px-3 py-1 text-xs font-semibold text-accent",children:"Filters changed  update to refresh results."}):null,wr?v.jsx("div",{className:"text-xs font-medium text-gray-200",children:wr}):null]}):null,filterHeading:ps,filterActions:l,filterMeta:wr?v.jsx("span",{className:"-mt-1 block",children:wr}):null,filterSections:Ie,notice:F?v.jsx(Ry,{className:"m-4",title:F,tone:"error",compact:!0}):null,children:[v.jsxs("div",{className:"match-finder-print-settings hidden",children:[v.jsx("h2",{className:"text-xl font-bold",children:"Match Finder Filter Settings"}),v.jsx("div",{className:"mt-2 space-y-1 text-sm",children:_u.map((a,h)=>v.jsx("p",{children:a},`print-filter-${h}`))})]}),v.jsx(HI,{activeView:De,hideOnPrint:!1,className:"w-full",children:un.length?v.jsx(XI,{points:un,caption:`Showing ${un.length} mapped ${d==="clubs"?"clubs":"matches"}.`,height:ra?`${ra}px`:"calc(100vh - 8.5rem)",searchCenter:U.lat!=null&&U.lng!=null?{lat:U.lat,lng:U.lng}:null,searchRadiusMi:U.radius??100,searchCenterInteractive:!o,onSearchCenterChange:({lat:a,lng:h})=>ge(f=>({...f,lat:a,lng:h}))}):v.jsx(Ry,{className:"m-3",title:`No mapped ${d==="clubs"?"clubs":"matches"}`,description:`No ${d==="clubs"?"club":"match"} locations are available in the current results.`,centered:!0})}),v.jsxs(WI,{activeView:De,hideOnPrint:!1,className:"space-y-3",children:[v.jsx(aC,{summary:`${d==="clubs"?pt.length:Vt.length} ${d==="clubs"?"club":"match"}${(d==="clubs"?pt.length:Vt.length)===1?"":"es"}`,actions:v.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1.5 text-xs font-semibold uppercase tracking-wide text-gray-100",children:[v.jsx("span",{children:"Sort"}),v.jsxs("select",{value:U.sort,onChange:a=>ge(h=>({...h,sort:a.target.value})),className:"rounded bg-gray-900 px-2 py-1 text-xs normal-case tracking-normal text-white","aria-label":"Sort list results",children:[v.jsx("option",{value:"dateAsc",children:"Soonest first"}),v.jsx("option",{value:"dateDesc",children:"Latest first"}),v.jsx("option",{value:"nameAsc",children:"Name A-Z"}),v.jsx("option",{value:"nameDesc",children:"Name Z-A"})]})]})}),d==="clubs"?pt.map(hu):Vt.map(cs)]}),d==="matches"&&v.jsx(KI,{activeView:De,hideOnPrint:!1,padded:!1,className:"p-3",children:v.jsx(GI,{monthCursor:Kh,weekdays:qh,days:Gh,matches:A,selectedDateISO:Dn,onPrevMonth:()=>xe(a=>new Date(a.getFullYear(),a.getMonth()-1,1)),onNextMonth:()=>xe(a=>new Date(a.getFullYear(),a.getMonth()+1,1)),onSelectDate:vn,longDateLabel:Yh,formatLocalDate:hn,renderDayEntry:(a,h,f)=>{const y=typeof a.type=="string"?a.type.trim():"",N=y?Ys[y]||sr(`discipline:${y}`):ol,O=h%2?fi(N,-18):N,W=ma(O),q=mc(a);return v.jsx("a",{href:zt(`/matches/${a.id}`),title:q,onClick:V=>{V.preventDefault(),vn(f)},onDoubleClick:V=>{V.preventDefault(),_.push(zt(`/matches/${a.id}`))},className:"block w-full h-5 leading-5 rounded-sm px-1 text-[11px] font-semibold truncate ring-1 ring-black/10",style:{backgroundColor:O,color:W},children:q},a.id)},renderSelectedItem:a=>cs(a),sortSelectedItems:(a,h)=>String(a.title||a.name).localeCompare(String(h.title||h.name))})}),d==="matches"&&v.jsxs(qI,{activeView:De,padded:!1,hideOnPrint:!1,className:"p-3 gar-chart-container gar-chart-print-area",children:[v.jsx("div",{className:"flex flex-wrap justify-between items-start gap-3 mb-3",children:v.jsxs("div",{className:"space-y-2 max-w-3xl",children:[v.jsx("h3",{className:"font-bold text-lg",children:"The Gar Chart"}),pu.length>0&&v.jsxs("div",{className:"print-hidden",children:[v.jsx("div",{className:"mb-1 text-xs uppercase tracking-wide text-gray-400",children:"Key"}),v.jsx("div",{className:"overflow-x-auto pb-1",children:v.jsx("div",{className:"inline-flex min-w-full items-center gap-3 whitespace-nowrap",children:pu.map(a=>v.jsxs("div",{className:"inline-flex items-center gap-1.5",children:[v.jsxs("span",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500",children:[a.title,":"]}),a.items.map(h=>v.jsxs("span",{className:"inline-flex items-center gap-1 rounded border border-white/10 bg-white/5 px-2 py-0.5 text-xs text-gray-100",children:[v.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded",style:{backgroundColor:h.color}}),h.label]},`legend-${a.id}-${h.key}`))]},`legend-section-${a.id}`))})})]}),v.jsx("div",{className:"hidden text-xs text-gray-400 space-y-0.5 print:block print:text-black",children:(mi.lines.length?mi.lines:["No filters applied"]).map((a,h)=>v.jsx("p",{children:a},h))}),v.jsx("p",{className:"hidden text-xs text-gray-500 print:block print:text-black",children:"Generated by The Shooters Hub  shootershub.fortneyengineering.com"})]})}),v.jsx(ZI,{months:Sn,rows:Gt.rows,leftCols:ds,leftColWidths:gu,chartSortKey:Et,chartSortDir:Fe,onSortKey:a=>{ft(h=>Et===a&&h==="asc"?"desc":"asc"),Xl(a)},getRowBackground:yu,getCellBackground:vu,getBadgeColor:Rr,getContrastText:ma})]})]}),v.jsx("style",{jsx:!0,global:!0,children:`
        @media print {
          body * {
            visibility: hidden !important;
          }
          .match-finder-root,
          .match-finder-root * {
            visibility: visible !important;
          }
          .match-finder-root {
            position: absolute !important;
            inset: 0 !important;
            width: 100% !important;
            min-height: auto !important;
            display: block !important;
          }
          .match-finder-root aside {
            display: none !important;
          }
          .match-finder-print-settings {
            display: block !important;
            page-break-after: always;
            break-after: page;
            margin: 0 0 1rem 0;
          }
          .finder-view {
            break-before: page;
            page-break-before: always;
          }
          .finder-view--map {
            min-height: auto !important;
            height: auto !important;
            display: block !important;
          }
          .finder-view--map > div {
            width: 100% !important;
            height: auto !important;
            aspect-ratio: var(--print-map-ratio, 16 / 9);
            max-height: 10in !important;
            min-height: 6in !important;
          }
          body {
            background: #fff !important;
            color: #000 !important;
          }
          .match-finder-root {
            background: #fff !important;
            color: #000 !important;
          }
          .print-hidden {
            display: none !important;
          }
          .gar-chart-print-area {
            background: #fff !important;
            color: #000 !important;
          }
          .gar-chart-container table,
          .gar-chart-container th,
          .gar-chart-container td {
            color: #000 !important;
            border-color: #000 !important;
            background: #fff !important;
          }
          .gar-chart-day {
            background: transparent !important;
            color: #000 !important;
            border: 1px solid #000 !important;
            padding: 2px 4px !important;
            margin: 1px !important;
            font-weight: 600 !important;
            text-decoration: none !important;
          }
          .gar-chart-cell {
            min-height: auto !important;
          }
        }
      `})]})}const Ni=t=>{if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"&&t.trim()!==""){const e=Number(t);if(Number.isFinite(e))return e}},AD=t=>{if(t)return{types:Array.isArray(t.types)?t.types:[],subDisciplines:Array.isArray(t.subDisciplines)?t.subDisciplines:[],tiers:Array.isArray(t.tiers)?t.tiers:[],statuses:Array.isArray(t.statuses)?t.statuses:[],series:Array.isArray(t.series)?t.series:[],seriesMode:t.seriesMode==="and"?"and":"or",from:t.from,to:t.to,radius:Ni(t.radius),zip:t.zip,lat:Ni(t.lat),lng:Ni(t.lng),sort:t.sort,minEvents:Ni(t.minEvents)}},bD=(t,e)=>{const n=e==null?void 0:e.tokens;!n||typeof n!="object"||Object.entries(n).forEach(([r,s])=>{typeof s=="string"&&t.style.setProperty(r,s)})},kD=({config:t,node:e})=>{var o,u,c,d,p,m,g,S,I,P,L;M.useEffect(()=>{bD(e,t.theme)},[e,t.theme]),M.useEffect(()=>{window.__SH_PLUGIN_API_BASE__=t.apiBase,window.__SH_PLUGIN_OLC_BASE__=t.olcBase},[t.apiBase,t.olcBase]);const n=M.useMemo(()=>{var _;const E=Array.isArray((_=t.finder)==null?void 0:_.allowedViews)?t.finder.allowedViews:[];return E.length?E:t.mode==="clubs"?["map","list"]:["map","list","calendar","chart"]},[(o=t.finder)==null?void 0:o.allowedViews,t.mode]),r=M.useMemo(()=>{var C,D,F,j;const E=Ni((D=(C=t.finder)==null?void 0:C.defaultCenter)==null?void 0:D.lat),_=Ni((j=(F=t.finder)==null?void 0:F.defaultCenter)==null?void 0:j.lng);if(!(E==null||_==null))return{lat:E,lng:_}},[(c=(u=t.finder)==null?void 0:u.defaultCenter)==null?void 0:c.lat,(p=(d=t.finder)==null?void 0:d.defaultCenter)==null?void 0:p.lng]),s=Ni((m=t.finder)==null?void 0:m.defaultRadius),i=M.useMemo(()=>{var _;const E=AD((_=t.finder)==null?void 0:_.initialFilters)||{};return r&&(E.lat==null&&(E.lat=r.lat),E.lng==null&&(E.lng=r.lng)),s!=null&&E.radius==null&&(E.radius=s),E},[(g=t.finder)==null?void 0:g.initialFilters,r,s]);return v.jsx(CD,{mode:t.mode,allowedViews:n,defaultView:(S=t.finder)==null?void 0:S.defaultView,defaultCenter:r,defaultRadius:s,hideDistanceFilters:!!((I=t.finder)!=null&&I.hideDistanceFilters),lockedClubId:(P=t.finder)==null?void 0:P.lockedClubId,siteBaseUrlOverride:(L=t.finder)==null?void 0:L.publicAppBase,initialFilters:i})},xD=t=>{try{const e=JSON.parse(t||"{}");return!e||typeof e!="object"||e.type!=="finder"||!e.mode||!e.apiBase||!e.olcBase?null:e}catch(e){return console.error("[ShootersHub] Failed to parse config",e),null}},cS=(t,e)=>{sf.createRoot(t).render(v.jsx(rf.StrictMode,{children:v.jsx(kD,{config:e,node:t})}))},ND=()=>{document.querySelectorAll(".sh-embed[data-sh-config]").forEach(t=>{const e=t.dataset.shConfig||"{}",n=xD(e);n&&cS(t,n)})};document.addEventListener("DOMContentLoaded",ND);window.ShootersHubPlugin={mount:(t,e)=>{const n=document.querySelector(t);if(!n)throw new Error(`Selector ${t} not found`);cS(n,e)}};export{rf as R,PD as a,kR as b,hS as c,RD as d,Bb as g,Ub as i,v as j,M as r};
